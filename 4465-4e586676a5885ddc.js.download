(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4465],{83412:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){if(arguments.length<1)throw TypeError("1 arguments required, but only ".concat(arguments.length," present"));var n=(0,r.default)(e);if(!(0,i.default)(n))throw RangeError("Invalid time value");var t=l[n.getUTCDay()],a=(0,s.default)(n.getUTCDate(),2),d=o[n.getUTCMonth()],c=n.getUTCFullYear(),u=(0,s.default)(n.getUTCHours(),2),h=(0,s.default)(n.getUTCMinutes(),2),f=(0,s.default)(n.getUTCSeconds(),2);return"".concat(t,", ").concat(a," ").concat(d," ").concat(c," ").concat(u,":").concat(h,":").concat(f," GMT")};var r=a(t(71171)),i=a(t(39989)),s=a(t(87394));function a(e){return e&&e.__esModule?e:{default:e}}var l=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],o=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];e.exports=n.default},14514:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){(0,s.default)(1,arguments);var n=(0,i.default)(e);return(0,r.default)(1e3*n)};var r=a(t(71171)),i=a(t(82084)),s=a(t(68734));function a(e){return e&&e.__esModule?e:{default:e}}e.exports=n.default},85533:function(e,n,t){"use strict";t.d(n,{G:function(){return C}});var r=t(85893),i=t(69896),s=t.n(i),a=t(41664),l=t.n(a),o=t(71429),d=t(80949),c=t(23152),u=t(58765),h=t(30297),f=t(64995),v=t(44914),x=t(1801),p=t(95257),m=t(93184),j=t(20834),_=t(27073),g=t(11941);let C=(0,g.X)(e=>{var n,t,i;let{query:a,origin:g,refetchFolderContent:C,trackResultClick:y}=e,b=(0,v.Kz)(a.owner),w=(0,_.iP)().width<699,I=null!==(t=null===(n=a.contributors)||void 0===n?void 0:n.map(e=>{let{id:n,handle:t,profileImageUrl:r}=e;return{ownerId:n,handle:t,profile_image_url:null!=r?r:void 0,type:"user"}}))&&void 0!==t?t:[],L=null!==(i=I[0])&&void 0!==i?i:a.owner;0===I.length&&I.push(L);let N=(0,r.jsxs)("div",{className:s().nameAndTags,children:[(0,r.jsx)(l(),{href:"/queries/".concat(a.id),className:s().contentName,onClick:y,onAuxClick:y,children:a.name}),a.tags.length>0&&(0,r.jsx)(m.$,{className:s().tags,slug:"queries",tags:a.tags.slice(0,5)})]}),F="creations"===g?(0,r.jsx)(l(),{href:"/queries/".concat(a.id),children:(0,r.jsx)(d.J,{icon:"terminal"})}):(0,r.jsx)(l(),{href:"/".concat(a.owner.handle),children:(0,r.jsx)(h.q,{src:a.owner.profile_image_url,ownerId:a.owner.id,handle:a.owner.handle,type:a.owner.type,size:w?16:25})}),M=(0,r.jsxs)("div",{className:s().rightContainer,children:[(0,r.jsxs)("div",{className:s().badges,children:[!!a.matview_id&&(0,r.jsx)("div",{children:(0,r.jsxs)(x.C,{size:"L",color:"info",variant:"filled",children:["Materialized",(0,r.jsx)(p.IconTableMaterialized,{})]})}),b&&(0,r.jsx)(f.f,{size:"L",querySchedule:a.schedule})]}),(0,r.jsxs)("div",{className:s().actions,children:[(0,r.jsx)(c.Z,{query_id:a.id,stars:a.favoriteCount,isFavorite:a.hasStarred}),(0,r.jsx)(j.a,{contentItem:{type:"query",id:a.id,owner:a.owner},refetchFolderContent:C})]})]});return w?(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:(0,r.jsxs)("div",{className:s().multiline,children:[N,(0,r.jsxs)("div",{className:s().ownerAndDetails,children:[F,(0,r.jsxs)(l(),{href:"/".concat(L.handle),children:["@",L.handle]}),I.length>1&&(0,r.jsxs)("span",{children:["+ ",I.length-1]})]}),(0,r.jsxs)("div",{className:s().ownerAndDetails,children:[(0,r.jsxs)("span",{children:["updated ",(0,r.jsx)(o.bM,{children:a.updated_at})]}),a.is_private&&(0,r.jsx)(d.J,{icon:"lock-fill"})]})]})}),(0,r.jsx)("td",{children:M})]}):(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{className:s().avatarColumn,children:F}),(0,r.jsx)("td",{children:(0,r.jsxs)("div",{className:s().multiline,children:[N,(0,r.jsxs)("div",{className:s().ownerAndDetails,children:[(0,r.jsx)("div",{children:(0,r.jsx)(u.H,{avatarList:I,size:"M",invertStackLayout:!0})}),(0,r.jsxs)(l(),{href:"/".concat(L.handle),children:["@",L.handle]}),I.length>1&&(0,r.jsxs)("span",{children:["+ ",I.length-1]}),(0,r.jsxs)("span",{children:["â€¢ updated ",(0,r.jsx)(o.bM,{children:a.updated_at})]}),a.is_private&&(0,r.jsx)(d.J,{icon:"lock-fill"})]})]})}),(0,r.jsx)("td",{children:M})]})})},23152:function(e,n,t){"use strict";t.d(n,{Z:function(){return m}});var r=t(85893),i=t(69896),s=t.n(i),a=t(80949),l=t(24745),o=t(41664),d=t.n(o),c=t(71909),u=t(57831),h=t(1801),f=t(77747),v=t(42708),x=t(23852),p=t(93556);function m(e){let n=(0,u.kP)(),{enableFavoriting:t=!0}=e,i=(0,c.J)();return t?n?void 0===e.isFavorite?(0,r.jsx)("div",{className:s().favorites,children:(0,r.jsxs)(h.C,{size:"L",variant:"filled",color:"neutral",children:[(0,l.u)(e.stars),(0,r.jsx)(a.J,{icon:"star"})]})}):(0,r.jsx)(j,{...e}):(0,r.jsx)("div",{className:s().favorites,children:(0,r.jsxs)(h.C,{size:"L",variant:"filled",color:"neutral",children:[(0,l.u)(e.stars),(0,r.jsx)(d(),{href:i,"aria-label":"Add to favorites",children:(0,r.jsx)(f.IconStar,{})})]})}):(0,r.jsxs)("div",{className:s().favorites,children:[(0,l.u)(e.stars),(0,r.jsx)(a.J,{icon:"person"})]})}function j(e){var n;let{favoriteQuery:t}=(0,x.S)(),{unfavoriteQuery:i}=(0,p.F)(),a=null!==(n=e.isFavorite)&&void 0!==n&&n;return a?(0,r.jsxs)("div",{className:s().favorites,children:[(0,l.u)(e.stars),(0,r.jsx)("button",{"aria-label":"Remove from favorites",onClick:()=>{i(e.query_id)},children:(0,r.jsx)(v.IconStarFill,{})})]}):(0,r.jsxs)("div",{className:s().favorites,children:[(0,l.u)(e.stars),(0,r.jsx)("button",{"aria-label":"Add to favorites",onClick:()=>{t(e.query_id)},children:(0,r.jsx)(f.IconStar,{})})]})}},64995:function(e,n,t){"use strict";t.d(n,{f:function(){return o}});var r=t(85893),i=t(49955),s=t(56446),a=t(57831),l=t(59085);function o(e){let{querySchedule:n,size:t}=e,o=(0,a.Ke)(),d=(0,l.lp)(o,null==n?void 0:n.id),c=n&&(0,s.mB)(n.cronString),u=!!((null==d?void 0:d.email)||(null==d?void 0:d.slack)||(null==d?void 0:d.webhook)||(null==d?void 0:d.discord));return void 0===c||void 0===n?null:(0,r.jsx)(i.y,{size:t,schedule:n,hasQueryAlerts:u})}},49955:function(e,n,t){"use strict";t.d(n,{y:function(){return x}});var r=t(85893),i=t(97600),s=t.n(i),a=t(1801),l=t(5505),o=t(56446),d=t(47730),c=t(84512),u=t(55754),h=t(44917),f=t(61018);let v=e=>{let{run:n,title:t}=e;return(0,r.jsxs)("p",{children:[t,": ",(0,u.Z)(n,"yyyy-MM-dd HH:mm"),"\xa0-\xa0",(0,u.Z)(new Date(n).getTime()+18e5,"HH:mm")]})},x=e=>{let{size:n,schedule:t,hasQueryAlerts:i}=e,u=(0,o.mB)(t.cronString);if(void 0===u||void 0===t.cronString)return null;let x=(0,c.rD)(t.cronString,t.updatedAt),p=(0,c.Gs)(t.cronString);return(0,r.jsx)("div",{className:s().scheduleBadge,children:(0,r.jsx)(d.u,{label:(0,r.jsxs)("div",{children:[!!x&&(0,r.jsx)(v,{run:x,title:"Last execution"}),!!p&&(0,r.jsx)(v,{run:p,title:"Next execution"})]}),position:"below-align-right",children:(0,r.jsx)("div",{children:(0,r.jsx)(a.C,{size:n,color:!0===i?"warning":"brand-blue",variant:"filled",children:(0,r.jsxs)("span",{className:s().badgeLabel,children:[(0,r.jsx)("span",{children:(0,h.S)(u)}),!0===i?(0,r.jsx)(f.IconBellRing,{}):(0,r.jsx)(l.IconClockHistory,{})]})})})})})}},68583:function(e,n,t){"use strict";t.d(n,{X:function(){return s},Z:function(){return i}});var r=t(48821);function i(){return(0,r.Z)(e=>{let n=Number(e.page),t=Number.isInteger(n)&&n>0;return t?n:1},e=>({page:1===e?void 0:e}))}function s(e){return{...e,page:void 0}}},65946:function(e,n,t){"use strict";t.d(n,{p:function(){return l}});var r=t(82729),i=t(84937),s=t(40802);function a(){let e=(0,r._)(["\n  mutation MoveContent(\n    $dashboardIds: [Int!]!\n    $queryIds: [Int!]!\n    $targetFolderId: String\n  ) {\n    moveContent(\n      input: {\n        dashboardIds: $dashboardIds\n        queryIds: $queryIds\n        targetFolderId: $targetFolderId\n      }\n    ) {\n      ok\n    }\n  }\n"]);return a=function(){return e},e}function l(){let[e,n]=(0,i.OuL)();return[function(t,r){return new Promise(n.loading?()=>{}:n=>{e({context:{session:t},variables:{dashboardIds:r.selectedDashboards,queryIds:r.selectedQueries,targetFolderId:r.folderId}}).then(()=>{n()},e=>{e.message="Failed to move content to folder ".concat(r.folderId,": ")+e.message,s.Tb(e)})})},n]}(0,t(39137).Z)(a())},84060:function(e,n,t){"use strict";t.d(n,{X:function(){return l}});var r=t(85893),i=t(75485),s=t(4564),a=t(3602);function l(e){let n=(0,i.Q)(e.session,{owner:e.owner});return(0,r.jsx)(s.L9,{size:"M",label:"Create folder",isOpen:e.isCreateFolderModalOpen,onDismiss:()=>e.setIsCreateFolderModalOpen(!1),content:(0,r.jsx)(a.J,{onDismiss:()=>e.setIsCreateFolderModalOpen(!1),refetchFolders:async()=>{await n.refetch()},owner:e.owner})})}},3354:function(e,n,t){"use strict";t.d(n,{v:function(){return j}});var r=t(85893),i=t(91720),s=t.n(i),a=t(32613),l=t(75485),o=t(1801),d=t(89912),c=t(65946),u=t(57903),h=t(66465),f=t(51087),v=t(78080),x=t(54179),p=t(45466),m=t(57831);function j(e){var n,t;let{session:i,contentItem:{type:j,id:_,owner:g},isCreations:C,currentFolderName:y,refetch:b}=e,w=(0,l.Q)(i,{owner:g}),I=null===(n=w.data)||void 0===n?void 0:n.folders.folders,[L]=(0,c.p)(),{captureEvent:N}=(0,h.z$)(),F=function(e){var n;let t=(0,m.Ke)(),r=(0,p.gh)(t);return null===(n=r.find(n=>n.id===e))||void 0===n?void 0:n.serviceTier}(g.id);if(void 0===w||void 0===I)return null;let M=e=>{L(i,{selectedDashboards:"dashboard"===j?[_]:[],selectedQueries:"query"===j?[_]:[],folderId:null==e?void 0:e.id}).then(()=>{(0,u.Bh)({level:"success",title:"".concat("dashboard"===j?"Dashboard":"Query"," moved to ").concat(void 0!==e?e.name:"Creations")}),N("Content added to folder",{folder_id:void 0!==e?e.id:"Creations"}),b&&b()}).catch(e=>{(0,u.Bh)({level:"error",title:e.message})})},S="team"===g.type?null!==(t=null==F?void 0:F.maxFolders)&&void 0!==t?t:0:i.user.privateFields.serviceTier.maxFolders,T=I.length>=S;return(0,r.jsxs)(a.s_,{children:[(0,r.jsxs)(a.$0,{title:"Move to",maxHeight:"30.5rem",children:[!C&&(0,r.jsxs)(a.ys,{onClick:()=>M(),children:[(0,r.jsx)(o.C,{size:"M",variant:"filled",color:"neutral",iconOnly:!0,children:(0,r.jsx)(f.IconFolder,{})}),"Creations"]}),I.filter(e=>e.name!==y).map(e=>(0,r.jsxs)(a.ys,{onClick:()=>{M(e)},children:[(0,r.jsx)(o.C,{size:"M",variant:"filled",color:(0,d.SX)(e.color),iconOnly:!0,children:(0,d.q7)(e.icon)}),e.name]},e.id))]}),(0,r.jsx)(a.$0,{children:(0,r.jsx)(x.c,{position:"above-align-left",enabled:T,content:()=>(0,r.jsx)("div",{className:s().limitReachedTooltip,children:"You've reached the folder limit."}),children:(0,r.jsx)("div",{children:(0,r.jsxs)(a.ys,{disabled:T,onClick:()=>{e.setIsCreateFolderModalOpen(!0),e.close()},children:[(0,r.jsx)(v.IconPlus,{}),"New folder"]})})})})]})}},20834:function(e,n,t){"use strict";t.d(n,{a:function(){return x}});var r=t(85893),i=t(69896),s=t.n(i),a=t(3354),l=t(84060),o=t(45186),d=t(10933),c=t(70342),u=t(57831),h=t(11163),f=t(67294),v=t(18035);function x(e){let n=(0,u.qy)(),t=(0,h.useRouter)(),i=(0,v.Y)(e.contentItem.owner),x=t.asPath.includes(i),p=t.asPath.includes(i+"/folders/archived"),m=t.query.name,[j,_]=(0,f.useState)(!1);return n&&!p&&x&&(void 0===m||"string"==typeof m)?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:s().threeDotMenu,children:(0,r.jsx)(o.f,{content:s=>{let{close:l}=s;return(0,r.jsx)(a.v,{contentItem:e.contentItem,refetch:e.refetchFolderContent,isCreations:t.asPath.includes(i+"/folders/creations"),currentFolderName:m,session:n,setIsCreateFolderModalOpen:_,close:l})},position:"below-align-right",closeOnClickOutside:!0,children:(0,r.jsx)(d.h,{theme:"tertiary",size:"XS",children:(0,r.jsx)(c.IconThreeDots,{})})})}),(0,r.jsx)(l.X,{session:n,isCreateFolderModalOpen:j,setIsCreateFolderModalOpen:_,owner:e.contentItem.owner})]}):null}},71429:function(e,n,t){"use strict";t.d(n,{II:function(){return g},bM:function(){return m},rI:function(){return j},wr:function(){return _}});var r=t(85893),i=t(67294),s=t(35180),a=t.n(s),l=t(13120),o=t.n(l),d=t(83412),c=t.n(d),u=t(39612),h=t(14514),f=t.n(h),v=t(51196),x=t.n(v),p=t(52502);let m=e=>{let n=j({now:g(),time:e.children,counter:e.counter});return n?(0,r.jsx)("time",{dateTime:n.abs,title:n.abs,className:e.className,children:n.rel}):null};function j(e){let{now:n,time:t,counter:r}=e;if(!t)return;let i=C(t),s=c()(i);if(r)return{iso:i,abs:s,rel:(0,u.NE)(a()(n,i))};let l=o()(i,n,{addSuffix:!0}),d=l.includes("second")?"Just now":l;return{rel:d,abs:s,iso:i}}function _(e){let{now:n,date:t}=e,r=o()(t,n);return r.includes("second")?"Now":r.replace(" minutes","min").replace(" minute","min").replace(" hours","h").replace(" hour","h").replace(" days","d").replace(" day","d").replace(" months","mo").replace(" month","mo").replace(" years","y").replace(" year","y")}let g=()=>{let e=(0,p.N)();return i.useEffect(()=>{let n=setInterval(e,1e3);return()=>clearInterval(n)},[e]),Date.now()},C=e=>"string"==typeof e?x()(e):"number"==typeof e?f()(e):f()(e.getTime()/1e3)},58765:function(e,n,t){"use strict";t.d(n,{H:function(){return f}});var r=t(85893),i=t(41664),s=t.n(i),a=t(99292),l=t.n(a),o=t(47730),d=t(30297),c=t(54179),u=t(1801),h=t(32613);function f(e){let{avatarList:n,maxAvatars:t=5,invertStackLayout:i=!1}=e;function a(e){switch(e){case"S":return 16;case"L":return 24;default:return 20}}let f=n.length;return(0,r.jsxs)("div",{className:l().avatarGroup,suppressHydrationWarning:!0,children:[(0,r.jsx)("ul",{className:l().avatarsList,children:n.slice(0,t).map((n,c)=>(0,r.jsx)("li",{className:l().element,style:{zIndex:i?t-c:"auto"},children:(0,r.jsx)(s(),{href:"/".concat(n.handle),children:(0,r.jsx)(o.u,{label:"@".concat(n.handle),position:"below-center",children:(0,r.jsx)("div",{className:l().avatarWrapper,children:(0,r.jsx)(d.q,{ownerId:n.ownerId,handle:n.handle,src:n.profile_image_url,size:a(e.size),type:n.type})})})})},n.handle))}),f>t&&(0,r.jsx)(c.c,{position:"below-align-right",content:()=>(0,r.jsx)(h.s_,{children:(0,r.jsx)(h.$0,{children:n.slice(t).map(n=>(0,r.jsxs)(h.FB,{href:"/".concat(n.handle),children:[(0,r.jsx)(d.q,{ownerId:n.ownerId,handle:n.handle,src:n.profile_image_url,size:a(e.size),type:n.type}),"@",n.handle]},n.handle))})}),children:(0,r.jsxs)(u.C,{size:"S",variant:"filled",color:"neutral",children:["+",f-t]})})]})}},42708:function(e,n,t){"use strict";t.r(n),t.d(n,{IconStarFill:function(){return i}});var r=t(85893);function i(){return(0,r.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,r.jsx)("path",{d:"M3.6123 15.4427C3.22586 15.6413 2.78829 15.2942 2.86609 14.8508L3.69582 10.1213L0.173489 6.76462C-0.155692 6.45092 0.0147086 5.87737 0.455698 5.81472L5.35417 5.11885L7.53829 0.792305C7.73504 0.402565 8.26801 0.402565 8.46476 0.792305L10.6489 5.11885L15.5474 5.81472C15.9883 5.87737 16.1587 6.45092 15.8296 6.76462L12.3072 10.1213L13.137 14.8508C13.2148 15.2942 12.7772 15.6413 12.3908 15.4427L8.00153 13.1868L3.6123 15.4427Z",fill:"currentColor"})})}},23852:function(e,n,t){"use strict";t.d(n,{S:function(){return l}});var r=t(82729),i=t(57831),s=t(84937);function a(){let e=(0,r._)(["\n  mutation FavoriteQuery($input: FavoriteQueryInput!) {\n    favoriteQuery(input: $input) {\n        id\n        starCount\n        hasStarred\n    }\n  }\n"]);return a=function(){return e},e}function l(){let e=(0,i.kP)(),[n,t]=(0,s.j7d)();return{favoriteQuery:function(t){n({context:{session:e},variables:{input:{id:t}}})},favoriteQueryMutationResult:t}}(0,t(39137).Z)(a())},93556:function(e,n,t){"use strict";t.d(n,{F:function(){return l}});var r=t(82729),i=t(57831),s=t(84937);function a(){let e=(0,r._)(["\n  mutation UnfavoriteQuery($input: UnfavoriteQueryInput!) {\n    unfavoriteQuery(input: $input) {\n      id\n      starCount\n      hasStarred\n    }\n  }\n"]);return a=function(){return e},e}function l(){let e=(0,i.kP)(),[n,t]=(0,s.UW4)();return{unfavoriteQuery:function(t){n({context:{session:e},variables:{input:{id:t}}})},unfavoriteQueryMutationResult:t}}(0,t(39137).Z)(a())},69896:function(e){e.exports={table:"ContentList_table__ezPEU",avatarColumn:"ContentList_avatarColumn__U1KUi",multiline:"ContentList_multiline__pwNrv",contentName:"ContentList_contentName__OAzIv",ownerAndDetails:"ContentList_ownerAndDetails__0cucp",nameAndTags:"ContentList_nameAndTags__gtiaT",badges:"ContentList_badges__D2NOb",favorites:"ContentList_favorites__A_J3c",rightContainer:"ContentList_rightContainer__5pPzJ",actions:"ContentList_actions__AnpKh",threeDotMenu:"ContentList_threeDotMenu__Vqf_d",tags:"ContentList_tags__cgYZj"}},97600:function(e){e.exports={scheduleBadge:"ScheduleBadge_scheduleBadge__FfPCV",badgeLabel:"ScheduleBadge_badgeLabel__tZv3n"}},91720:function(e){e.exports={limitReachedTooltip:"MoveToFolder_limitReachedTooltip__F1lL_",upgradeLink:"MoveToFolder_upgradeLink__t8ALo"}},99292:function(e){e.exports={avatarGroup:"AvatarGroup_avatarGroup__Zzhwu",avatarsList:"AvatarGroup_avatarsList__aL00A",element:"AvatarGroup_element__9Ky8Y",avatarWrapper:"AvatarGroup_avatarWrapper__fDvax"}}}]);
//# sourceMappingURL=4465-4e586676a5885ddc.js.map