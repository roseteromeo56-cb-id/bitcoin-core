(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9694],{6661:function(e,t,n){"use strict";function r(e){let{isCurrentlyPrivate:t,dashboardOwner:n,selectedOwner:r,remainingQuota:a}=e;return!!t&&n.id===r.id&&n.type===r.type||a>0}n.d(t,{B:function(){return r}})},86634:function(e,t,n){"use strict";n.d(t,{y:function(){return el}});var r=n(85893),a=n(31544),i=n.n(a),s=n(67294),o=n(903),l=n.n(o),d=n(57903),u=n(41664),c=n.n(u),_=n(61451),h=n(57831),p=n(85361),m=n(95260),v=n(78718),f=n.n(v),y=n(94184),g=n.n(y),x=n(30990),b=n(65430),j=n.n(b),C=n(34190),I=n.n(C),k=n(92754),w=n.n(k),S=n(15840),q=n(58611),P=n(10933),D=n(10969),E=n(41118),N=n(82729),A=n(40201),z=n.n(A),T=n(61575),U=n(76138),M=n(39137),F=n(84937);function B(){let e=(0,N._)(["\n  mutation GenerateDataUploadUrl($input:GenerateDataUploadUrlInput!) {\n    generateDataUploadUrl(input: $input) {\n      url\n    }\n  }\n"]);return B=function(){return e},e}let O=async(e,t,n)=>{var r;let{data:a}=await U.bj.mutate({mutation:F.Mws,variables:{input:{contextOwner:f()(t,["id","type"]),contentLength:n.size,fileName:n.name}},context:{session:e},fetchPolicy:"no-cache"}),i=null==a?void 0:null===(r=a.generateDataUploadUrl)||void 0===r?void 0:r.url;if((0,T.Yd)(i))throw Error("GenerateDataUploadUrl did not return a URL");return i};class Q extends Error{}let L=(e,t,n)=>new Promise((r,a)=>{let i=new XMLHttpRequest,s=new Date;i.upload.addEventListener("progress",e=>{let t;let{loaded:r,total:a}=e,o=z()({start:s,end:new Date}).seconds;if((0,T.$K)(o)&&0!==o){let e=r/o;t=(a-r)/e}n({percentage:r/a,secondsRemaining:t,completed:r===a,abort:i.abort.bind(i)})}),i.addEventListener("load",()=>r({status:i.status,body:i.responseText})),i.addEventListener("error",()=>a(Error("File upload failed"))),i.addEventListener("abort",()=>a(new Q("File upload aborted"))),i.open("PUT",e,!0);let o=new FormData;o.append(t.name,t),i.send(o.get(t.name))}),R=async function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:()=>{};r({completed:!1,percentage:0,secondsRemaining:void 0,abort:()=>{}});let a=await O(e,t,n);await L(a,n,r)};(0,M.Z)(B());var Z=n(42665),H=n(54173),$=n(34728);let V=new Intl.NumberFormat("en-US",{minimumFractionDigits:1,maximumFractionDigits:3}),G=e=>{let{percentage:t}=e;return(0,r.jsx)("div",{className:w().progressWrapper,children:(0,r.jsx)("div",{className:w().progressBar,children:(0,r.jsx)("span",{className:w().progressBarFill,style:{width:t.toLocaleString("en",{style:"percent"})}})})})},K=e=>{let{onFileChosen:t,hasError:n,disabled:a}=e,i=(0,s.useRef)(null),o=(0,s.useCallback)(e=>{let n=null==e?void 0:e[0];n&&t(n)},[t]),l=(0,s.useCallback)(e=>{i.current&&(i.current.files=e.dataTransfer.files,o(e.dataTransfer.files)),e.preventDefault()},[o]);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:g()(w().inputContainer,n&&w().errorContainer,!0===a&&w().disabledContainer),onDragOver:e=>e.preventDefault(),onDragEnter:e=>e.preventDefault(),onDrop:l,children:[(0,r.jsx)("div",{className:w().iconContainer,children:(0,r.jsx)(S.IconFiles,{})}),(0,r.jsxs)("div",{className:w().inputDescriptionContainer,children:[(0,r.jsx)("div",{children:(0,r.jsxs)("p",{children:["Drag and drop a file,",(0,r.jsx)("label",{htmlFor:"upload-table",children:" browse your files"}),", or upload data programmatically via"," ",(0,r.jsx)("label",{children:(0,r.jsx)(c(),{href:"https://docs.dune.com/api-reference/tables/endpoint/create",target:"_blank",children:"API"})}),"."]})}),(0,r.jsx)("p",{children:"Max 200MB each. Files must be in CSV format."})]})]}),(0,r.jsx)("input",{ref:i,className:w().inputFile,type:"file",id:"upload-table",accept:".csv, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel",onChange:e=>o(e.target.files)})]})},W=e=>{let t,n,a,{file:i,progress:s,onRemoveFile:o,dataUploadProcessing:l,hasError:d}=e,{name:u,size:c}=i,{percentage:_,secondsRemaining:h,completed:p}=null!=s?s:{completed:!1},m=!p;if(m&&void 0!==h){let e=I()(j()(new Date,{seconds:h}),{unit:h<60?"second":void 0});t=" • ".concat(e," left")}return m&&void 0!==_&&(n=(0,r.jsx)("p",{className:w().percentage,children:_.toLocaleString("en",{style:"percent"})}),a=(0,r.jsx)(G,{percentage:_})),(0,r.jsx)("div",{children:(0,r.jsxs)("div",{className:g()(w().tableDataContainer,d&&w().errorContainer),children:[(0,r.jsx)("div",{className:w().tableIconContainer,children:(0,r.jsx)(q.IconFileCSV,{})}),(0,r.jsxs)("div",{className:w().tableDescriptionContainer,children:[(0,r.jsx)("section",{children:(0,r.jsxs)("div",{className:w().descriptionItem,children:[(0,r.jsx)("h3",{children:u}),!l&&(0,r.jsx)(P.h,{theme:"tertiary",size:"S",type:"button",onClick:()=>{o()},children:(0,r.jsx)(E.IconCross,{})})]})}),(0,r.jsxs)("section",{children:[(0,r.jsxs)("div",{className:w().descriptionItem,children:[(0,r.jsxs)("p",{children:[c>1048576?"".concat(V.format(c/1048576),"MB"):"".concat(V.format(c/1024),"KB"),t]}),n]}),a]})]})]})})},J=e=>{let{dataUploadProcessing:t,onFileUploaded:n,onFileRemoved:a}=e,i=(0,h.kP)(),o=(0,p._0)(),{isStorageLimitReached:l,isLoading:d}=(0,$.N)(o),[u,c]=(0,s.useState)(),[_,m]=(0,s.useState)(),[v,f]=(0,s.useState)(),[y,g]=(0,s.useState)();(0,s.useEffect)(()=>{l&&void 0===y&&g("You are above your storage limit. Upgrade plan to increase your storage limit and re-enable data upload.")},[l,y]);let b=(0,s.useCallback)(()=>{null==_||_.abort(),c(void 0),f(void 0),g(void 0),null==a||a()},[a]),j=(0,s.useCallback)(async e=>{i&&o&&"text/csv"===e.type&&(f(void 0),g(void 0),c(e),await R(i,o,e,m).then(()=>null==n?void 0:n(e)).catch(e=>{if(b(),e instanceof Q)f("Data Upload Aborted");else if(e instanceof x.cA){var t,n;(null===(n=e.graphQLErrors[0])||void 0===n?void 0:null===(t=n.extensions)||void 0===t?void 0:t.key)==="data_upload_quota_exceeded"&&(g("Upgrade your plan to upload larger datasets"),f("This dataset exceeds the available quota in your plan"))}else throw e}))},[n]);return(0,r.jsxs)("div",{children:[void 0!==u?(0,r.jsx)(W,{file:u,progress:_,onRemoveFile:b,hasError:!!v,dataUploadProcessing:t}):(0,r.jsx)(K,{onFileChosen:j,hasError:!!v,disabled:d||l}),void 0!==v&&(0,r.jsxs)("div",{className:w().error,role:"alert",children:[(0,r.jsx)(D.Z,{}),v]}),void 0!==y&&(0,r.jsx)("div",{className:w().upgradeNotification,children:(0,r.jsx)(Z.P,{level:"brand-orange",title:y,actions:(0,r.jsx)(H.A,{href:"/pricing",size:"M",theme:"secondary",children:"Upgrade plan"}),dismissable:!1})})]})};var Y=n(10398),X=n(50642),ee=n(7036),et=n(75805),en=n(54179),er=n(68357),ea=n(56254),ei=n(18035);let es=e=>{let{onDismiss:t}=e,[n,a]=(0,s.useState)(),[i,o]=(0,s.useState)(),[u,v]=(0,s.useState)(""),[y,x]=(0,s.useState)(),[b,j]=(0,s.useState)(""),[C,I]=(0,s.useState)(!1),[k,w]=(0,s.useState)(!1),[S,q]=(0,s.useState)(!1),P=(0,h.kP)(),D=(0,p._0)(),E=(0,ea.o)({serviceTierName:null==D?void 0:D.serviceTier.name,isCustomPlan:null==D?void 0:D.serviceTier.hasCustomPlan}),N=(0,s.useCallback)(e=>{a(e.name),o(e.size),v(e.name.replace(/\s+/g,"_").replace(/.csv$/,""))},[]),A=(0,s.useCallback)(e=>{let t=e.target.value;v(t),/^([a-z]+[a-z0-9_]*[a-z0-9])$/.test(t)?x(void 0):x("Table name must only contain lowercase letters, numbers, and underscores. It must not start with a number or underscore or end with an underscore.")},[]),z=(0,s.useCallback)(()=>{a(void 0),o(void 0),w(!1),v(""),x(void 0),j("")},[]),T=async()=>{if(P&&D){I(!0);try{var e;let a=await fetch((e="https://data-upload-deprecated.dune.com/public/data-upload-sync",void 0!==e)?e:"",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(P.token)},body:JSON.stringify({context_owner:f()(D,["id","type"]),file_name:n,file_size:i,is_private:k,table_name:u,table_description:b})});if(!a.ok){if(a.status<500){let{message:e}=await a.json();throw Error(e)}throw Error("Please try your data upload again")}let s=await a.json();if("SUCCEEDED"!==s.status)throw Error("Please try your data upload again");(0,m.M)();let o=(0,ei.Y)(D)+"/data";(0,d.Bh)({level:"success",title:"Data Upload Succeeded",description:(0,r.jsx)(er.L,{href:o,size:"M",theme:"tertiary",children:"View your datasets"})}),I(!1),t()}catch(t){let e=t instanceof Error?t.message:String(t);(0,d.Bh)({level:"error",title:"Data Upload Failed",description:e}),I(!1)}}},U=void 0!==n,M=U&&void 0===y&&S;return(0,r.jsxs)(X.l,{className:l().form,size:"M",children:[(0,r.jsx)(J,{onFileUploaded:N,onFileRemoved:z,dataUploadProcessing:C}),(0,r.jsx)(Y.U,{size:"M",style:"contained",label:"Table Name",value:u,placeholder:"Enter table name...",onChange:A,error:y,disabled:!U}),(0,r.jsx)(Y.U,{size:"M",style:"contained",label:"Table Description",value:b,placeholder:"Enter description...",onChange:e=>j(e.target.value),disabled:!U}),(0,r.jsx)(en.c,{position:"above-align-left",enabled:!E,content:()=>(0,r.jsxs)("div",{className:l().privateDatasetTooltip,children:["Private data uploads are only available to Premium subscriptions."," ",(0,r.jsx)(c(),{className:l().upgradeLink,href:"/pricing",children:"Upgrade plan"}),"."]}),children:(0,r.jsx)("div",{className:g()(l().privateToggle),children:(0,r.jsx)(ee.Z,{label:"Make table private",enabled:k,setEnabled:()=>w(!k),loading:!1,disabled:!U||!E})})}),(0,r.jsx)("div",{className:l().privateToggle,children:(0,r.jsx)(ee.Z,{label:"I certify this data complies with Dune's T&C (no illegal content, not obtained via hack, etc.)",enabled:S,setEnabled:()=>q(!S)})}),(0,r.jsxs)("div",{className:l().buttonGroup,children:[(0,r.jsx)(_.z,{type:"submit",theme:"primary",size:"M",loading:!1,disabled:!M||C,onClick:T,children:"Save"}),(0,r.jsx)(_.z,{type:"button",theme:"tertiary",size:"M",onClick:t,disabled:C,children:"Cancel"}),C&&(0,r.jsxs)("div",{className:l().dataUploadProcessing,children:[(0,r.jsx)(et.IconLoading,{}),(0,r.jsx)("p",{children:"Processing... (this may take a few minutes)"})]})]})]})};var eo=n(45172);let el=e=>{let{onDismiss:t}=e;return(0,s.useEffect)(()=>(eo.Z.trackEvent("Data Upload Modal Opened"),()=>{eo.Z.trackEvent("Data Upload Modal Closed")}),[]),(0,r.jsxs)("div",{className:i().body,children:[(0,r.jsxs)("div",{className:i().header,children:[(0,r.jsx)("div",{className:i().titleRow,children:(0,r.jsx)("h2",{children:"Add new data table"})}),(0,r.jsx)("p",{className:i().description,children:"Just a few steps to add new data to Dune."})]}),(0,r.jsx)(es,{onDismiss:t})]})}},56254:function(e,t,n){"use strict";n.d(t,{o:function(){return r}});let r=e=>{let{serviceTierName:t,isCustomPlan:n}=e;return!!(void 0!==t&&(["premium","premium_annually"].includes(t)||n))}},80403:function(e,t,n){"use strict";n.d(t,{h:function(){return nw}});var r,a,i=n(85893),s=n(10463),o=n.n(s),l=n(94106),d=n.n(l),u=n(94184),c=n.n(u),_=n(41664),h=n.n(_),p=n(11163),m=n(67294),v=n(66465),f=n(30297);let y=[];function g(e,t){(0,m.useEffect)(()=>{if(!e)return;let n={element:e,keyCombo:t};return y.push(n),1===y.length&&window.addEventListener("keydown",x),()=>{0===(y=y.filter(e=>e!==n)).length&&window.removeEventListener("keydown",x)}},[e,t])}let x=e=>{e.defaultPrevented||e.target instanceof Node&&b(e.target)||y.forEach(t=>{let{element:n}=t,{keyCombo:r}=t;if(r.includes("Control+")){if(!e.ctrlKey)return;r=r.replace("Control+","")}if(r.includes("Command+")){if(!e.metaKey)return;r=r.replace("Command+","")}e.key===r&&(b(n)?n.focus():n.click(),e.preventDefault())})};function b(e){if(!(e instanceof HTMLElement))return!1;let t=e.nodeName.toLowerCase(),n=(e.getAttribute("type")||"").toLowerCase();return"select"===t||"textarea"===t||"input"===t&&"submit"!==n&&"reset"!==n&&"checkbox"!==n&&"radio"!==n||e.isContentEditable}var j=n(49728),C=n(61575),I=n(78570),k=n(45172),w=n(42383),S=n.n(w),q=n(27863),P=n(26550),D=n(91745),E=n(60925),N=n(82729),A=n(39137),z=n(84937),T=n(57831);function U(){let e=(0,N._)(["\n  query GlobalSearchDiscover(\n    $searchString: String!\n  ) {\n    searchRelevantContent(\n      filters: { searchQuery: { query: $searchString } }\n      pagination: { first: 3, after: null }\n    ) {\n      edges {\n        node {\n          ...FSearchDashboard\n          ...FSearchQuery\n        }\n      }\n    }\n\n    searchRelevantTopics(\n      filters: { searchQuery: { query: $searchString } }\n      pagination: { first: 3, after: null }\n    ) {\n      edges {\n        node {\n          ...FSearchTag\n        }\n      }\n    }\n\n    searchRelevantCreators(\n      filters: { searchQuery: { query: $searchString } }\n      pagination: { first: 3, after: null }\n    ) {\n      edges {\n        node {\n          ...FSearchTeam\n          ...FSearchUser\n        }\n      }\n    }\n  }\n\n  fragment FSearchDashboard on Dashboard {\n    __typename\n    id\n    name\n    slug\n\n    team {\n      ...FSearchTeam\n    }\n\n    user {\n      ...FSearchUser\n    }\n  }\n\n  fragment FSearchQuery on QueryModel {\n    __typename\n    id\n    name\n\n    team {\n      ...FSearchTeam\n    }\n\n    user {\n      ...FSearchUser\n    }\n  }\n\n  fragment FSearchTeam on Team {\n    __typename\n    id\n    name\n    handle\n    profileImageUrl\n  }\n\n  fragment FSearchUser on User {\n    __typename\n    id\n    name\n    handle: name\n    profileImageUrl\n  }\n\n  fragment FSearchTag on Tag {\n    name\n  }\n"]);return U=function(){return e},e}(0,A.Z)(U());var M=n(24357),F=n(46166),B=n(73916),O=n.n(B),Q=n(10398),L=n(45439),R=n(32613),Z=n(10933),H=n(41118);function $(e){let{onCloseMobileSearch:t,isMobile:n=!1}=e,r=(0,p.useRouter)(),[a,s]=(0,m.useState)(null),o=j.eJ(),[l,d]=(0,m.useState)("");(0,m.useEffect)(()=>{(0,C.HH)(o.value)&&d(o.value)},[o.value]);let u=function(e){let t=function(e){let t=(0,T.kP)();return(0,z.s_$)({context:{session:t},skip:e.length<3,variables:{searchString:e}})}((0,M.c)({delayMs:300},e));return(0,m.useMemo)(()=>{var n;let r=t.data&&{content:(n=t.data).searchRelevantContent.edges.map(e=>e.node),topics:n.searchRelevantTopics.edges.map(e=>e.node),creators:n.searchRelevantCreators.edges.map(e=>e.node)},a={key:"advancedSearch",href:"/docs/app/search#advanced-search",target:"_blank",label:"Advanced search",category:"docs",isCategoryHeader:!0};if(e.length<2)return[a];let s=[];return s.push({key:"search-content",href:"/discover/content/relevant?q=".concat(e),label:"Content",rightElement:(0,i.jsx)(q.Z,{size:16}),isCategoryHeader:!0,category:"content"}),null==r||r.content.forEach(e=>{let t=function(e){var t,n;let{team:r,user:a}=e;if(a)return{type:"user",id:a.id,name:a.name,handle:a.handle,profileImageUrl:null!==(t=a.profileImageUrl)&&void 0!==t?t:void 0};if(r)return{type:"team",id:r.id,name:r.name,handle:r.handle,profileImageUrl:null!==(n=r.profileImageUrl)&&void 0!==n?n:void 0};throw Error("No owner on item __typename=".concat(e.__typename," id=").concat(e.id))}(e);switch(e.__typename){case"Dashboard":s.push({key:"".concat(e.__typename,"-").concat(e.id),href:(0,F.Yh)(t.handle,e.slug),leftElement:(0,i.jsx)(P.IconTiles,{className:S().iconLeft}),label:e.name,category:"content",isCategoryHeader:!1,owner:t});return;case"QueryModel":s.push({key:"".concat(e.__typename,"-").concat(e.id),href:"/queries/".concat(e.id),leftElement:(0,i.jsx)(D.IconTerminalWindow,{className:S().iconLeft}),label:e.name,category:"content",isCategoryHeader:!1,owner:t});return}}),s.push({key:"search-topics",href:"/discover/topics/relevant?q=".concat(e),label:"Topics",rightElement:(0,i.jsx)(q.Z,{size:16}),isCategoryHeader:!0,category:"topics"}),null==r||r.topics.forEach(e=>{s.push({key:e.name,href:"/discover/content/relevant?q=".concat(encodeURIComponent(e.name.includes(" ")?'tags:"'.concat(e.name,'"'):"tags:".concat(e.name))),leftElement:(0,i.jsx)(E.IconHash,{className:S().iconLeft}),label:e.name,category:"topics",isCategoryHeader:!1})}),s.push({key:"search-creators",href:"/discover/creators/relevant?q=".concat(e),label:"Creators",rightElement:(0,i.jsx)(q.Z,{size:16}),isCategoryHeader:!0,category:"creators"}),null==r||r.creators.forEach(e=>{s.push({key:"creator-".concat(e.id),href:"/".concat(e.handle),leftElement:(0,i.jsx)(f.q,{ownerId:e.id,handle:e.handle,src:e.profileImageUrl,type:function(e){switch(e){case"User":return"user";case"Team":return"team"}}(e.__typename),size:18}),label:e.name,category:"creators",isCategoryHeader:!1})}),s.push(a),s},[e,t])}(l),[_,y]=(0,m.useState)(0);(0,m.useEffect)(()=>{y(0)},[u]);let{captureEvent:x}=(0,v.z$)();g(a,"Control+p"),g(a,"Command+p");let b=()=>{d(""),o.setState("")};return(0,i.jsxs)("form",{role:"search","aria-label":"Site",onSubmit:e=>e.preventDefault(),className:c()(O().wrapper,n&&O().mobile),onKeyDown:e=>{switch(e.key){case"Escape":null==a||a.blur(),e.preventDefault();break;case"Enter":{let e=u[_];if(!e)return;if("_blank"===e.target){var t,n;null===(n=window)||void 0===n||null===(t=n.open(e.href,"_blank"))||void 0===t||t.focus()}else r.push(e.href);null==a||a.blur();break}case"ArrowUp":y(e=>Math.max(0,e-1));break;case"ArrowDown":y(e=>Math.min(u.length-1,e+1))}},onFocus:()=>{k.Z.trackEvent("Global Search Opened"),x("Search: Open")},onBlur:()=>{k.Z.trackEvent("Global Search Closed"),x("Search: Close")},children:[(0,i.jsx)("div",{children:(0,i.jsx)(Q.U,{id:"global-search",type:"search",size:"M",style:"outlined",placeholder:"Search…",onChange:e=>d(e.target.value),value:l,autoComplete:"off",prefix:(0,i.jsx)(L.IconMagnifyingGlass,{}),ref:e=>s(e),maxLength:300,showMaxLength:!1,suffix:n?(0,i.jsx)(Z.h,{size:"XS",theme:"ghost",onClick:()=>{void 0!==t&&t(),d("")},children:(0,i.jsx)(H.IconCross,{})}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(R.z9,{className:O().shortcutHint,shortcut:{pc:"ctrl+p",mac:"cmd+p"}}),0!==l.length&&(0,i.jsx)(Z.h,{size:"XS",theme:"ghost",onClick:e=>{e.preventDefault(),e.stopPropagation(),b()},onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),e.stopPropagation(),b())},type:"button",children:(0,i.jsx)(H.IconCross,{})})]})})}),(0,i.jsxs)("ul",{className:c()(O().results,S().menu),role:"listbox",children:[l.length<2&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("li",{className:S().categoryHeader,children:(0,i.jsx)("a",{children:(0,i.jsx)("div",{className:S().itemLabel,children:"Type at least two characters to search…"})})}),(0,i.jsx)("hr",{className:c()(S().categoryDivider,S().visible)})]}),u.map((e,t)=>{let n=t===_;return(0,i.jsxs)(m.Fragment,{children:[e.isCategoryHeader&&t>0&&(0,i.jsx)("hr",{className:c()(S().categoryDivider,"docs"===e.category&&S().visible)}),(0,i.jsx)("li",{onMouseOver:()=>y(t),role:"option","aria-selected":n,className:c()(n&&S().active,e.isCategoryHeader&&S().categoryHeader,e.owner&&S().alignedStart),children:(0,i.jsxs)(h(),{href:e.href,target:e.target,tabIndex:-1,onClick:()=>{var t;e.isCategoryHeader?(k.Z.trackEvent("Global Search Result List Clicked",{search_string:l,is_advanced_search:(0,I.fH)(l)?"true":"false",category:e.category}),x("Search: Go to Discover",{searchString:l,category:e.category},{transport:"sendBeacon"})):(k.Z.trackEvent("Global Search Result Clicked",{search_string:l,is_advanced_search:(0,I.fH)(l)?"true":"false",href:e.href}),x("Search: Go to result",{searchString:l,category:e.category,href:e.href},{transport:"sendBeacon"})),null===(t=document.activeElement)||void 0===t||t.blur()},children:[e.leftElement,(0,i.jsxs)("div",{className:c()(S().itemLabel,"docs"===e.category&&S().orange),children:[(0,i.jsx)("p",{children:e.label}),e.owner&&(0,i.jsxs)("div",{className:S().itemCreatedBy,children:[(0,i.jsx)(f.q,{ownerId:e.owner.id,handle:e.owner.handle,src:e.owner.profileImageUrl,type:e.owner.type,size:16}),(0,i.jsx)("span",{children:e.owner.name})]})]}),e.rightElement]})})]},e.key)})]})]})}function V(e){let{onCloseMobileSearch:t,isMobile:n}=e;return(0,i.jsx)($,{isMobile:n,onCloseMobileSearch:t})}var G=n(99002),K=n(54179),W=n(21647),J=n(68357),Y=n(50153),X=n(12007),ee=n(48171),et=n(30590),en=n(85953),er=n(82209),ea=n(45466),ei=n(50876),es=n(24426);function eo(e){let{session:t,activeContext:n,setIsCreateDashboardDialogOpen:r,setIsAddMembersDialogOpen:a,setIsDataUploadModalOpen:s,close:o}=e,l=(0,ea.hx)(t),d=(0,ei.wI)(n),u=(null==l?void 0:l.length)===0,c=(0,es.N)("custom-endpoints");return(0,i.jsxs)(R.s_,{children:[(0,i.jsxs)(R.$0,{children:[(0,i.jsxs)(R.FB,{href:"/queries",children:[(0,i.jsx)(D.IconTerminalWindow,{}),"New query"]}),(0,i.jsxs)(R.ys,{onClick:()=>{r(!0),o()},children:[(0,i.jsx)(Y.IconGridFour,{}),"New dashboard"]}),(0,i.jsxs)(R.FB,{href:"/ai",onOpen:()=>{k.Z.trackEvent("Dune AI Link Clicked",{location:"Create Header"})},children:[(0,i.jsx)(en.IconSparkle,{}),"Dune AI"]})]}),(0,i.jsxs)(R.$0,{children:[(0,i.jsxs)(R.ys,{onClick:()=>s(!0),children:[(0,i.jsx)(et.IconUploadCloud,{}),"Upload a dataset"]}),(0,i.jsxs)(R.FB,{href:"/contracts/new",children:[(0,i.jsx)(X.IconNote,{}),"Submit a contract"]}),c&&(0,i.jsxs)(R.FB,{href:"/endpoints",children:[(0,i.jsx)(er.IconPlug,{}),"API endpoints"]})]}),(d||u)&&(0,i.jsxs)(R.$0,{children:[d&&(0,i.jsxs)(R.ys,{onClick:()=>{a(!0),o()},children:[(0,i.jsx)(ee.IconPeople,{}),"Invite Members"]}),u&&(0,i.jsxs)(R.FB,{href:"/teams/new",children:[(0,i.jsx)(ee.IconPeople,{}),"Create Team"]})]})]})}var el=n(17946),ed=n(99152),eu=n(86634),ec=n(4564),e_=n(85361);function eh(){let e=(0,T.kP)(),t=(0,e_._0)(),[n,r]=(0,m.useState)(!1),[a,s]=(0,m.useState)(!1),[o,l]=(0,m.useState)(!1),u=(null==t?void 0:t.permissions.canEditContent)===!1;return!e||void 0===t||u?(0,i.jsx)(W.n,{position:"below-align-left",content:()=>u?(0,i.jsxs)(i.Fragment,{children:["You're a Viewer of this team. ",(0,i.jsx)("br",{}),"Ask an admin to promote you to the Editor role,",(0,i.jsx)("br",{}),"or switch to a different workspace."]}):(0,i.jsxs)(i.Fragment,{children:["Sign up or log in to start creating."," ",(0,i.jsx)(J.L,{theme:"secondary",size:"M",href:"/auth/login",children:"Get started"}),"."]}),children:(0,i.jsx)("button",{className:c()(d().headerButton,d().filled),children:"Create"})}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(K.c,{position:"below-align-left",content:n=>{let{close:a}=n;return(0,i.jsx)(eo,{session:e,activeContext:t,setIsCreateDashboardDialogOpen:r,setIsAddMembersDialogOpen:s,setIsDataUploadModalOpen:l,close:a})},children:(0,i.jsx)("button",{className:c()(d().headerButton,d().filled),children:"Create"})}),(0,i.jsx)(el.C,{isOpen:n,close:()=>r(!1),redirect:!0}),"team"===t.type&&(0,i.jsx)(ec.L9,{label:"Invite more people",size:"M",isOpen:a,onDismiss:()=>s(!1),content:(0,i.jsx)(ed._,{onDismiss:()=>s(!1),team:t,session:e,onInvite:()=>{}})}),(0,i.jsx)(ec.L9,{label:"Upload a dataset",size:"M",content:(0,i.jsx)(eu.y,{onDismiss:()=>l(!1)}),isOpen:o,onDismiss:()=>l(!1)})]})}var ep=n(47730),em=n(45186),ev=n(70342),ef=n(16296),ey=n(11132),eg=n.n(ey),ex=n(75805),eb=n(54173),ej=n(12069),eC=n(81139),eI=n(68536),ek=n(98997),ew=n(39612);function eS(){let e=(0,T.Ke)(),t=(0,e_._0)();if(!t||!e.user)return null;let n=t.serviceTier.name;switch(t.type){case"team":return(0,i.jsx)(eP,{teamId:t.id,currentPlanName:n,teamHandle:t.handle,canUpdateSubscription:t.permissions.hasAdminAccess});case"user":return(0,i.jsx)(eq,{currentPlanName:n,canUpdateSubscription:t.permissions.hasAdminAccess})}}function eq(e){let t=(0,eC.C)(),n=function(e){var t;let n=(0,T.kP)(),{data:r}=(0,z.hSe)({skip:!n||!n.user||void 0,context:{session:n},fetchPolicy:"cache-first"});return null==r?void 0:null===(t=r.upcomingInvoice)||void 0===t?void 0:t.targetDate}();return(0,i.jsx)(eD,{usage:null!=t?t:void 0,upcomingInvoice:n,currentPlanName:e.currentPlanName,canUpdateSubscription:e.canUpdateSubscription,settingsLink:"/settings/subscription"})}function eP(e){var t;let{teamId:n,teamHandle:r,currentPlanName:a,canUpdateSubscription:s}=e,o=null===(t=(0,ej.$)(n))||void 0===t?void 0:t.usage,l=function(e,t){var n;let r=(0,T.kP)(),{data:a}=(0,z.zD7)({skip:!r||!r.user||void 0,variables:{teamId:e},context:{session:r},fetchPolicy:"cache-first"});return null==a?void 0:null===(n=a.teamUpcomingInvoice)||void 0===n?void 0:n.targetDate}(n);return(0,i.jsx)(eD,{usage:o,canUpdateSubscription:s,upcomingInvoice:l,currentPlanName:a,settingsLink:"/settings/teams/manage/".concat(r,"/subscription")})}function eD(e){let{usage:t,upcomingInvoice:n,currentPlanName:r,canUpdateSubscription:a,settingsLink:s}=e;return(0,i.jsx)(K.c,{position:"below-align-left",content:()=>{var e,o;if(!t)return(0,i.jsx)("div",{className:eg().usageTracker,children:(0,i.jsx)(ex.IconLoading,{})});let l=(0,ek.A)(t.usedCredits,t.maxCredits);return(0,i.jsxs)("div",{className:eg().usageTracker,children:[(0,i.jsx)("h1",{children:(0,eI.c)(r||"")}),(0,i.jsx)("hr",{}),(0,i.jsxs)("div",{className:eg().usage,children:[(0,i.jsx)(ek.l,{title:"Credits",currentUsage:null!==(e=null==t?void 0:t.usedCredits)&&void 0!==e?e:0,maxUsage:null!==(o=null==t?void 0:t.maxCredits)&&void 0!==o?o:0,usagePerMonth:!0,tooltipLabel:(0,i.jsx)(i.Fragment,{children:"Amount of used Dune credits, renews monthly."}),className:eg().usageItem}),a&&(0,i.jsx)(eb.A,{theme:l>=100?"secondary":"tertiary",size:"S",href:s,children:l>=100?"Add extra credits":"Upgrade plan"}),n&&(0,i.jsxs)("p",{children:["Your credits renew on ",(0,ew.uQ)(n),"."]}),(0,i.jsxs)("p",{children:["See credit usage details in"," ",(0,i.jsx)(h(),{href:s,style:{textDecoration:"underline"},children:"Settings"}),"."]})]})]})},children:(0,i.jsx)(Z.h,{theme:"ghost",size:"M",className:eg().iconButton,children:(0,i.jsx)(ef.IconGauge,{})})})}var eE=n(56223),eN=n(50292);let eA=()=>{var e,t,n;let r=(0,T.qy)(),a="create_team_prompt_banner",[i,s]=(0,m.useState)("dismissed"===(0,eN.v4)(a)),o=(0,z.YT)({skip:(null==r?void 0:null===(e=r.user)||void 0===e?void 0:e.id)===void 0,context:{session:r},variables:{user_id:null!==(n=null==r?void 0:null===(t=r.user)||void 0===t?void 0:t.id)&&void 0!==n?n:-1}}),[l,d]=(0,m.useState)(new Set);return((0,m.useEffect)(()=>{(0,eE.NT)("/assets/free_email_provider_domains.json").then(e=>{Array.isArray(e)&&d(new Set(e))})},[]),o.loading||void 0!==o.error)?["loading",null]:void 0===r||i?["dont-show",null]:(()=>{let e=null==r?void 0:r.email.split("@")[1];return!l.has(e)})()&&null!==o.data&&void 0!==o.data&&0===o.data.user.memberships.length&&Date.now()-new Date(r.user.createdAt).valueOf()>6048e5?["show",{userId:r.user.id,onDismiss:()=>{(0,eN.EB)(a,"dismissed"),s(!0)}}]:["dont-show",null]};var ez=n(449),eT=n(13658);let eU=e=>{let{userId:t,onDismiss:n}=e,r=(0,v.z$)();return(0,m.useEffect)(()=>{r.captureEvent("create_team_prompt_banner_shown",{userId:t}),k.Z.trackEvent("Create Team Prompt Banner Viewed")},[]),(0,i.jsxs)(ez.j,{dismissable:!0,onDismiss:()=>{r.captureEvent("create_team_prompt_banner_dismissed",{userId:t}),k.Z.trackEvent("Create Team Prompt Banner Dismissed"),n()},children:[(0,i.jsx)(eT.IconPeopleThree,{}),"Using Dune for work? Protect private content and invite collaborators when you create a team account.",(0,i.jsx)(ez.x,{children:(0,i.jsx)(eb.A,{size:"S",theme:"primary",href:"/teams/new",onOpen:()=>{r.captureEvent("create_team_prompt_banner_clicked",{userId:t}),k.Z.trackEvent("Create Team Prompt Banner - Create Team Clicked")},children:"Create team"})})]})},eM=e=>{let t=(0,v.z$)();return(0,m.useEffect)(()=>{t.captureEvent("joined_for_work_but_no_team_banner_shown",{userId:e.userId})},[e.userId]),(0,i.jsxs)(ez.j,{dismissable:!0,onDismiss:()=>{t.captureEvent("joined_for_work_but_no_team_banner_dismissed",{userId:e.userId}),e.onDismiss()},children:[(0,i.jsx)(eT.IconPeopleThree,{}),"Using Dune for work? Protect private content and invite collaborators when you create a team account.",(0,i.jsx)(ez.x,{children:(0,i.jsx)(eb.A,{size:"S",theme:"primary",href:"/teams/new",onOpen:()=>{t.captureEvent("joined_for_work_but_no_team_banner_create_team_clicked",{userId:e.userId})},children:"Create team"})})]})};var eF=n(77628),eB=n.n(eF),eO=n(61451),eQ=n(57903);function eL(){let e=(0,N._)(["\n  mutation CreateJoinRequest($teamId: Int!) {\n    requestToJoinTeam(teamId: $teamId) {\n      id\n      userId\n      teamId\n      status\n      role\n    }\n  }\n"]);return eL=function(){return e},e}function eR(e){let{onDismiss:t,teamToJoin:n}=e,r=function(){let e=(0,T.kP)(),[t,{loading:n}]=(0,z.QVx)({context:{session:e}});return{mutation:t,loading:n}}(),{refetch:a}=(0,ea.Qj)({fetchPolicy:"cache-only"});(0,m.useEffect)(()=>{k.Z.trackEvent("Suggest Team Banner Viewed",{},{linkWithTeamId:n.id})},[]);let s=async e=>{r.mutation({variables:{teamId:e}}).then(()=>{t(),a(),(0,eQ.Bh)({level:"success",title:(0,i.jsxs)(i.Fragment,{children:["Request sent to join"," ",(0,i.jsxs)(J.L,{theme:"tertiary",size:"M",href:"/".concat(n.handle),children:["@",n.name]}),"."]})})}).catch(e=>{(0,eQ.Ln)({title:"Failed to submit join request",error:e,errorKeys:["already_member","not_authorised"]})})};return(0,i.jsxs)(ez.j,{dismissable:!0,onDismiss:()=>{k.Z.trackEvent("Suggest Team Banner Dismissed",{},{linkWithTeamId:n.id}),t()},children:[(0,i.jsx)(eT.IconPeopleThree,{}),(0,i.jsxs)("div",{className:eB().copy,children:["Are you part of",(0,i.jsxs)(h(),{href:"/".concat(n.handle),target:"_blank",children:["@",n.handle]}),"?"]}),(0,i.jsx)(ez.x,{children:(0,i.jsx)(eO.z,{size:"S",theme:"primary",disabled:r.loading,onClick:()=>{k.Z.trackEvent("Suggest Team Banner Join Team Clicked",{team_id:n.id},{linkWithTeamId:n.id}),s(n.id)},children:"Ask to join"})})]})}(0,A.Z)(eL());let eZ=()=>{var e,t,n,r;let a=(0,T.qy)(),i="joined_for_work_but_no_team_banner",[s,o]=(0,m.useState)("dismissed"===(0,eN.v4)(i)),l=(0,z.YT)({skip:(null==a?void 0:null===(e=a.user)||void 0===e?void 0:e.id)===void 0||s,context:{session:a},variables:{user_id:null!==(n=null==a?void 0:null===(t=a.user)||void 0===t?void 0:t.id)&&void 0!==n?n:-1}});return l.loading||void 0!==l.error?["loading",null]:void 0===a||s?["dont-show",null]:(null===(r=a.user.privateFields.onboardingQuestions)||void 0===r?void 0:r.bringsToDune)==="job"&&null!==l.data&&void 0!==l.data&&0===l.data.user.memberships.length&&Date.now()-new Date(a.user.createdAt).valueOf()>6048e5?["show",{userId:a.user.id,onDismiss:()=>{(0,eN.EB)(i,"dismissed"),o(!0)}}]:["dont-show",null]};var eH=n(51577);function e$(){let e=(0,N._)(["\n  query MyTeamSuggestions {\n    teamSuggestions {\n      id\n      handle\n      name\n    }\n  }\n"]);return e$=function(){return e},e}(0,A.Z)(e$());let eV="suggestTeamNotificationDismissed";var eG=n(31457),eK=n(31544),eW=n.n(eK),eJ=n(33549),eY=n(61857);function eX(e){let{close:t,isOpen:n,activeContext:r}=e;return(0,i.jsx)(ec.L9,{isOpen:n,onDismiss:void 0,size:"L",label:"Unpaid invoice",content:(0,i.jsx)(e0,{close:t,activeContext:r})})}function e0(e){let{close:t,activeContext:n}=e;function r(e){k.Z.trackEvent("Unpaid Invoice Modal Button Clicked",{button_text:e})}return(0,m.useEffect)(()=>{k.Z.trackEvent("Unpaid Invoice Modal Opened")},[]),(0,i.jsxs)("div",{className:eW().body,children:[(0,i.jsxs)("div",{className:eW().header,children:[(0,i.jsxs)("div",{className:eW().titleRow,children:[(0,i.jsx)("h2",{children:"Your last payment failed"}),(0,i.jsx)(eY.i,{size:"M",color:"text-secondary",flip:!0,owner:n})]}),(0,i.jsxs)("p",{className:eW().description,children:["We have failed to renew your subscription, and"," ",(0,i.jsx)("strong",{children:"will downgrade your team to Free"})," if we repeatedly fail to collect payment. Please make sure you have enough funds on your card, or add a different card."]})]}),(0,i.jsxs)("div",{className:eW().buttons,children:[(0,i.jsx)(eO.z,{size:"M",theme:"danger",onClick:()=>{t(),r("Remind me later")},children:"Remind me later"}),(0,i.jsx)("hr",{className:eW().gapFillMiddle}),(0,i.jsx)(eb.A,{size:"M",theme:"tertiary",href:"".concat(function(e){switch(e.type){case"user":return"/settings";case"team":return"/settings/teams/manage/".concat(e.handle)}}(n),"/subscription"),onOpen:()=>{t(),r("Subscription")},children:"Subscription"}),(0,i.jsx)(eJ.E,{checkoutOwner:n,renderButton:e=>{let{onClick:t}=e;return(0,i.jsx)(eO.z,{size:"M",theme:"primary",onClick:()=>{t(),r("Update card")},children:"Update card"})}})]})]})}function e1(e){let{activeContext:t}=e,[n,r]=(0,m.useState)(!function(){let e=(0,eN.v4)(e2);if(null===e)return!1;let t=new Date(e);return t.valueOf()>new Date().valueOf()}());return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(ez.j,{dismissable:!1,color:"error",children:[(0,i.jsx)(eG.IconCreditCard,{}),(0,i.jsx)("div",{className:eB().copy,children:"Payment failed"}),(0,i.jsx)(ez.x,{children:(0,i.jsx)(eO.z,{size:"S",theme:"secondary",onClick:()=>{k.Z.trackEvent("Unpaid Invoice Banner Button Clicked"),r(!0)},children:"See more"})})]}),(0,i.jsx)(eX,{isOpen:n,close:function(){r(!1),function(){var e;let t=((e=new Date).setDate(e.getDate()+1),e);(0,eN.EB)(e2,t.toISOString())}()},activeContext:t})]})}let e2="Unpaid_Ivoice_Remind_Me_After";function e3(){let e=(0,N._)(["\n  query UnpaidInvoices($filters: UnpaidInvoicesFiltersInput!) {\n    unpaidInvoices(filters: $filters) {\n      edges {\n        node {\n          id\n          orbInvoiceId\n        }\n      }\n    }\n  }\n"]);return e3=function(){return e},e}(0,A.Z)(e3());let e6=()=>{let e=function(){var e;let t=(0,T.kP)(),n=(0,e_._0)(),r=(0,z._dZ)({skip:!t||!n,context:{session:t},variables:{filters:(null==n?void 0:n.type)==="team"?{teamId:{eq:n.id}}:{}}});if(!t||!n||r.loading)return{status:"loading"};let a=r.data?null==(e=r.data)?void 0:e.unpaidInvoices.edges.map(e=>e.node):[],s=a.length>0;return s?{status:"show",banner:(0,i.jsx)(e1,{activeContext:n})}:{status:"dont-show"}}(),[t,n]=eZ(),[r,a]=eA(),[s,o]=function(){let e=(0,T.qy)(),t=(0,eN.v4)(eV),n=function(e){let{data:t}=(0,z.GlQ)({skip:!e,context:{session:e},onError(e){eH.k.error("Failed to fetch team suggestions",e)}}),n=null==t?void 0:t.teamSuggestions[0];return n}(e),r=function(e){let t=(0,ea.Qj)({fetchPolicy:"cache-first"});return void 0!==t.data&&void 0!==e&&t.data.user.memberships.filter(t=>{var n;return(null===(n=t.team)||void 0===n?void 0:n.id)===e}).length>0}(null==n?void 0:n.id),a=function(e){if(null===e)return!1;let t=new Date(e),n=new Date,r=new Date;return r.setMonth(n.getMonth()-3),t>=r}(t),[i,s]=(0,m.useState)(a),o=void 0!==e&&!r,l=o&&!i&&void 0!==n;return l?["show",{teamToJoin:n,onDismiss:()=>{s(!0),(0,eN.EB)(eV,new Date().toISOString()),s(!0)}}]:["dont-show",null]}();switch(e.status){case"show":return e.banner;case"loading":return null}return"show"===t&&null!==n?(0,i.jsx)(eM,{...n}):"dont-show"===t&&"show"===r&&null!==a?(0,i.jsx)(eU,{...a}):"dont-show"===t&&"dont-show"===r&&"show"===s&&null!==o?(0,i.jsx)(eR,{...o}):null};var e4=n(28950),e9=n(30205),e8=n(20824),e7=n(78282),e5=n(88891),te=n(2297),tt=n.n(te);function tn(){let e=window.innerWidth;return(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{style:{position:"absolute",top:"50%",left:"".concat(.85*e,"px")},children:(0,i.jsx)(e5.Z,{particleCount:100,zIndex:2003,force:1,duration:5e3,colors:["#f4603e","#ffeceb","#8e8ece","#1e1870","#d0f1e1","#41c588"]})}),(0,i.jsx)("div",{className:tt().duneLogo}),(0,i.jsx)("div",{className:tt().duneLogo})]})}var tr=n(98920),ta=n.n(tr),ti=n(35707),ts=n.n(ti);let to={version:"2.0.0",questions:[{question_title:"What brings you to Dune?",question_key:"brings_to_dune",question_text:"Help us tailor your first steps here.",response:{type:"string",metadata:{inputType:"radio",values:[{key:"personal_use",value:"Personal learning or projects"},{key:"job",value:"Team or business use"}]}}}]},tl={questions:[{question_title:"What's your goal?",question_key:"achieve_with_dune",question_text:"Share your focus to help us personalize your path.",response:{type:"string",metadata:{inputType:"radio",values:[{key:"explore_data",value:"Exploring blockchain data for research and analysis"},{key:"investigate_trends",value:"Investigating trends and opportunities in crypto markets"},{key:"advance_career_skills",value:"Advancing career skills or exploring freelance opportunities"},{key:"other",value:"Other"}]}}},{question_title:"What’s your primary role?",question_key:"role_with_dune",question_text:"Select the role that aligns with your use of Dune.",response:{type:"string",metadata:{inputType:"radio",values:[{key:"student",value:"Student"},{key:"researcher",value:"Researcher"},{key:"hobbyist",value:"Hobbyist/Tech enthusiast"},{key:"investor",value:"Investor"},{key:"educator",value:"Educator"},{key:"freelancer",value:"Freelancer"},{key:"content_creator",value:"Content creator"},{key:"activist",value:"Activist"},{key:"other",value:"Other"}]}}}]},td={questions:[{question_title:"What size is your team?",question_key:"organization_size",question_text:"This helps us ensure the right fit for your needs.",placeholder:"Select your organization size",response:{type:"string",metadata:{inputType:"dropdown",values:[{key:"just_me",value:"Just me"},{key:"two_to_ten",value:"2-10"},{key:"eleven_to_fifty",value:"11-50"},{key:"fifty_to_two_hundred_fifty",value:"51-250"},{key:"two_hundred_fifty_to_one_thousand",value:"251-100"},{key:"one_thousand_plus",value:"1,000+"}]}}},{question_title:"What size is your team?",question_key:"data_team_size",question_text:"This helps us ensure the right fit for your needs.",placeholder:"Select your data team size",response:{type:"string",metadata:{inputType:"dropdown",values:[{key:"no_data_team",value:"No current data team"},{key:"1_to_five",value:"1-5"},{key:"six_to_fifteen",value:"6-15"},{key:"sixteen_to_thirty",value:"16-30"},{key:"thirty_plus",value:"30+"}]}}},{question_title:"What's your goal?",question_key:"achieve_with_dune",question_text:"This helps us tailor your onboarding resources.",response:{type:"string",metadata:{inputType:"radio",values:[{key:"explore_data",value:"Leverage existing dashboards for insights"},{key:"create_dashboards",value:"Create and customise dashboards"},{key:"import_data",value:"Import blockchain data for analysis within Dune"},{key:"build_apps",value:"Build apps with on-chain data"},{key:"integrate_dune",value:"Integrate Dune's data with your external tools"},{key:"other",value:"Unsure / Exploring"}]}}},{question_title:"What’s your primary role?",question_key:"role_with_dune",question_text:"This helps us tailor your onboarding resources.",response:{type:"string",metadata:{inputType:"radio",values:[{key:"software_developer",value:"Software Developer/Engineer"},{key:"analyst",value:"Data Analyst"},{key:"product",value:"Product/Project Manager"},{key:"marketing",value:"Marketing/Sales"},{key:"executive",value:"Executive/Founder"},{key:"investor",value:"Investor/Stakeholder"},{key:"other",value:"Other"}]}}}]};var tu=n(56598),tc=n(51818),t_=n(99134),th=n(33995),tp=n.n(th);function tm(e){let{percentage:t}=e;return(0,i.jsx)("div",{className:tp().progressPie,style:{"--progress":"".concat(t,"%")},children:(0,i.jsx)("div",{})})}function tv(){let e=(0,N._)(["\n  fragment OnboardingQuestions on OnboardingQuestions {\n    userId\n    version\n    bringsToDune\n    achieveWithDune\n    roleWithDune\n    organizationSize\n    dataTeamSize\n    createdAt\n  }\n\n  mutation UpsertOnboardingQuestions($input: UpsertOnboardingQuestionsInput!) {\n    upsertOnboardingQuestions(input: $input) {\n      ...OnboardingQuestions\n    }\n  }\n"]);return tv=function(){return e},e}let tf=e=>{let t=(0,T.kP)(),[n,{loading:r,error:a}]=(0,z.upm)({context:{session:t},onCompleted:e});return{upsertOnboardingQuestions:n,loading:r,error:a}};function ty(e){let{onQsSubmitted:t}=e,[n,r]=(0,m.useState)({}),[s,o]=(0,m.useState)(a.Shared),[l,d]=(0,m.useState)(0);(0,m.useEffect)(()=>{k.Z.trackEvent("Onboarding Questions Viewed",{status:"started"})},[]);let u=to.questions,c=s===a.Personal?tl.questions:s===a.Business?td.questions:u,{upsertOnboardingQuestions:_,error:h,loading:p}=tf(t),v=(0,C.C_)(h),f=c.length,y=s===a.Shared?0:(l+u.length)/(f+u.length)*100;return(0,i.jsx)("div",{className:ts().menu,children:(0,i.jsxs)("div",{className:ts().content,children:[(0,i.jsx)("div",{className:ts().questions,children:(0,i.jsx)(tg,{q:c[l],selected:n,onSelectResponse:(e,t)=>{r(n=>({...n,[e]:t}))},percentage:y})}),v&&(0,i.jsxs)("div",{className:ts().error,children:[(0,i.jsx)(t_.IconWarning,{}),"Something went wrong. Please try again."]}),(0,i.jsx)("div",{className:ts().actions,children:(0,i.jsx)(eO.z,{theme:"green",size:"M",disabled:!n[c[l].question_key],loading:p,onClick:()=>{let e=s!==a.Shared&&l===c.length-1;if(l<f-1)k.Z.trackEvent("Onboarding Questions Viewed",{status:"in progress",current_step:l,next_step:l+1,total_steps:f,question_key:c[l].question_key}),d(l+1);else if(e)k.Z.trackEvent("Onboarding Questions Viewed",{status:"completed"}),_({variables:{input:{version:to.version,bringsToDune:n.brings_to_dune,achieveWithDune:n.achieve_with_dune,roleWithDune:n.role_with_dune,organizationSize:n.organization_size,dataTeamSize:n.data_team_size}}});else{k.Z.trackEvent("Onboarding Questions Viewed",{status:"in progress",current_step:l,total_steps:f,question_key:c[l].question_key,brings_to_dune:n.brings_to_dune});let e="job"===n.brings_to_dune?a.Business:a.Personal;o(e)}},children:"Next"})})]})})}function tg(e){var t;let{q:n,selected:r,onSelectResponse:a,percentage:s}=e;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{className:ts().title,children:[(0,i.jsx)("h1",{children:n.question_title}),(0,i.jsx)(tm,{percentage:s})]}),(0,i.jsxs)("div",{className:ts().question,children:[(0,i.jsx)("h3",{children:n.question_text}),"radio"===n.response.metadata.inputType?(0,i.jsx)(tu.S,{name:n.question_key,value:r[n.question_key]||"",onChange:e=>a(n.question_key,e),children:n.response.metadata.values.map(e=>(0,i.jsx)(tu.D,{value:e.key,theme:"green",children:e.value},e.key))}):(0,i.jsx)(tc.j,{name:n.question_key,size:"M",type:"contained",placeholder:null!==(t=n.placeholder)&&void 0!==t?t:"Select an option...",onChange:e=>a(n.question_key,e.target.value),value:r[n.question_key]||"",children:n.response.metadata.values.map(e=>(0,i.jsx)("option",{value:e.key,children:e.value},e.key))})]},n.question_key)]})}function tx(e){var t;let{session:n,isMobile:r=!1,renderWrapper:a}=e,{refresh:s}=(0,m.useContext)(T.B3),o=(0,e9.Z)(n),[l,d]=(0,m.useState)(!1),[u,c]=(0,m.useState)(!1),_=null==n?void 0:null===(t=n.user)||void 0===t?void 0:t.privateFields.onboardingQsSkippedUntil,[h,p]=(0,m.useState)(null===_),v=null==o?void 0:o.querySavedAt,f=null==o?void 0:o.visualizationCreatedAt,y=null==o?void 0:o.visualizationSharedAt,g={account:{completed:!0,withDetails:!1},query:{completed:null!==v,withDetails:null===v},visualization:{completed:null!==f,withDetails:!!(null!==v&&null===f)},share:{completed:null!==y,withDetails:!!(null!==v&&null!==f&&null===y)}},x=Object.values(g).filter(e=>{let{completed:t}=e;return!!t}).length,b=x/e7.c*100,j=(0,m.useRef)(x);if((0,m.useEffect)(()=>{j.current!==x&&4===x&&(d(!0),c(!0));let e=setTimeout(()=>{c(!1)},5e3);return()=>clearTimeout(e)},[x]),!o)return null;let C=()=>{p(!1),d(!0)};if(h){let e=(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:ta().overlay}),(0,i.jsx)(em.r,{isOpen:!0,disableEscKey:!0,setIsOpen:d,position:"below-align-right",content:()=>(0,i.jsx)(ty,{onQsSubmitted:()=>{C(),s()}}),closeOnClickOutside:!1,children:(0,i.jsx)("div",{className:ta().highlightedElement,children:(0,i.jsx)(e4.a,{percentage:0,isOpen:l,isMobile:r})})})]});return(0,i.jsx)(i.Fragment,{children:a(e)})}let I=(0,i.jsx)(em.r,{isOpen:l,setIsOpen:e=>{!0===e&&!1===l&&k.Z.trackEvent("Get Started Button Clicked"),d(e)},closeOnClickOutside:!0,position:"below-align-right",content:e=>{let{close:t}=e;return(0,i.jsxs)("div",{children:[(0,i.jsx)(e8.S,{checklist:e7.x,checklistItemsState:g,stepsCompleted:x,onHide:t}),u&&(0,i.jsx)(tn,{})]})},children:(0,i.jsx)("div",{children:(0,i.jsx)(e4.a,{percentage:b,isOpen:l,isMobile:r})})});return(0,i.jsx)(i.Fragment,{children:a(I)})}(0,A.Z)(tv()),(r=a||(a={})).Shared="shared",r.Personal="personal_use",r.Business="job";var tb=n(82876),tj=n(80746),tC=n(42914),tI=n(18035);function tk(e){let{showHeaderMarketing:t}=e,{session:n,logout:r}=(0,m.useContext)(T.B3),{mode:a,changeMode:s}=(0,tb.v)();return(0,i.jsxs)("header",{className:c()(d().header,e.className),children:[(0,i.jsxs)("nav",{children:[(0,i.jsx)("div",{className:c()(d().group,d().leftHalf),children:(0,i.jsxs)("nav",{className:d().spacedGroup,children:[n&&(0,i.jsx)(G.p,{}),(0,i.jsxs)("ul",{className:d().group,children:[n&&(0,i.jsx)("li",{children:(0,i.jsx)(eS,{})}),(0,i.jsx)("li",{children:(0,i.jsx)(eh,{})}),(0,i.jsx)("li",{children:(0,i.jsx)(tq,{})}),(0,i.jsx)("li",{children:(0,i.jsx)(tS,{})})]})]})}),(0,i.jsx)("div",{className:d().search,children:(0,i.jsx)(V,{})}),(0,i.jsx)("div",{className:c()(d().group,d().rightHalf),children:(0,i.jsxs)("ul",{className:d().spacedGroup,children:[n&&(0,i.jsx)(tx,{session:n,renderWrapper:e=>(0,i.jsx)("li",{children:e})}),!t&&(0,i.jsx)("li",{children:(0,i.jsx)(tD,{href:"/pricing",children:"Pricing"})}),!t&&(0,i.jsx)("li",{children:(0,i.jsx)(tD,{shouldOpenInNewTab:!0,href:"/product/api?utm_campaign=API-Header",children:"API"})}),!t&&(0,i.jsx)("li",{children:(0,i.jsx)(tD,{href:"/docs",isActive:()=>!1,shouldOpenInNewTab:!0,children:"Docs"})}),(0,i.jsx)(tE,{tooltip:"light"===a?"Dark mode":"Light mode",children:(0,i.jsx)(Z.h,{size:"M",theme:"ghost",className:d().headerButton,onClick:()=>{s("light"===a?"dark":"light")},children:"light"===a?(0,i.jsx)(tj.IconSun,{}):(0,i.jsx)(tC.IconMoonStars,{})})}),(0,i.jsx)("li",{children:(0,i.jsx)(em.f,{position:"below-align-right",content:()=>(0,i.jsxs)(R.s_,{children:[(0,i.jsxs)(R.$0,{children:[(0,i.jsx)(R.FB,{href:"/feedback",children:"Give feedback"}),n&&(0,i.jsx)(R.FB,{href:"/blog",children:"Blog"}),n&&(0,i.jsx)(R.FB,{href:"/dunecon",children:"DuneCon 2024"}),(0,i.jsx)(R.FB,{href:"https://discord.gg/ErrzwBz",target:"_blank",rel:"noreferrer",children:"Discord"}),(0,i.jsx)(R.FB,{href:"https://dune.com/docs/resources/dune-bounties/",target:"_blank",children:"Submit a bounty"}),n&&(0,i.jsx)(R.FB,{href:"/careers",children:"Careers"}),(0,i.jsx)(R.FB,{href:"https://status.dune.com/",target:"_blank",children:"Status"})]}),n&&(0,i.jsxs)(R.$0,{children:[(0,i.jsx)(R.FB,{href:"/contracts/new",children:"Submit a contract"}),(0,i.jsx)(R.FB,{href:"/settings",children:"Settings"}),(0,i.jsx)(R.ys,{onClick:r,children:"Sign out"})]})]}),children:(0,i.jsx)(Z.h,{size:"M",theme:"ghost",className:d().headerButton,children:(0,i.jsx)(ev.IconThreeDots,{})})})}),!t&&(0,i.jsx)("li",{children:(0,i.jsx)(tw,{})})]})})]}),(0,i.jsx)(e6,{})]})}function tw(){return(0,i.jsx)(h(),{className:d().logoLink,href:"/home",children:(0,i.jsx)("img",{src:"/assets/DuneLogoCircle.svg",alt:"Dune",width:"24px",height:"24px"})})}function tS(){return(0,i.jsx)(tD,{prefetch:!1,href:"/discover/content/trending",isActive:e=>tP.discover.test(e.asPath.split("?")[0]),children:"Discover"})}function tq(){let e=(0,e_._0)();return(0,i.jsx)(tD,{href:void 0!==e?(0,tI.Y)(e):"/workspace/library",isActive:e=>tP.library.test(e.asPath.split("?")[0]),children:"Library"})}let tP={discover:/^\/discover\/[a-z]+\/[a-z]+$/,library:/^\/workspace\/.+\/.+\/library/},tD=e=>{let{isActive:t,shouldOpenInNewTab:n,...r}=e,a=(0,p.useRouter)(),s="function"==typeof t?t(a):a.asPath===r.href;return(0,i.jsx)(h(),{...r,className:d().pageLink,"aria-current":s?"page":void 0,target:n?"_blank":void 0,children:(0,i.jsx)("div",{className:d().headerLink,children:r.children})})};function tE(e){return(0,i.jsx)(ep.u,{position:"below-center",label:e.tooltip,children:(0,i.jsx)("li",{children:e.children})})}var tN=n(41646),tA=n.n(tN),tz=n(46151),tT=n.n(tz),tU=n(63943),tM=n(71909);let tF={CREATE:"create",MORE:"more"};function tB(e){return/\/workspace\/.+\/.+\/library/.test(e.split("?")[0])}function tO(e){return/^\/discover\//.test(e.split("?")[0])}function tQ(e){let{session:t,setIsCreateDashboardDialogOpen:n}=e;return(0,i.jsxs)("div",{className:tT().createItems,children:[(0,i.jsx)(eb.A,{theme:"primary-light",size:"L",href:t?"/ai":(0,tM.T)("/ai"),children:"Dune AI"}),(0,i.jsx)(eb.A,{theme:"primary-light",size:"L",href:t?"/queries":(0,tM.T)("/queries"),children:"New query"}),(0,i.jsx)(eO.z,{theme:"primary-light",size:"L",onClick:()=>{n(!0)},children:"New dashboard"})]})}function tL(e){k.Z.trackEvent("Marketing Header Link Clicked",{...e,header_variant:window.innerWidth<1160?"mobile":"desktop"})}function tR(e){let{onOpen:t,...n}=e;return(0,i.jsx)(R.FB,{onOpen:()=>{null==t||t(),tL({href:e.href})},...n})}function tZ(e){let{active:t=!1,children:n,...r}=e;function a(){tL({href:e.href})}return(0,i.jsx)(h(),{...r,className:d().pageLink,"aria-current":t?"page":void 0,onClick:a,onAuxClick:a,children:(0,i.jsx)("div",{className:d().headerLink,children:n})})}var tH=n(73),t$=n.n(tH);let tV=(0,m.forwardRef)((e,t)=>{let{children:n,...r}=e;return(0,i.jsx)("button",{...r,ref:t,className:t$().button,children:n})});function tG(e){return(0,i.jsx)(K.c,{position:"below-align-left",renderToDomWhileClosed:!0,...e})}var tK=n(78528),tW=n(93208),tJ=n(86742),tY=n(85484),tX=n(4123),t0=n(34186);function t1(){return(0,i.jsx)(tG,{content:e=>{let{close:t}=e;return(0,i.jsx)(R.s_,{children:(0,i.jsx)(R.$0,{children:(0,i.jsx)(t2,{close:t})})})},children:(0,i.jsxs)(tV,{children:["Product",(0,i.jsx)(tK.IconChevronDown,{})]})})}function t2(e){let{close:t}=e;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(tR,{href:"/home#query-engine",target:"_blank",onOpen:t,children:[(0,i.jsx)(tW.IconWebApp,{}),"Web App"]}),(0,i.jsxs)(tR,{href:"/product/dune-catalyst",target:"_blank",onOpen:t,children:[(0,i.jsx)(tX.IconDataCatalyst,{}),"Dune Catalyst"]}),(0,i.jsxs)(tR,{href:"/product/datashare",target:"_blank",onOpen:t,children:[(0,i.jsx)(t0.IconDatashare,{}),"Datashare"]}),(0,i.jsxs)(tR,{href:"/product/api",target:"_blank",onOpen:t,children:[(0,i.jsx)(tJ.IconApi,{}),"API"]}),(0,i.jsxs)(tR,{href:"/product/ai",target:"_blank",onOpen:t,children:[(0,i.jsx)(tY.IconAi,{}),"AI"]})]})}var t3=n(25762),t6=n(16103),t4=n(33396),t9=n(10531);function t8(){return(0,i.jsx)(tG,{content:e=>{let{close:t}=e;return(0,i.jsx)(R.s_,{children:(0,i.jsx)(R.$0,{children:(0,i.jsx)(t7,{close:t})})})},children:(0,i.jsxs)(tV,{children:["Resources",(0,i.jsx)(tK.IconChevronDown,{})]})})}function t7(e){let{close:t}=e;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(tR,{href:"/docs",target:"_blank",onOpen:t,children:[(0,i.jsx)(t3.IconBook,{}),"Documentation"]}),(0,i.jsxs)(tR,{href:"/guide",target:"_blank",onOpen:t,children:[(0,i.jsx)(t6.IconStrategy,{}),"Guides and Tutorials"]}),(0,i.jsxs)(tR,{href:"/blog",target:"_blank",onOpen:t,children:[(0,i.jsx)(t4.IconBookOpen,{}),"Blog"]}),(0,i.jsxs)(tR,{href:"/case-studies",target:"_blank",onOpen:t,children:[(0,i.jsx)(t9.IconBooks,{}),"Case Studies"]})]})}var t5=n(53737),ne=n(38858),nt=n(71532),nn=n(93254),nr=n(95404),na=n(33439);function ni(){return(0,i.jsx)(tG,{content:e=>{let{close:t}=e;return(0,i.jsx)(R.s_,{children:(0,i.jsx)(R.$0,{children:(0,i.jsx)(ns,{close:t})})})},children:(0,i.jsxs)(tV,{children:["Company",(0,i.jsx)(tK.IconChevronDown,{})]})})}function ns(e){let{close:t}=e;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(tR,{href:"/about",target:"_blank",onOpen:t,children:[(0,i.jsx)(nr.IconInformation,{}),"About"]}),(0,i.jsxs)(tR,{href:"/careers",target:"_blank",onOpen:t,children:[(0,i.jsx)(ne.IconIdentificationBadge,{}),"Careers"]}),(0,i.jsxs)(tR,{href:"/dunecon",target:"_blank",onOpen:t,children:[(0,i.jsx)(t5.IconDuneLogoCutout,{}),"DuneCon 2024"]}),(0,i.jsxs)(tR,{href:"/lookbook",target:"_blank",onOpen:t,children:[(0,i.jsx)(na.IconSwag,{}),"Lookbook"]}),(0,i.jsxs)(tR,{href:"/events",target:"_blank",onOpen:t,children:[(0,i.jsx)(nn.IconConfetti,{}),"Events"]}),(0,i.jsxs)(tR,{href:"/contact",target:"_blank",onOpen:t,children:[(0,i.jsx)(nt.IconArrowSend,{}),"Contact us"]})]})}function no(e){let{close:t}=e;return(0,i.jsxs)("ul",{children:[(0,i.jsx)(tR,{href:"/enterprise",target:"_blank",onOpen:t,children:"Enterprise"}),(0,i.jsx)(tR,{href:"/pricing",onOpen:t,children:"Pricing"}),(0,i.jsx)(R.$0,{title:"Product",children:(0,i.jsx)(t2,{close:t})}),(0,i.jsx)(R.$0,{title:"Resources",children:(0,i.jsx)(t7,{close:t})}),(0,i.jsx)(R.$0,{title:"Company",children:(0,i.jsx)(ns,{close:t})})]})}function nl(e){let{setIsDataUploadModalOpen:t,showHeaderMarketing:n,setIsMenuOpen:r}=e,{mode:a,changeMode:s}=(0,tb.v)();return(0,i.jsxs)("div",{className:tT().moreItems,children:[n&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(no,{close:()=>r(!1)}),(0,i.jsx)("hr",{})]}),(0,i.jsxs)(R.ys,{onClick:()=>{s("light"===a?"dark":"light")},children:["light"===a?(0,i.jsx)(tj.IconSun,{}):(0,i.jsx)(tC.IconMoonStars,{}),"Change to ".concat("light"===a?"dark":"light"," mode")]}),!1===n&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(R.FB,{href:"/pricing",children:"Pricing"}),(0,i.jsx)(R.FB,{target:"_blank",href:"/product/api?utm_campaign=API-Header",children:"API"}),(0,i.jsx)(R.FB,{href:"/docs",target:"_blank",children:"Docs"})]}),(0,i.jsx)(R.ys,{onClick:()=>{t(!0)},children:"Upload a dataset"}),(0,i.jsx)(R.FB,{href:"/contracts/new",children:"Submit a contract"}),(0,i.jsx)(R.FB,{href:"/feedback",children:"Give feedback"}),(0,i.jsx)(R.FB,{href:"https://discord.gg/ErrzwBz",target:"_blank",children:"Discord"}),!1===n&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(R.FB,{href:"/blog",children:"Blog"}),(0,i.jsx)(R.FB,{href:"/dunecon",children:"Dunecon 2024"}),(0,i.jsx)(R.FB,{href:"/careers",children:"Careers"})]}),(0,i.jsx)(R.FB,{href:"https://status.dune.com/",target:"_blank",children:"Status"})]})}function nd(e){var t,n,r;let{showHeaderMarketing:a,renderDiscoverMobileMenu:s,renderLibraryMobileMenu:o}=e,l=(0,p.useRouter)(),{session:d,sessionLoading:u}=(0,m.useContext)(T.B3),c=(0,e_._0)(),_=null!==(t=null==c?void 0:c.permissions.canEditContent)&&void 0!==t&&t,[h,v]=(0,m.useState)(!1),[f,y]=(0,m.useState)(!1),[g,x]=(0,m.useState)(void 0!==(tB(r=l.asPath)?"library":tO(r)?"discover":void 0)?tF.CREATE:tF.MORE),[b,j]=(0,m.useState)(!1);return(0,m.useEffect)(()=>{h&&(tB(l.asPath)?x("library"):tO(l.asPath)&&x("discover"))},[h]),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(Z.h,{theme:"tertiary",size:"M",onClick:()=>v(e=>!e),children:h?(0,i.jsx)(H.IconCross,{}):(0,i.jsx)(tU.IconList,{})}),h&&(0,i.jsxs)("nav",{className:tT().menu,children:[(0,i.jsxs)("ul",{children:[(!d&&!u||_)&&(0,i.jsx)(nu,{isActive:"create"===g,onClick:()=>x("create"),children:"Create"}),(0,i.jsx)(nu,{isActive:"library"===g,href:void 0!==c?(0,tI.Y)(c):(0,tM.T)("/workspace/library"),children:"Library"}),(0,i.jsx)(nu,{isActive:"discover"===g,onClick:()=>x("discover"),href:"/discover/content/trending",children:"Discover"}),(0,i.jsx)(nu,{isActive:"more"===g,onClick:()=>x("more"),children:"More..."})]}),(0,i.jsxs)("div",{children:["create"===g&&(0,i.jsx)(tQ,{session:d,setIsCreateDashboardDialogOpen:j}),"more"===g&&(0,i.jsx)(nl,{setIsDataUploadModalOpen:y,showHeaderMarketing:a,setIsMenuOpen:v}),"discover"===g&&s&&(0,i.jsx)("ul",{className:tT().discoverItems,children:s()}),"library"===g&&o&&(0,i.jsx)("ul",{className:tT().discoverItems,children:o()})]})]}),d&&(0,i.jsx)(el.C,{isOpen:b,close:()=>j(!1),redirect:!0}),d&&(0,i.jsx)(ec.L9,{label:"Upload a dataset",size:"M",content:(0,i.jsx)(eu.y,{onDismiss:()=>y(!1)}),isOpen:f,onDismiss:void 0})]})}function nu(e){let{isActive:t,children:n,onClick:r,href:a}=e;return(0,i.jsx)("li",{className:c()(t&&tT().activeItem),onClick:r,children:void 0!==a?(0,i.jsx)(h(),{href:a,children:n}):(0,i.jsx)("button",{children:n})})}var nc=n(57322);function n_(e){let{showHeaderMarketing:t,renderDiscoverMobileMenu:n,renderLibraryMobileMenu:r}=e,{session:a,sessionLoading:s}=(0,m.useContext)(T.B3),o=(0,nc.Y)(),l=(0,tM.J)(),[d,u]=(0,m.useState)(!1);return(0,i.jsx)("header",{className:c()(tA().header,e.className),children:(0,i.jsxs)("nav",{children:[!d&&(0,i.jsxs)("div",{className:tA().spacedGroup,children:[(0,i.jsx)("ul",{children:(0,i.jsx)("li",{children:(0,i.jsx)(nh,{})})}),a&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(np,{}),(0,i.jsx)(G.p,{})]})]}),(0,i.jsxs)("div",{className:c()(tA().spacedGroup,d&&tA().openSearch),children:[!a&&!s&&!d&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("ul",{children:(0,i.jsx)("li",{children:(0,i.jsx)(eb.A,{theme:"secondary-light",size:"M",href:l,children:"Sign in"})})}),(0,i.jsx)("ul",{children:(0,i.jsx)("li",{children:(0,i.jsx)(eb.A,{theme:"secondary",size:"M",href:o,children:"Sign up"})})})]}),a&&!d&&(0,i.jsx)(tx,{session:a,isMobile:!0,renderWrapper:e=>(0,i.jsx)("ul",{children:(0,i.jsx)("li",{children:e})})}),(0,i.jsx)("ul",{className:c()(d&&tA().searchField),children:(0,i.jsx)("li",{children:!1===d?(0,i.jsx)("button",{onClick:()=>u(!d),className:tA().mobileSearch,children:(0,i.jsx)(L.IconMagnifyingGlass,{})}):(0,i.jsx)(V,{isMobile:!0,onCloseMobileSearch:()=>u(!1)})})}),(0,i.jsx)("ul",{children:(0,i.jsx)("li",{children:(0,i.jsx)(nd,{showHeaderMarketing:t,renderDiscoverMobileMenu:n,renderLibraryMobileMenu:r})})})]})]})})}function nh(){return(0,i.jsx)(h(),{className:tA().logoLink,href:"/home",children:(0,i.jsx)("img",{src:"/assets/DuneLogoCircle.svg",alt:"Dune",width:"24px",height:"24px"})})}function np(){return(0,i.jsx)("svg",{width:"10",height:"26",viewBox:"0 0 10 26",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,i.jsx)("path",{d:"M9 1L1 25",stroke:"var(--palette--gray--300)",strokeLinecap:"round"})})}var nm=n(87304),nv=n.n(nm);function nf(e){let{heightRem:t}=e;return(0,i.jsxs)("svg",{width:"".concat(2.85*t,"rem"),height:"".concat(t,"rem"),viewBox:"0 0 114 40",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,i.jsx)("title",{children:"Dune"}),(0,i.jsx)("path",{d:"M19.9892 39.9687C31.0277 39.9687 39.9762 31.0214 39.9762 19.9844C39.9762 8.94735 31.0277 7.62939e-05 19.9892 7.62939e-05C8.95059 7.62939e-05 0.0020752 8.94735 0.0020752 19.9844C0.0020752 31.0214 8.95059 39.9687 19.9892 39.9687Z",fill:"#F06040"}),(0,i.jsx)("path",{d:"M31.6481 3.75372C28.4375 1.44772 24.6152 0.145416 20.6644 0.0114806C16.7136 -0.122454 12.8118 0.918 9.4524 3.00127C6.09302 5.08454 3.42692 8.11706 1.79125 11.7154C0.155579 15.3136 -0.376194 19.3161 0.263175 23.2166C0.902544 27.117 2.68434 30.7404 5.38324 33.6283C8.08214 36.5163 11.5769 38.5392 15.4257 39.4412C19.2744 40.3433 23.3042 40.0839 27.0056 38.696C30.7069 37.3081 33.9135 34.8539 36.2198 31.6438C37.7512 29.5124 38.8477 27.1002 39.4467 24.5451C40.0457 21.99 40.1355 19.3419 39.711 16.752C39.2865 14.1622 38.3559 11.6813 36.9725 9.45108C35.5891 7.22082 33.7798 5.28486 31.6481 3.75372V3.75372Z",fill:"#F1603F"}),(0,i.jsx)("path",{d:"M3.47949 31.257C3.47949 31.257 16.6871 26.9308 39.9651 19.3408C39.9651 19.3408 41.2401 31.7705 28.3541 38.2539C28.3541 38.2539 21.9997 41.2994 15.0284 39.3458C15.0284 39.3458 8.08667 38.0355 3.47949 31.257Z",fill:"#2B286C"}),(0,i.jsx)("path",{d:"M52 10H58.9306C60.1676 10 61.2863 10.2066 62.2868 10.6197C63.3055 11.0329 64.1695 11.6526 64.879 12.4789C65.6066 13.2864 66.1614 14.3099 66.5434 15.5493C66.9436 16.77 67.1437 18.1972 67.1437 19.831C67.1437 21.4648 66.9436 22.9014 66.5434 24.1408C66.1614 25.3615 65.6066 26.385 64.879 27.2113C64.1695 28.0188 63.3055 28.6291 62.2868 29.0423C61.2863 29.4554 60.1676 29.662 58.9306 29.662H52V10ZM58.9306 26.3662C60.2767 26.3662 61.3409 25.9624 62.1231 25.1549C62.9235 24.3286 63.3237 23.0704 63.3237 21.3803V18.2817C63.3237 16.5915 62.9235 15.3427 62.1231 14.5352C61.3409 13.7089 60.2767 13.2958 58.9306 13.2958H55.6017V26.3662H58.9306Z",fill:"#2A2C2F"}),(0,i.jsx)("path",{d:"M78.8344 27.2113H78.698C78.5707 27.5869 78.3978 27.9437 78.1796 28.2817C77.9795 28.6009 77.7157 28.892 77.3883 29.1549C77.079 29.4178 76.697 29.6244 76.2423 29.7746C75.8057 29.9249 75.2963 30 74.7142 30C73.2408 30 72.113 29.5023 71.3308 28.507C70.5486 27.5117 70.1575 26.0939 70.1575 24.2535V14.9577H73.6501V23.8873C73.6501 24.9014 73.8411 25.6808 74.2231 26.2254C74.6051 26.7512 75.2145 27.0141 76.0513 27.0141C76.3969 27.0141 76.7334 26.9671 77.0608 26.8732C77.4065 26.7793 77.7066 26.6385 77.9613 26.4507C78.2159 26.2441 78.4251 26 78.5888 25.7183C78.7526 25.4178 78.8344 25.0704 78.8344 24.6761V14.9577H82.327V29.662H78.8344V27.2113Z",fill:"#2A2C2F"}),(0,i.jsx)("path",{d:"M86.0895 29.662V14.9577H89.5821V17.4085H89.7185C90.0096 16.6197 90.4643 15.9624 91.0828 15.4366C91.7195 14.892 92.5926 14.6197 93.7023 14.6197C95.1757 14.6197 96.3035 15.1174 97.0857 16.1127C97.8679 17.108 98.259 18.5258 98.259 20.3662V29.662H94.7664V20.7324C94.7664 19.6808 94.5845 18.892 94.2207 18.3662C93.8569 17.8404 93.2566 17.5775 92.4198 17.5775C92.056 17.5775 91.7013 17.6338 91.3557 17.7465C91.0282 17.8404 90.7281 17.9906 90.4552 18.1972C90.2006 18.385 89.9914 18.6291 89.8277 18.9296C89.6639 19.2113 89.5821 19.5493 89.5821 19.9437V29.662H86.0895Z",fill:"#2A2C2F"}),(0,i.jsx)("path",{d:"M107.615 30C106.56 30 105.614 29.8216 104.777 29.4648C103.959 29.0892 103.258 28.5728 102.676 27.9155C102.112 27.2394 101.676 26.4319 101.367 25.493C101.057 24.5352 100.903 23.4648 100.903 22.2817C100.903 21.1174 101.048 20.0657 101.339 19.1268C101.649 18.1878 102.085 17.3897 102.649 16.7324C103.213 16.0563 103.904 15.5399 104.723 15.1831C105.541 14.8075 106.469 14.6197 107.506 14.6197C108.616 14.6197 109.58 14.8169 110.398 15.2113C111.217 15.6056 111.89 16.1408 112.417 16.8169C112.945 17.493 113.336 18.2817 113.591 19.1831C113.864 20.0657 114 21.0141 114 22.0282V23.2113H104.532V23.5775C104.532 24.6479 104.823 25.5117 105.405 26.169C105.987 26.8075 106.851 27.1268 107.997 27.1268C108.87 27.1268 109.58 26.939 110.125 26.5634C110.689 26.1878 111.19 25.7089 111.626 25.1268L113.509 27.2958C112.927 28.1408 112.126 28.8075 111.108 29.2958C110.107 29.7653 108.943 30 107.615 30ZM107.561 17.3239C106.633 17.3239 105.896 17.6432 105.35 18.2817C104.805 18.9202 104.532 19.7465 104.532 20.7606V20.9859H110.371V20.7324C110.371 19.7183 110.125 18.9014 109.634 18.2817C109.161 17.6432 108.47 17.3239 107.561 17.3239Z",fill:"#2A2C2F"})]})}function ny(){return(0,i.jsx)("header",{className:nv().screenshot,children:(0,i.jsx)("nav",{children:(0,i.jsx)(h(),{href:"/",className:nv().dune,children:(0,i.jsx)(nf,{heightRem:3.2})})})})}var ng=n(16384),nx=n.n(ng);function nb(){return(0,i.jsx)(h(),{href:"/home",children:(0,i.jsx)(nj,{})})}function nj(){return(0,i.jsxs)("svg",{viewBox:"0 0 599 211",xmlns:"http://www.w3.org/2000/svg",style:{width:"10rem",display:"block"},children:[(0,i.jsx)("title",{children:"Dune"}),(0,i.jsx)("path",{d:"M209.84 101.56L18.29 164.12C6.75 147.27 0 126.89 0 104.93C0 46.98 46.99 0 104.95 0C162.91 0 208.07 45.17 209.84 101.56Z",fill:"#F4603E"}),(0,i.jsx)("path",{d:"m209.9 104.93c0 57.96-46.98 104.94-104.95 104.94-36 0-67.77-18.13-86.66-45.75l191.55-62.56c0.04 1.12 0.06 2.24 0.06 3.37z",fill:"#1E1870"}),(0,i.jsx)("path",{d:"m273.05 52.511h36.392c6.495 0 12.369 1.0848 17.623 3.2542 5.349 2.1695 9.886 5.4237 13.611 9.7626 3.821 4.2403 6.734 9.6147 8.74 16.123 2.101 6.4097 3.152 13.904 3.152 22.483 0 8.579-1.051 16.123-3.152 22.632-2.006 6.409-4.919 11.784-8.74 16.123-3.725 4.24-8.262 7.445-13.611 9.614-5.254 2.17-11.128 3.254-17.623 3.254h-36.392v-103.25zm36.392 85.94c7.068 0 12.656-2.12 16.763-6.36 4.203-4.339 6.304-10.946 6.304-19.821v-16.271c0-8.8751-2.101-15.433-6.304-19.673-4.107-4.3389-9.695-6.5084-16.763-6.5084h-17.48v68.634h17.48z",fill:"var(--text--primary)"}),(0,i.jsx)("path",{d:"m413.95 142.89h-0.716c-0.669 1.972-1.576 3.845-2.722 5.62-1.051 1.677-2.436 3.205-4.155 4.586-1.624 1.38-3.63 2.465-6.018 3.254-2.292 0.789-4.967 1.183-8.023 1.183-7.737 0-13.659-2.613-17.766-7.839-4.107-5.227-6.161-12.672-6.161-22.336v-48.813h18.339v46.89c0 5.325 1.003 9.418 3.009 12.277 2.006 2.762 5.206 4.142 9.599 4.142 1.815 0 3.582-0.246 5.302-0.739 1.814-0.494 3.39-1.233 4.728-2.219 1.337-1.085 2.435-2.367 3.295-3.846 0.86-1.578 1.289-3.402 1.289-5.473v-51.032h18.34v77.213h-18.34v-12.868z",fill:"var(--text--primary)"}),(0,i.jsx)("path",{d:"m452.05 155.76v-77.213h18.339v12.869h0.717c1.528-4.1417 3.916-7.5931 7.163-10.354 3.344-2.8598 7.928-4.2896 13.755-4.2896 7.737 0 13.659 2.6132 17.766 7.8396s6.161 12.672 6.161 22.336v48.812h-18.339v-46.89c0-5.522-0.956-9.6635-2.866-12.425-1.91-2.7611-5.062-4.1417-9.456-4.1417-1.91 0-3.773 0.2959-5.588 0.8876-1.719 0.493-3.295 1.2819-4.728 2.3666-1.337 0.9862-2.436 2.2681-3.295 3.8459-0.86 1.4793-1.29 3.2543-1.29 5.3253v51.031h-18.339z",fill:"var(--text--primary)"}),(0,i.jsx)("path",{d:"m565.08 157.53c-5.54 0-10.507-0.936-14.901-2.81-4.298-1.972-7.976-4.684-11.032-8.135-2.961-3.551-5.254-7.791-6.877-12.721-1.624-5.03-2.436-10.651-2.436-16.863 0-6.114 0.764-11.636 2.292-16.567 1.624-4.9305 3.916-9.1215 6.878-12.573 2.961-3.55 6.59-6.2618 10.888-8.1355 4.299-1.9722 9.17-2.9583 14.615-2.9583 5.826 0 10.888 1.0354 15.187 3.1062 4.298 2.0709 7.832 4.8813 10.602 8.4314 2.77 3.55 4.824 7.6917 6.161 12.425 1.433 4.635 2.149 9.615 2.149 14.94v6.212h-49.717v1.923c0 5.621 1.529 10.157 4.585 13.609 3.057 3.352 7.594 5.029 13.611 5.029 4.585 0 8.31-0.986 11.176-2.959 2.961-1.972 5.588-4.486 7.88-7.543l9.886 11.389c-3.056 4.438-7.259 7.939-12.608 10.502-5.254 2.466-11.367 3.698-18.339 3.698zm-0.287-66.563c-4.871 0-8.74 1.6764-11.605 5.0292-2.866 3.3528-4.299 7.6914-4.299 13.016v1.184h30.661v-1.332c0-5.325-1.289-9.6142-3.868-12.868-2.483-3.3528-6.113-5.0292-10.889-5.0292z",fill:"var(--text--primary)"})]})}function nC(){let e=(0,tM.J)(),t=(0,nc.Y)();return(0,m.useEffect)(()=>{k.Z.trackEvent("Marketing Header Shown",{header_variant:window.innerWidth<1160?"mobile":"desktop"})},[]),(0,i.jsx)("header",{className:nx().header,children:(0,i.jsxs)("div",{className:nx().layout,children:[(0,i.jsx)("div",{className:nx().leftSide,children:(0,i.jsx)(nb,{})}),(0,i.jsxs)("nav",{children:[(0,i.jsx)(tZ,{href:"/",active:!0,children:"App"}),(0,i.jsx)("div",{className:nx().buttonWrapper,children:(0,i.jsx)(t1,{})}),(0,i.jsx)(tZ,{href:"/enterprise",target:"_blank",children:"Enterprise"}),(0,i.jsx)("div",{className:nx().buttonWrapper,children:(0,i.jsx)(t8,{})}),(0,i.jsx)("div",{className:nx().buttonWrapper,children:(0,i.jsx)(ni,{})}),(0,i.jsx)(tZ,{href:"/pricing",children:"Pricing"}),(0,i.jsx)(tZ,{href:"/product/api?utm_campaign=API-Header",children:"API"})]}),(0,i.jsxs)("ul",{className:nx().rightSide,children:[(0,i.jsx)("li",{children:(0,i.jsx)(eb.A,{size:"L",theme:"secondary-light",href:e,children:"Sign in"})}),(0,i.jsx)("li",{children:(0,i.jsx)(eb.A,{size:"L",theme:"secondary",href:t,children:"Sign up"})})]})]})})}var nI=n(670),nk=n(43430);function nw(e){let{session:t,sessionLoading:n}=(0,m.useContext)(T.B3),r=!t&&!n;return((0,nk.I)(r?"marketing-header-enabled":""),"screenshot"===(0,p.useRouter)().query.ref)?(0,i.jsx)(ny,{}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(nI.p,{className:o().skip}),r&&(0,i.jsx)("div",{className:o().headerMarketing,children:(0,i.jsx)(nC,{})}),(0,i.jsxs)("div",{className:o().headerApp,children:[(0,i.jsx)(n_,{className:o().headerMobile,showHeaderMarketing:r,renderDiscoverMobileMenu:e.renderDiscoverMobileMenu,renderLibraryMobileMenu:e.renderLibraryMobileMenu}),(0,i.jsx)(tk,{className:o().headerDesktop,showHeaderMarketing:r})]}),(0,i.jsx)(nI.f,{})]})}},449:function(e,t,n){"use strict";n.d(t,{j:function(){return _},x:function(){return c}});var r=n(85893);n(67294);var a=n(77628),i=n.n(a),s=n(94184),o=n.n(s),l=n(10933),d=n(41118),u=n(11941);let c=e=>(0,r.jsx)("div",{className:i().ctas,children:e.children}),_=(0,u.X)(function(e){let{dismissable:t=!1,onDismiss:n=()=>{},color:a="brand-blue"}=e;return(0,r.jsxs)("div",{className:o()(i().banner,i()["color--".concat(a)]),children:[e.children,t&&(0,r.jsx)(l.h,{theme:"ghost",size:"XS",className:i().dismiss,onClick:n,children:(0,r.jsx)(d.IconCross,{})})]})})},99152:function(e,t,n){"use strict";n.d(t,{_:function(){return T}});var r=n(82729),a=n(85893),i=n(67294),s=n(32037),o=n(31544),l=n.n(o),d=n(34878),u=n.n(d),c=n(94184),_=n.n(c),h=n(30990),p=n(39137),m=n(84937),v=n(76138),f=n(24478),y=n(61857),g=n(50876),x=n(85361);let b=()=>{let e=(0,x._0)(),{role:t}=(0,g.OG)(e),n=[{key:"viewer",display:"Viewer"},{key:"editor",display:"Editor"}];switch(t){case"admin":return{role:m.nJN.Admin,options:[...n,{key:"admin",display:"Admin"}]};case"editor":return{role:m.nJN.Editor,options:n};default:return{role:m.nJN.Viewer,options:[]}}};var j=n(10398),C=n(51818),I=n(61451),k=n(14080),w=n(24506),S=n(40802);function q(){let e=(0,r._)(["\n  mutation CreateInviteKey($teamId: Int!) {\n    createInviteKey(teamId: $teamId) {\n      id\n    }\n  }\n"]);return q=function(){return e},e}(0,p.Z)(q());var P=n(21154);function D(){let e=(0,r._)(["\n  mutation DisabledAllInviteKeys($teamId: Int!) {\n    disableAllInviteKeys(teamId: $teamId) {\n      ok\n    }\n  }\n"]);return D=function(){return e},e}(0,p.Z)(D());var E=n(57903),N=n(66465),A=n(46367);function z(){let e=(0,r._)(["\n  mutation InviteMember(\n    $teamId: Int!\n    $role: MembershipRole!\n    $usernameOrEmail: String!\n  ) {\n    inviteMember(\n      teamId: $teamId\n      role: $role\n      usernameOrEmail: $usernameOrEmail\n    ) {\n      id\n    }\n  }\n"]);return z=function(){return e},e}let T=e=>{var t;let{session:n,team:r}=e,{captureEvent:o}=(0,N.z$)(),[d,c]=(0,i.useState)(""),[p,v]=(0,i.useState)(m.nJN.Editor),{role:g,options:x}=b(),[k,w]=function(e,t){let[n,r]=(0,i.useState)(void 0),[a]=(0,m.EJc)();return[n,function(){a({context:{session:t},variables:{teamId:e.id}}).then(t=>{if(t.data&&t.data.createInviteKey){let n=t.data.createInviteKey.id,a="https://dune.com/t/".concat(e.handle,"/").concat(n);r(a)}}).catch(t=>{S.Tb("Could not create invite link for team ".concat(e.id,": ").concat(t))})}]}(r,n),[q]=function(){let[e,t]=(0,m.gm2)();return[function(t,n){return new Promise((r,a)=>{e({context:{session:n},variables:{teamId:t}}).then(()=>{r()},e=>{a(),S.Tb("Error when revoking keys for team ".concat(t,": ").concat(e))})})},t]}();(0,i.useEffect)(()=>{void 0===k&&w()},[k]);let[{isLoading:D,error:z,isSaved:T},F]=(0,i.useState)({isLoading:!1,error:void 0,isSaved:!1});return(0,a.jsxs)("div",{className:l().body,children:[(0,a.jsx)("div",{className:l().header,children:(0,a.jsxs)("div",{className:l().titleRow,children:[(0,a.jsx)("h2",{children:"Invite team members"}),(0,a.jsx)("div",{className:u().teamPositioner,children:(0,a.jsx)(y.i,{size:"M",color:"text-secondary",flip:!0,owner:{type:"team",id:e.team.id,handle:e.team.handle,profile_image_url:null!==(t=e.team.profile_image_url)&&void 0!==t?t:""}})})]})}),(0,a.jsxs)("div",{className:_()(l().content,u().content),children:[(0,a.jsx)(j.U,{size:"L",style:"contained",label:"Invite by username or email",value:d,placeholder:"Username or email",onChange:e=>c(e.target.value.toLowerCase()),hint:"Enter the username or email of the person you want to invite.",error:function(e){if(e instanceof h.cA){var t,n;switch(null===(n=e.graphQLErrors[0])||void 0===n?void 0:null===(t=n.extensions)||void 0===t?void 0:t.key){case"team_not_found":return"Team not found";case"invalid_input":return"Something went wrong, check your input and try again";case"invalid_email_or_username":return"Must either provide a valid email or username matching a user";case"not_authorized":return"You are not authorized to invite members to this team";case"max_invites_sent_per_hour_by_user":return"You have exceeded the maximum number of invites you can send per hour";case"max_invites_sent_per_day_to_user":return"This user has exceeded the maximum number of invites they can receive per day";default:return"Something went wrong"}}}(z)}),(0,a.jsx)(C.j,{size:"L",label:"Role",name:"Role",type:"contained",onChange:e=>v(e.target.value),value:p,placeholder:"",hint:(0,a.jsx)("div",{className:u().roles,children:(0,a.jsxs)("dl",{children:[(0,a.jsx)("dd",{children:"Viewer"}),(0,a.jsx)("dt",{children:"Browse team queries and dashboards."}),(0,a.jsx)("dd",{children:"Editor"}),(0,a.jsx)("dt",{children:"Create, edit team queries and dashboards."}),"admin"===g&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("dd",{children:"Admin"}),(0,a.jsx)("dt",{children:"Manage the team's profile, members and other settings."})]})]})}),children:x.map(e=>(0,a.jsx)("option",{value:e.key,children:e.display},e.key))}),(0,A.n)(k)&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("hr",{}),(0,a.jsx)(j.U,{size:"L",style:"contained",label:"Allow joining team by url",readOnly:!0,value:k,placeholder:"",onChange:()=>{},suffix:(0,a.jsx)(U,{link:k}),hint:(0,a.jsxs)("div",{children:["Anyone with this link can automatically join your team. Expires after 48h.",(0,a.jsxs)("div",{children:[(0,a.jsx)(P.V,{size:"M",theme:"danger",onClick:()=>{q(r.id,n).then(()=>{(0,E.Bh)({level:"success",title:"All previous invite links were revoked. Please use the newest one."}),w(),o("Invite keys revoked",{team_id:r.id})}).catch(()=>{(0,E.Bh)({level:"error",title:"Something went wrong. Please try again."})})},children:"Revoke"})," ","all previous invite links."]})]})})]})]}),(0,a.jsxs)("div",{className:l().buttons,children:[(0,a.jsx)(I.z,{size:"M",theme:"primary",loading:D,onClick:t=>{t.preventDefault(),F({isLoading:!0,error:void 0,isSaved:!1}),(0,f.X)(()=>M(e.team.id,d,p,e.session),500).then(()=>{F({isLoading:!1,error:void 0,isSaved:!0}),setTimeout(()=>{F({isLoading:!1,error:void 0,isSaved:!1}),e.onInvite(),c(""),v(m.nJN.Editor)},1500)}).catch(e=>{F({isLoading:!1,error:e,isSaved:!1})})},children:"Send Invite"}),(0,a.jsx)(I.z,{onClick:e.onDismiss,size:"M",theme:"tertiary",children:"Cancel"}),T&&(0,a.jsx)(s.oT,{text:"Invite sent"})]})]})};function U(e){let{link:t}=e;return(0,a.jsx)(w.Z,{text:t,size:"XS",theme:"ghost",children:(0,a.jsx)(k.IconCopy,{})})}let M=async(e,t,n,r)=>{var a,i,s;let o=await v.bj.mutate({mutation:m.XJw,variables:{teamId:e,role:n,usernameOrEmail:t},context:{session:r},fetchPolicy:"no-cache"}),l=null!==(s=null===(i=o.data)||void 0===i?void 0:null===(a=i.inviteMember)||void 0===a?void 0:a.id)&&void 0!==s?s:"";if(!l)throw Error("Invite not sent");return l};(0,p.Z)(z())},84512:function(e,t,n){"use strict";n.d(t,{BU:function(){return c},Gs:function(){return h},fN:function(){return d},n1:function(){return _},rD:function(){return p},rn:function(){return u}});var r=n(45855),a=n.n(r),i=n(47951);let s=/^\*\/(\d+)$/,o=e=>(t,n)=>{if("string"!=typeof e)return!1;if("*"===e)return!0;let r=e.match(s),a=Number(r?r[1]:e),i=!Number.isNaN(a);return i&&t<=a&&a<=n};function l(e){return o(e.minute)(0,59)&&o(e.hour)(0,23)&&o(e.dayOfMonth)(1,31)&&o(e.month)(1,12)&&o(e.weekday)(0,6)}function d(e){let t=e.split(" ");if(5!==t.length)return!1;let[n,r,a,i,s]=t;return l({minute:n,hour:r,dayOfMonth:a,month:i,weekday:s})}function u(e){let{minute:t="*",hour:n="*",dayOfMonth:r="*",month:a="*",weekday:i="*"}=e;return"".concat(t," ").concat(n," ").concat(r," ").concat(a," ").concat(i)}function c(e){let t=e.split(" ");if(5!==t.length)throw Error("Could not parse cron string");let[n,r,a,i,s]=t,o={minute:n,hour:r,dayOfMonth:a,month:i,weekday:s};if(!l(o))throw Error("Could not parse cron string");return o}let _=e=>t=>{let n={...c(e),...t};if(!l(n))throw Error('Invalid cron object -> "'.concat(u(n),'"'));return u(n)},h=e=>{try{let t=a().parseExpression(e,{utc:!0});return(0,i.Z)(t.next().toDate(),"Etc/UTC")}catch(e){return null}},p=(e,t)=>{try{let n=a().parseExpression(e),r=n.prev().toDate();if(r<new Date(t))return null;return r}catch(e){return null}}},35560:function(e,t,n){"use strict";n.d(t,{U:function(){return g},Z:function(){return x}});var r=n(82729),a=n(85893),i=n(40802),s=n(57831);n(67294);var o=n(68357),l=n(85361),d=n(45466),u=n(58653),c=n(21154),_=n(11969),h=n(39137),p=n(84937);function m(){let e=(0,r._)(["\n  fragment OperationCosts on OperationCost {\n    key\n    nanocreditsPerDatapoint\n    interactiveExecutions {\n      datasetId\n      publicPerformanceTierKey\n      credits\n    }\n  }\n"]);return m=function(){return e},e}function v(){let e=(0,r._)(["\n  query GetTeamOperationCosts($teamId: Int!) {\n    teamOperationCost(teamId: $teamId) {\n      ...OperationCosts\n    }\n  }\n"]);return v=function(){return e},e}function f(){let e=(0,r._)(["\n  query GetUserOperationCosts {\n    userOperationCost {\n      ...OperationCosts\n    }\n  }\n"]);return f=function(){return e},e}(0,h.Z)(m()),(0,h.Z)(v()),(0,h.Z)(f());let y={free:{displayName:"Free",description:(0,a.jsx)(a.Fragment,{children:"Run simple queries that take less than 2 minutes, at no cost."})},medium:{displayName:"Medium",description:(0,a.jsx)(a.Fragment,{children:"Run faster queries more reliably."})},large:{displayName:"Large",description:(0,a.jsx)(a.Fragment,{children:"Speed up your more complex workloads."}),renderUpsellMessage:(e,t)=>t?(0,a.jsxs)(a.Fragment,{children:["Large cluster size is available on paid team plans.",(0,a.jsx)("br",{}),(0,a.jsx)(c.V,{size:"S",theme:"secondary",insideText:!0,onClick:()=>(0,_.MD)(!0),children:"Switch"})," ","your active account to your paid team to speed up your more complex workloads."]}):(0,a.jsxs)(a.Fragment,{children:["Large cluster size is available on higher plan tiers."," ",(0,a.jsx)(o.L,{theme:"secondary",size:"M",href:e,target:"_blank",children:"Upgrade your plan"})," ","to speed up your more complex workloads."]})}};function g(e){return e in y}function x(e){var t,n,r,a;let o=(0,s.kP)(),c=null!==(a=null==e?void 0:e.id)&&void 0!==a?a:0,_=null===(t=(0,d.hx)(o))||void 0===t?void 0:t.filter(e=>(0,u.P)(e.serviceTier.id)),h=!!_&&_.length>0,m=(0,p.vq4)({skip:!o||!o.user||!e||"team"!==e.type,variables:{teamId:c},context:{session:o},fetchPolicy:"cache-first"}),v=(0,p.g2b)({skip:!o||!o.user||!e||"user"!==e.type,context:{session:o},fetchPolicy:"cache-first"}),f=e&&"team"===e.type,g=f?null===(n=m.data)||void 0===n?void 0:n.teamOperationCost:null===(r=v.data)||void 0===r?void 0:r.userOperationCost,x=f?m.loading:v.loading,b=f?m.error:v.error;return{error:b,loading:x,data:g&&function(e,t,n){let r=t.interactiveExecutions,a={};for(let e of r){a[e.datasetId]||(a[e.datasetId]=[]);let t=e.publicPerformanceTierKey;y[t]?a[e.datasetId].push({publicPerformanceTierKey:t,displayName:y[t].displayName,description:y[t].description,credits:e.credits.toNumber()}):i.Tb("".concat(t," is not a supported performance tier"))}for(let t of r)a[t.datasetId].find(e=>"large"===e.publicPerformanceTierKey)||a[t.datasetId].push({publicPerformanceTierKey:"large",displayName:y.large.displayName,description:y.large.description,credits:20,disabled:!0,upsellMessage:y.large.renderUpsellMessage({pathname:"/pricing",query:(0,l.JW)(e)},n)});return Object.keys(a).forEach(e=>{a[Number(e)].sort((e,t)=>e.credits-t.credits)}),a}(e,g,h)}}},33549:function(e,t,n){"use strict";n.d(t,{E:function(){return d},o:function(){return p}});var r=n(85893),a=n(67294),i=n(73445),s=n(54465),o=n(40802),l=n(38723);function d(e){let{checkoutOwner:t,renderButton:n}=e;switch(t.type){case"team":return(0,r.jsx)(u,{teamId:t.id,renderButton:n});case"user":return(0,r.jsx)(c,{renderButton:n})}}function u(e){let t=(0,l.T)(e.teamId);return(0,r.jsx)(_,{checkoutSession:t,renderButton:e.renderButton})}function c(e){let t=(0,l.N)();return(0,r.jsx)(_,{checkoutSession:t,renderButton:e.renderButton})}function _(e){let[t,n]=(0,a.useState)(!1),[i,s]=e.checkoutSession;switch(i.status){case"init":case"loading":return e.renderButton({loading:t,onClick:()=>{n(!0)}});case"error":return e.renderButton({loading:!1,onClick:()=>{s(),n(!0)}});case"success":return(0,r.jsx)(v,{checkoutSessionId:i.checkoutSessionId,alreadyClicked:t,renderButton:e.renderButton})}}let h=(0,i.Ue)(()=>({status:"init"}));function p(){return h(e=>e.status)}function m(e){h.setState({status:e})}function v(e){let t=p();function n(){if(["loading","success"].includes(t))return;m("loading");let n=e.checkoutSessionId;(0,s.J)(f).then(e=>{if(!e)throw Error("Failed to load Stripe");return e.redirectToCheckout({sessionId:n})}).then(()=>{m("success")},e=>{m("error"),o.Tb(e)})}return(0,a.useEffect)(()=>()=>m("init"),[]),(0,a.useEffect)(()=>{e.alreadyClicked&&n()},[n,e.alreadyClicked]),e.renderButton({loading:"loading"===t,onClick:n})}let f=(()=>{let e="pk_live_8F09K1xK5j4yIpQMWfdGp8PX";if(!e)throw Error("NEXT_PUBLIC_STRIPE_PK not set");return e})()},87312:function(e,t,n){"use strict";n.d(t,{s:function(){return l}});var r=n(85893),a=n(43691),i=n.n(a),s=n(41664),o=n.n(s);function l(e){let{resource:t,hasAdminPermission:n}=e;return n?(0,r.jsxs)("div",{className:i().tooltip,children:["You’ve reached the private ",t," limit. ",(0,r.jsx)("br",{})," To increase the limit,"," ",(0,r.jsx)(o(),{className:i().upgradeLink,href:"/pricing",children:"upgrade plan"}),"."]}):(0,r.jsxs)("div",{className:i().tooltip,children:["Your team reached the private ",t," limit. ",(0,r.jsx)("br",{})," Please reach out to your team admin to manage it."]})}},24506:function(e,t,n){"use strict";n.d(t,{Z:function(){return c}});var r=n(85893),a=n(67294),i=n(94184),s=n.n(i),o=n(95946),l=n.n(o),d=n(80949),u=n(10933);function c(e){let{text:t,size:n="M",theme:i="ghost",className:o,children:c=(0,r.jsx)(d.J,{icon:"copy"}),onCopy:_}=e,[h,p]=(0,a.useState)(!1);return((0,a.useEffect)(()=>{if(!h)return;let e=setTimeout(()=>p(!1),1e3);return()=>clearTimeout(e)},[h]),h)?(0,r.jsx)(u.h,{size:n,theme:i,className:s()(l().checkFilled,o),disabled:!0,children:(0,r.jsx)(d.J,{icon:"check-filled"})}):(0,r.jsx)(u.h,{size:n,theme:i,className:o,onClick:e=>{e.preventDefault(),navigator.clipboard.writeText(t).then(()=>p(!0)),null==_||_()},children:c})}},20824:function(e,t,n){"use strict";n.d(t,{S:function(){return C}});var r=n(85893),a=n(94184),i=n.n(a),s=n(53947),o=n(32613),l=n(98920),d=n.n(l),u=n(78282),c=n(21154),_=n(95965),h=n(41664),p=n.n(h),m=n(82729),v=n(39137),f=n(84937),y=n(30205);function g(){let e=(0,m._)(["\nmutation TrackDismissedAt($userId: Int!) {\n  dismissCreatorOnboardingChecklist(userId: $userId) {\n    dismissedAt\n    querySavedAt\n    userId\n    visualizationCreatedAt\n    visualizationSharedAt\n  }\n}\n"]);return g=function(){return e},e}(0,v.Z)(g());var x=n(57831),b=n(67294),j=n(45172);function C(e){let{checklist:t,checklistItemsState:n,stepsCompleted:a,onHide:i}=e,s=a===u.c,l=(0,x.kP)(),[h]=function(e){let t=(0,y.Z)(e),[n,r]=(0,f.z8g)({context:{session:e},variables:{userId:e.user.id}}),a=(null==e?void 0:e.user)!==void 0&&void 0!==t&&null===t.dismissedAt;return[a?n:()=>{},r]}(l);return(0,b.useEffect)(()=>{j.Z.trackEvent("Creator Onboarding Checklist Viewed")},[]),(0,r.jsx)(o.s_,{className:d().menu,children:(0,r.jsxs)(o.$0,{children:[(0,r.jsxs)("div",{className:d().menuTitle,children:[(0,r.jsx)("div",{children:!s&&"Step ".concat(a+1," of ").concat(u.c)}),(0,r.jsxs)(c.V,{theme:"primary",size:"M",onClick:()=>{s&&h(),i()},children:[s?"Close Forever":"Hide",(0,r.jsx)(_.IconChevronUp,{})]})]}),t.items.map(e=>(0,r.jsx)(I,{completed:n[e.key].completed,withDetails:n[e.key].withDetails,item:e},e.key)),s&&(0,r.jsxs)("div",{className:d().lastHint,children:["Great work! Stay curious and",(0,r.jsx)("br",{}),"keep learning with Dune's",(0,r.jsx)("br",{}),(0,r.jsx)(p(),{href:"https://dune.com/docs/learning/#dune-101",target:"_blank",children:"learning resources"})," ","docs."]})]})})}function I(e){let{completed:t,withDetails:n,item:a}=e;return(0,r.jsx)(o.ys,{style:{background:"none"},children:(0,r.jsx)(s.o,{checked:t,onChange:()=>{},className:i()(t?d().greenCheckbox:d().checkbox),hint:!t&&n&&a.description,children:(0,r.jsx)("div",{className:i()(t?d().strikethrough:d().title),children:a.title})})})}},28950:function(e,t,n){"use strict";n.d(t,{a:function(){return h}});var r=n(85893);function a(){return(0,r.jsxs)("svg",{width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,r.jsx)("circle",{cx:"6",cy:"6",r:"5.5",stroke:"currentColor"}),(0,r.jsx)("g",{clipPath:"url(#clip0_414_5660)",children:(0,r.jsx)("circle",{cx:"6",cy:"6",r:"5.5",transform:"matrix(-1 0 0 1 12 0)",stroke:"currentColor"})}),(0,r.jsx)("g",{clipPath:"url(#clip1_414_5660)",children:(0,r.jsx)("circle",{cx:"6",cy:"6",r:"5.5",stroke:"currentColor"})}),(0,r.jsx)("path",{d:"M3.5 6.5L5.5 8L8.5 4",stroke:"currentColor"}),(0,r.jsxs)("defs",{children:[(0,r.jsx)("clipPath",{id:"clip0_414_5660",children:(0,r.jsx)("rect",{width:"6",height:"12",fill:"white",transform:"matrix(-1 0 0 1 6 0)"})}),(0,r.jsx)("clipPath",{id:"clip1_414_5660",children:(0,r.jsx)("rect",{width:"6",height:"12",fill:"white",transform:"translate(6)"})})]})]})}var i=n(67294),s=n(94869),o=n.n(s),l=n(94184),d=n.n(l),u=n(26352),c=n.n(u);function _(e){let{percentage:t}=e;return(0,r.jsx)("div",{className:c().progressPie,style:{"--progress":"".concat(t,"%")},children:(0,r.jsx)("div",{})})}function h(e){let{percentage:t,isOpen:n,isMobile:s=!1}=e,[l,u]=(0,i.useState)(!1),c=(0,i.useRef)(t);return(0,i.useEffect)(()=>{if(c.current!==t&&100!==t){u(!0);let e=setTimeout(()=>{u(!1)},500);return()=>clearTimeout(e)}},[t]),(0,r.jsxs)("button",{className:d()([o().gettingStartedButton,l&&o().jiggling,n&&o().active,s&&o().mobile]),children:[t<100?(0,r.jsx)(_,{percentage:t}):(0,r.jsx)(a,{}),s?"":"Get Started"]})}},78282:function(e,t,n){"use strict";n.d(t,{c:function(){return d},x:function(){return u}});var r=n(85893),a=n(41664),i=n.n(a),s=n(98920),o=n.n(s),l=n(86658);let d=4,u={items:[{key:"account",title:"Create an account"},{key:"query",title:"Create your first query",description:(0,r.jsxs)("div",{children:["Try making a chart of the monthly gas spend for your wallet.",(0,r.jsx)("br",{}),(0,r.jsxs)(i(),{href:"https://dune.com/docs/learning/how-tos/create-your-first-query/",className:o().link,target:"_blank",children:["See guide ",(0,r.jsx)(l.IconArrowUpRight,{})]})]})},{key:"visualization",title:"Create your first visualization",description:(0,r.jsxs)("div",{children:["Use your own query or fork someone else’s.",(0,r.jsxs)(i(),{href:"https://dune.com/docs/learning/how-tos/create-your-first-visualization/",className:o().link,target:"_blank",children:["See guide ",(0,r.jsx)(l.IconArrowUpRight,{})]})]})},{key:"share",title:"Share your query",description:(0,r.jsxs)("div",{children:["Share your findings with teammates and social media.",(0,r.jsxs)(i(),{href:"https://dune.com/docs/learning/how-tos/share-your-query/",className:o().link,target:"_blank",children:["See guide ",(0,r.jsx)(l.IconArrowUpRight,{})]})]})}]}},45850:function(e,t,n){"use strict";n.d(t,{Z:function(){return p}});var r=n(82729),a=n(85893),i=n(67294),s=n(40802),o=n(57831),l=n(44914),d=n(45466),u=n(51818),c=n(39137),_=n(84937);function h(){let e=(0,r._)(["\n  query ListOtherTeamMembers($team_id: Int!) {\n    memberships(\n      filters: {\n        teamId: { equals: $team_id }\n        status: { in: [invite_accepted ]}\n      }\n      pagination: {first: 100}\n      orderBy: [{ key: role, direction: DESC }]\n    ) {\n      edges {\n        node {\n          user {\n            id\n            name\n          }\n          role\n        }\n      }\n    }\n  }\n"]);return h=function(){return e},e}function p(e){var t;let n=(0,o.Ke)(),r=function(){let e=(0,o.Ke)();return(0,d.gh)(e).filter(e=>["admin","editor"].includes(e.membership.role))}(),c=function(e){var t;let n=(0,o.Ke)(),r=(0,l.fw)(e),{data:a}=(0,_._12)({context:{session:n},variables:{team_id:e.id},skip:!("team"===e.type&&r)});return i.useMemo(()=>null!==(t=null==a?void 0:a.memberships.edges.map(e=>e.node.user&&e.node.user.id!==n.user.id?{role:e.node.role,user:e.node.user}:void 0).filter(m))&&void 0!==t?t:[],[a])}(e.initialOwner),h=i.useMemo(()=>[{type:"user",id:n.user.id,handle:n.user.name,label:"You - @".concat(n.user.name)},...r.map(e=>({type:"team",id:e.id,handle:e.handle,label:"Team - @".concat(e.handle)})),...c.map(e=>({type:"user",id:e.user.id,handle:e.user.name,label:"Team ".concat(null!==(t=e.role)&&void 0!==t?t:"member"," - @").concat(e.user.name)}))],[n,r,c]);return 0===r.length?null:(0,a.jsx)(u.j,{name:"owner",size:"M",type:"contained",label:"Owner",placeholder:"Select owner",value:e.owner.handle,onChange:t=>(function(t){let n=h.find(e=>e.handle===t);if(!n){s.Tb(Error('setOwner called with value="'.concat(t,"\" that doesn't exist")));return}e.setOwner({type:n.type,handle:n.handle,id:n.id})})(t.target.value),children:h.map(e=>(0,a.jsx)("option",{value:e.handle,children:e.label},e.handle))})}function m(e){return null!=e}(0,c.Z)(h())},59999:function(e,t,n){"use strict";n.d(t,{Qd:function(){return p},Vq:function(){return h},mj:function(){return m}});var r=n(85893),a=n(67294),i=n(94184),s=n.n(i),o=n(52743),l=n.n(o),d=n(7301),u=n(80949),c=n(61451);function _(e){e.stopPropagation()}let h=e=>{let t=s()(l().content,e.size&&l()[e.size],e.className);return(0,r.jsx)(d.t9,{isOpen:e.isOpen,onDismiss:()=>{e.onDismiss()},className:l().overlay,onMouseDown:_,children:(0,r.jsx)(d.cZ,{className:t,"aria-label":e.label,children:e.children})})},p=e=>{let[t,n]=a.useState(!1),i=()=>n(e=>!e);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(c.z,{onClick:i,disabled:e.disabled,size:"M",theme:"tertiary",children:e.label}),(0,r.jsx)(h,{...e,isOpen:t,onDismiss:i,size:e.size,children:e.children(i)})]})},m=e=>{let[t,n]=a.useState(!1),i=()=>n(e=>!e);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("button",{type:"button",onClick:i,className:e.className,children:[e.icon?(0,r.jsx)(u.J,{icon:e.icon}):null,e.iconAndLabel||!e.icon?e.label:null]}),(0,r.jsx)(h,{...e,isOpen:t,onDismiss:i,size:e.size,children:e.children(i)})]})}},28174:function(e,t,n){"use strict";n.d(t,{F5:function(){return m},Iv:function(){return c},Qy:function(){return _},cp:function(){return h},o_:function(){return p}});var r=n(85893),a=n(67294),i=n(94184),s=n.n(i),o=n(54994),l=n.n(o),d=n(15183),u=n(80949);let c=e=>{let t=s()(l().fields,e.horizontal&&l().horizontal,e.size&&l()[e.size]);return(0,r.jsx)("div",{className:t,children:e.children})},_=e=>{let t=s()(l().field,e.size&&l()[e.size]);return(0,r.jsxs)("label",{className:t,children:[e.label&&(0,r.jsx)("div",{className:l().label,children:e.label}),e.children,e.caption&&(0,r.jsx)("div",{className:l().caption,children:e.caption})]})},h=e=>(0,r.jsx)("p",{role:"alert",className:l().error,children:"label"in e.error?e.error.label:e.error.message}),p=e=>(0,r.jsx)(d.h,{className:s()(l().field,l().buttons),children:(0,r.jsx)("div",{children:e.children})});function m(e){let[t,n]=a.useState("open"===e.initialState);return(0,r.jsxs)("div",{className:l().expandable,children:[(0,r.jsx)("label",{className:l().label,children:(0,r.jsxs)("button",{type:"button",onClick:e=>{e.preventDefault(),n(e=>!e)},className:l().label,children:[e.label,t?(0,r.jsx)(u.J,{icon:"caret-up-fill"}):(0,r.jsx)(u.J,{icon:"caret-down-fill"})]})}),t&&e.children]})}},39561:function(e,t,n){"use strict";n.d(t,{JD:function(){return _},o2:function(){return h},oH:function(){return u},zg:function(){return c}});var r=n(85893),a=n(67294),i=n(94184),s=n.n(i),o=n(88067),l=n.n(o),d=n(80949);let u=a.forwardRef((e,t)=>{let{icon:n,size:a,border:i,...o}=e,u=s()(l().input,n&&l().icon,a&&l()[a],i&&l()["border-".concat(i)],e.disabled&&l().disabled);return(0,r.jsxs)("div",{className:u,children:[n&&(0,r.jsx)(d.J,{icon:n}),(0,r.jsx)("input",{...o,ref:t})]})}),c=a.forwardRef((e,t)=>{let{icon:n,size:a,border:i,...o}=e,u=s()(l().textarea,n&&l().icon,a&&l()[a],i&&l()["border-".concat(i)],e.disabled&&l().disabled);return(0,r.jsxs)("div",{className:u,children:[n&&(0,r.jsx)(d.J,{icon:n}),(0,r.jsx)("textarea",{...o,ref:t})]})}),_=a.forwardRef((e,t)=>{let{icon:n,size:a,border:i,...o}=e,u=s()(l().select,n&&l().icon,a&&l()[a],i&&l()["border-".concat(i)],e.disabled&&l().disabled);return(0,r.jsxs)("div",{className:u,children:[n&&(0,r.jsx)(d.J,{icon:n}),(0,r.jsx)("select",{...o,ref:t,children:e.children}),(0,r.jsx)("div",{className:l().action,children:(0,r.jsx)(d.J,{icon:"caret-down-fill","aria-hidden":!0})})]})}),h=a.forwardRef((e,t)=>{let{icon:n,size:a,border:i,children:o,...d}=e,u=s()(l().checkbox,n&&l().icon,a&&l()[a],i&&l()["border-".concat(i)],e.disabled&&l().disabled,e.className);return(0,r.jsxs)("label",{className:u,children:[(0,r.jsx)("input",{...d,type:"checkbox",ref:t}),o]})})},15490:function(e,t,n){"use strict";n.d(t,{g:function(){return l},y:function(){return d}});var r=n(85893),a=n(75320),i=n.n(a),s=n(58431),o=n(36889);let l=()=>(0,r.jsx)(o.M,{"aria-busy":!0,"aria-live":"polite",children:(0,r.jsx)("div",{className:i().loading,children:(0,r.jsx)(s.Z,{children:"Loading"})})}),d=()=>(0,r.jsx)(o.M,{"aria-busy":!0,"aria-live":"polite",className:i().positionUnset,children:(0,r.jsx)("div",{className:i().loading,children:(0,r.jsx)(s.Z,{children:"Loading"})})})},37242:function(e,t,n){"use strict";n.d(t,{h:function(){return l}});var r=n(85893),a=n(80403),i=n(15490),s=n(34201),o=n(31821);let l=e=>(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(o.yG,{title:""!==e.title?e.title:"Dune",description:e.description,screenshot:e.screenshot}),(0,r.jsx)(a.h,{}),(0,r.jsx)(s.r,{size:"md",children:(0,r.jsx)(i.g,{})})]})},24643:function(e,t,n){"use strict";n.d(t,{U:function(){return o}});var r=n(82729),a=n(84937),i=n(76138);function s(){let e=(0,r._)(["\n  query WandChartStyle(\n    $queryId: Int!\n    $visualizationId: Int!\n    $chartType: String!\n    $prompt: String!\n  ) {\n    wandChartStyle(\n      queryId: $queryId\n      visualizationId: $visualizationId\n      chartType: $chartType\n      prompt: $prompt\n    ) {\n      chartType\n      chartStyle\n    }\n  }\n"]);return s=function(){return e},e}async function o(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",s=await i.bj.query({query:a.nVW,variables:{queryId:e,visualizationId:t,chartType:n,prompt:r}});return s.data.wandChartStyle}(0,n(39137).Z)(s())},92101:function(e,t,n){"use strict";n.d(t,{T1:function(){return m},W_:function(){return h},iD:function(){return p}});var r=n(82729),a=n(84937),i=n(39137),s=n(76138),o=n(18172),l=n(84512),d=n(61575),u=n(83267),c=n(35560);function _(){let e=(0,r._)(["\n  query DashboardSchedules($dashboard_id: Int!) {\n    dashboard(id: $dashboard_id) {\n      id\n      schedules {\n        id\n        cron_expression: cronExpression\n        performance\n        owned_by_customer_id: ownedByCustomerId\n        metadata {\n          updated_at: updatedAt\n        }\n      }\n    }\n  }\n"]);return _=function(){return e},e}function h(e,t){var n,r;let i=(0,a.RHv)({context:{session:e},variables:{dashboard_id:t}}),s=null===(r=i.data)||void 0===r?void 0:null===(n=r.dashboard.schedules)||void 0===n?void 0:n[0];return s&&(0,d.$K)(s.cron_expression)&&(0,l.fN)(s.cron_expression)&&(0,d.$K)(s.performance)&&(0,c.U)(s.performance)&&(0,d.$K)(s.owned_by_customer_id)?{id:s.id,cronString:s.cron_expression,performanceTier:s.performance,owner:u.Qc(s.owned_by_customer_id),updatedAt:s.metadata.updated_at}:void 0}function p(e,t){return{context:{session:e},query:a.PFK,variables:{dashboard_id:t}}}function m(e){!function(e,t){let n=s.bj.cache.readQuery({query:a.PFK,variables:{dashboard_id:e}});n&&s.bj.cache.writeQuery({query:a.PFK,variables:{dashboard_id:e},data:(0,o.ZP)(n,t)})}(e,e=>{e.dashboard.schedules=[]})}(0,i.Z)(_())},17946:function(e,t,n){"use strict";n.d(t,{C:function(){return N},m:function(){return E}});var r=n(85893),a=n(67294),i=n(45172),s=n(32037),o=n(15183),l=n(59999),d=n(28174),u=n(39561),c=n(46166),_=n(13426),h=n(57831),p=n(11163),m=n(10767),v=n.n(m),f=n(30990),y=n(85361),g=n(6661),x=n(83796),b=n(97560),j=n(54179),C=n(44914),I=n(87312),k=n(82729),w=n(39137),S=n(76138),q=n(84937);function P(){let e=(0,k._)(["\n  mutation CreateDashboard($input: CreateDashboardInput!) {\n    createDashboard(input: $input) {\n      id\n    }\n  }\n"]);return P=function(){return e},e}let D=e=>{let{dashboard:t,session:n}=e;return S.bj.mutate({mutation:q.emU,variables:{input:{name:t.name,isPrivate:t.isPrivate,slug:t.slug,userId:"user"===t.owner.type?t.owner.id:null,teamId:"team"===t.owner.type?t.owner.id:null}},context:{session:n}})};(0,w.Z)(P());let E=e=>{let[t,n]=a.useState(!1),i=()=>n(e=>!e);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s.lr,{onClick:i,size:"sm",color2:!0,children:"New dashboard"}),(0,r.jsx)(N,{...e,isOpen:t,close:i})]})};function N(e){let{isOpen:t,close:n,redirect:a,refresh:i}=e;return(0,r.jsx)(l.Vq,{label:"New dashboard",size:"sm",isOpen:t,onDismiss:n,children:(0,r.jsx)(A,{onDismiss:n,redirect:a,refresh:i})})}let A=e=>{var t,n,l;let m=(0,h.Ke)(),{push:b}=(0,p.useRouter)(),[k,w]=a.useState(""),[S,q]=a.useState(""),[P,E]=a.useState(!1),N=null!==(n=(0,y._0)())&&void 0!==n?n:{type:"user",id:m.user.id,handle:m.user.name},A=(0,C.fw)(N),U=a.useMemo(()=>S.trim()||(0,_.GD)(k),[S,k]),M=a.useMemo(()=>"https://dune.com/".concat(N.handle,"/").concat(U),[U,N]),F=(0,x.B)(N),B=(0,g.B)({isCurrentlyPrivate:!1,dashboardOwner:N,selectedOwner:N,remainingQuota:null!==(l=null===(t=F.data)||void 0===t?void 0:t.remainingQuota)&&void 0!==l?l:-1}),[O,Q]=a.useState(!1),[L,R]=a.useState(),Z=async t=>{var n,r,a;if(t.preventDefault(),k&&k.trim()){if(!(0,_.w)(U)){R(Error("The URL you entered is not valid. It can only contain lowercase letters, numbers and dashes (-)"));return}}else{R(Error("Please enter a dashboard name"));return}let s={name:k,slug:U,owner:N,isPrivate:P};Q(!0),R(void 0);try{await D({dashboard:s,session:m}),i.Z.trackEvent("Dashboard Created",{owner_id:s.owner.id,owner_type:s.owner.type}),e.redirect?await b((0,c.Yh)(N.handle,U)):null===(n=e.refresh)||void 0===n||n.call(e),e.onDismiss()}catch(e){if(e instanceof f.cA){let t=null===(a=e.graphQLErrors[0].extensions)||void 0===a?void 0:null===(r=a.internal)||void 0===r?void 0:r.error.message;t?R(z(Error(t),S,E)):R(z(e,S,E))}else R(z(e,S,E))}finally{Q(!1)}};return(0,r.jsx)("form",{onSubmit:Z,children:(0,r.jsxs)(d.Iv,{children:[(0,r.jsx)(d.Qy,{label:"Dashboard name",children:(0,r.jsxs)("div",{className:v().dashboardName,children:[(0,r.jsx)(u.oH,{placeholder:"My dashboard",value:k,onChange:e=>w(e.target.value)}),(0,r.jsx)("p",{className:v().linkPreview,title:M,children:M})]})}),(0,r.jsx)(d.Qy,{label:"Customize the URL",children:(0,r.jsx)(u.oH,{placeholder:U||"my-dashboard",value:S,onChange:e=>q(e.target.value)})}),(0,r.jsx)(d.Qy,{label:"Privacy",children:(0,r.jsx)(j.c,{position:"below-align-left",content:()=>(0,r.jsx)(I.s,{resource:"dashboard",hasAdminPermission:A}),enabled:!B,children:(0,r.jsx)(u.o2,{checked:P,onChange:e=>E(e.target.checked),border:"none",className:v().private,disabled:!B,children:"Make private"})})}),L&&!T(L.message)&&(0,r.jsx)(d.cp,{error:L}),(0,r.jsx)(d.o_,{children:(0,r.jsxs)(o.h,{children:[(0,r.jsx)(s.lr,{loading:O,type:"submit",size:"sm",color2:!0,children:e.redirect?"Save and open":"Save dashboard"}),(0,r.jsx)(s.lr,{onClick:e.onDismiss,loading:O,size:"sm",color2:!0,light:!0,children:"Cancel"})]})})]})})},z=(e,t,n)=>e.message.includes("dashboards_unique_user_slug_idx")||e.message.includes("dashboards_unique_team_slug_idx")?t.trim()?Error("Dashboard URL already taken. Please pick a different one."):Error("Dashboard name taken. Please pick a different name."):(e.message.includes("max_number_of_private_dashboards_reached")&&(n(!1),(0,b.C)(!0)),e),T=e=>e.includes("max_number_of_private_dashboards_reached")||e.includes("Reached max number of private dashboards.")},83796:function(e,t,n){"use strict";n.d(t,{B:function(){return d}});var r=n(82729),a=n(57831),i=n(84937),s=n(39137);function o(){let e=(0,r._)(["\n  query GetUserPrivateDashboards($userId: Int!) {\n    user(id: $userId) {\n      id\n      privateFields {\n        id\n        privateDashboardsCount\n      }\n    }\n  }\n"]);return o=function(){return e},e}function l(){let e=(0,r._)(["\n  query GetTeamPrivateDashboards($teamId: Int!) {\n    team(id: $teamId) {\n      id\n      memberFields {\n        privateDashboardsCount\n      }\n      serviceTier {\n        id\n        maxPrivateDashboards\n      }\n    }\n  }\n"]);return l=function(){return e},e}function d(e){var t,n,r,s;let o;let l=(0,a.Ke)(),d=(0,i.RFY)({skip:!e||"user"!==e.type,context:{session:l},fetchPolicy:"cache-and-network",variables:{userId:e.id}}),u=(0,i.a1i)({skip:!e||"team"!==e.type,context:{session:l},fetchPolicy:"cache-and-network",variables:{teamId:e.id}});if(!e)return{data:{remainingQuota:0},loading:!1};switch(e.type){case"team":{let e=null===(t=u.data)||void 0===t?void 0:t.team.serviceTier.maxPrivateDashboards,r=null===(n=u.data)||void 0===n?void 0:n.team.memberFields.privateDashboardsCount;o=null===e?1e3:void 0!==e&&void 0!==r?e-r:0;break}case"user":{let e=l.user.privateFields.serviceTier.maxPrivateDashboards,t=null===(s=d.data)||void 0===s?void 0:null===(r=s.user.privateFields)||void 0===r?void 0:r.privateDashboardsCount;o=null===e?1e3:void 0!==e&&void 0!==t?e-t:0}}let c="team"===e.type?u.loading:d.loading,_="team"===e.type?u.error:d.error;return{data:{remainingQuota:o},loading:c,error:_}}(0,s.Z)(o()),(0,s.Z)(l())},97560:function(e,t,n){"use strict";n.d(t,{C:function(){return Q},k:function(){return F}});var r=n(82729),a=n(85893),i=n(67294),s=n(45172),o=n(45850),l=n(32037),d=n(15183),u=n(59999),c=n(28174),_=n(93184),h=n(39561),p=n(23502),m=n(57831),v=n(11163),f=n(41664),y=n.n(f),g=n(46166),x=n(44914),b=n(92101),j=n(13426),C=n(10767),I=n.n(C),k=n(61451),w=n(6661),S=n(83796),q=n(57903),P=n(54179),D=n(87312),E=n(84937),N=n(30990),A=n(18035),z=n(39137),T=n(78718),U=n.n(T);function M(){let e=(0,r._)(["\n  mutation UpdateDashboard($input: UpdateDashboardInput!) {\n    updateDashboard(input: $input) {\n      id\n      name\n      isPrivate\n      isArchived\n      userId\n      teamId\n      slug\n      tags\n    }\n  }\n"]);return M=function(){return e},e}let F=e=>{let[t,n]=i.useState(!1),r=()=>n(e=>!e);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(k.z,{onClick:r,size:"M",theme:"tertiary",children:"Settings"}),(0,a.jsx)(u.Vq,{label:"Settings",size:"md",isOpen:t,onDismiss:r,children:(0,a.jsx)(B,{...e,onDismiss:r})})]})},B=e=>{var t,n;let r=(0,m.Xd)(),{replace:u}=(0,v.useRouter)(),[f,y]=i.useState(e.dashboard.name),[C,k]=i.useState(""),[q,z]=i.useState((0,p.X)(e.dashboard.tags)),[T,M]=i.useState(),[F,B]=i.useState(!1),L=e.dashboard.owner,[R,Z]=i.useState(L),[H,$]=i.useState(e.dashboard.is_private),V=(0,x.fw)(L),[G,K]=i.useState(null),W=(0,S.B)(R),J=(0,w.B)({isCurrentlyPrivate:e.dashboard.is_private,dashboardOwner:L,selectedOwner:R,remainingQuota:null!==(n=null===(t=W.data)||void 0===t?void 0:t.remainingQuota)&&void 0!==n?n:-1});(0,i.useEffect)(()=>{e.dashboard.is_private?$(J):$(!1)},[J,R]);let[Y,X]=(0,E.yZz)({context:{session:r}}),{loading:ee}=X,et=async t=>{t.preventDefault();let n=!e.dashboard.is_archived,r={...U()(e.dashboard,"id","name","slug"),userId:"user"===e.dashboard.owner.type?e.dashboard.owner.id:null,teamId:"team"===e.dashboard.owner.type?e.dashboard.owner.id:null,tags:(0,p.k)(q),repoLink:e.dashboard.repo_link,isPrivate:e.dashboard.is_private,isArchived:n};M(void 0),B(!0);try{var a;await Y({variables:{input:r}}),s.Z.trackEvent("Dashboard ".concat(n?"Archived":"Unarchived"),{owner_id:e.dashboard.owner.id,owner_type:e.dashboard.owner.type}),null===(a=e.refresh)||void 0===a||a.call(e).then(()=>{e.onDismiss()})}catch(e){M(e)}finally{B(!1)}},en=G||T,er=ee||F;return(0,a.jsx)("form",{onSubmit:t=>{if(t.preventDefault(),""!==C&&!(0,j.w)(C)){K(Error("The URL you entered is not valid. It can only contain lowercase letters, numbers and dashes (-)"));return}let n={id:e.dashboard.id,name:f,userId:"user"===R.type?R.id:null,teamId:"team"===R.type?R.id:null,isPrivate:H,slug:""!==C?C:e.dashboard.slug,tags:(0,p.k)(q),repoLink:e.dashboard.repo_link},a=!(e.dashboard.owner.type===R.type&&e.dashboard.owner.id===R.id);Y({variables:{input:n}}).then(()=>{var t,i;if(s.Z.trackEvent(a?"Dashboard Ownership Changed":"Dashboard Settings Updated",{dashboard_id:n.id,owner_id:R.id,owner_type:R.type}),a&&((0,b.T1)(n.id),e.onEditDashboardSettings()),H&&"user"===R.type&&R.id!==(null==r?void 0:null===(t=r.user)||void 0===t?void 0:t.id)){u((0,A.Y)(R)+"?tab=dashboards");return}null===(i=e.refresh)||void 0===i||i.call(e).then(()=>{e.onDismiss()}),(e.dashboard.owner.handle!==R.handle||""!==C)&&u((0,g.C_)(R.handle,""!==C?C:e.dashboard.slug))}).catch(t=>{if(t instanceof N.cA){var n,r;let a=null===(r=t.graphQLErrors[0])||void 0===r?void 0:null===(n=r.extensions)||void 0===n?void 0:n.code;if("dashboards_unique_slug"===a){K(Error("A dashboard with the URL /".concat(e.dashboard.slug," already exists. Please choose a different URL.")));return}if(O(a)){$(!1),Q(V);return}}K(t)})},children:(0,a.jsxs)(c.Iv,{children:[(0,a.jsx)(c.Qy,{label:"Dashboard title",children:(0,a.jsx)(h.oH,{value:f,onChange:e=>y(e.target.value),required:!0})}),(0,a.jsx)(c.Qy,{label:"Customize the URL",children:(0,a.jsx)(h.oH,{placeholder:e.dashboard.slug,value:C,onChange:e=>k(e.target.value)})}),(0,a.jsx)(_.O,{label:"Dashboard tags",tags:q,onChange:z}),V&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(o.Z,{initialOwner:L,owner:R,setOwner:Z}),(0,a.jsx)(c.Qy,{label:"Privacy",children:(0,a.jsx)(P.c,{position:"below-align-left",content:()=>(0,a.jsx)(D.s,{resource:"dashboard",hasAdminPermission:V}),enabled:!J,children:(0,a.jsx)(h.o2,{checked:H,onChange:e=>$(e.target.checked),border:"none",className:I().private,disabled:!J,children:"Make private"})})})]}),en&&!O(en.message)&&(0,a.jsx)(c.cp,{error:en}),(0,a.jsx)("hr",{}),(0,a.jsxs)(c.o_,{children:[(0,a.jsx)(d.h,{children:(0,a.jsx)(l.lr,{onClick:et,disabled:er,className:I().archiveButton,size:"sm",children:e.dashboard.is_archived?"Unarchive":"Archive"})}),(0,a.jsxs)(d.h,{children:[(0,a.jsx)(l.lr,{type:"submit",loading:er,disabled:!f.trim(),color2:!0,size:"sm",children:"Save"}),(0,a.jsx)(l.lr,{onClick:e.onDismiss,disabled:er,color2:!0,light:!0,size:"sm",children:"Cancel"})]})]})]})})},O=e=>e.includes("max_number_of_private_dashboards_reached")||e.includes("Reached max number of private dashboards.");function Q(e){return e?(0,q.Bh)({level:"error",title:"You've reached the private dashboard limit",actions:(0,a.jsx)(y(),{href:"/pricing",target:"_blank",children:"Upgrade plan"})}):(0,q.Bh)({level:"error",title:"Private dashboard limit reached",description:"Please reach out to your team admin to manage it."})}(0,z.Z)(M())},49728:function(e,t,n){"use strict";n.d(t,{Je:function(){return s},R7:function(){return o},eJ:function(){return i}});var r=n(84077),a=n(61575);function i(){let{searchString:e,setSearchString:t}=function(){let[e,t]=(0,r.Z)("q","");return{searchString:e,setSearchString:t}}();return{value:e,setState:t}}function s(e){return(0,a.HH)(e)?{query:e}:void 0}function o(e){return{query:e}}},95260:function(e,t,n){"use strict";n.d(t,{M:function(){return a}});var r=n(76138);function a(){r.bj.cache.evict({id:"ROOT_QUERY",fieldName:"catalogTables"}),r.bj.cache.gc()}},42120:function(e,t,n){"use strict";n.d(t,{KU:function(){return q},lF:function(){return U},OS:function(){return $},I8:function(){return Q},NZ:function(){return L},OA:function(){return O},UT:function(){return B},L$:function(){return F},yi:function(){return T},XU:function(){return X},_3:function(){return H},f8:function(){return V},M2:function(){return ea},dE:function(){return et},QJ:function(){return el},Lf:function(){return eo},OW:function(){return K},EK:function(){return J},cV:function(){return Y},yU:function(){return ee},dc:function(){return en},ws:function(){return es},dN:function(){return er},hC:function(){return W},Rr:function(){return ei},Jm:function(){return Z},Yt:function(){return R},R8:function(){return G},gi:function(){return M},_r:function(){return ec},Ss:function(){return ed},Bb:function(){return eu},Xv:function(){return z}});var r=n(85893),a=n(23279),i=n.n(a),s=n(67294),o=n(4377),l=n(20426),d=n(44682),u=n(84937),c=n(37242),_=n(91813),h=n(36568),p=n(50292),m=n(79478),v=n(93836),f=n(75546),y=n(57831);let g="dark",x=e=>{switch(e){case"light":case"dark":return e;default:return g}};var b=n(11163),j=n.n(b),C=n(44914),I=n(84899),k=n(82876),w=n(30990);let S=(0,d.kr)({dispatch:()=>{}}),q=e=>{let t={session:e.session},n=(0,u.ZoE)({variables:{orderBy:[{key:"name",direction:u.eQH.Asc}]},context:t}),a=(0,m.t6)(e.query,e.apiKey);if(a.error instanceof w.cA){var i,s;if(null===(s=a.error.graphQLErrors[0])||void 0===s?void 0:null===(i=s.extensions)||void 0===i?void 0:i.code.includes("not_authorized"))return(0,r.jsx)(h.NotFoundPage,{})}if(a.error instanceof _.d)return(0,r.jsx)(h.NotFoundPage,{});if(a.error||n.error)throw a.error||n.error;return n.data&&(!e.query||a.data)?(0,r.jsx)(P,{session:e.session,activeContext:e.activeContext,visual:e.visual,apiKey:e.apiKey,prefillCode:e.prefillCode,datasets:n.data,query:a.data,refresh:a.mutate,children:e.children}):(0,r.jsx)(c.h,{})},P=e=>{var t;let[n,a]=s.useReducer(o.Cg,e,D),i=(0,v.F2)(n.query.parameters),l=(0,f.b)(null===(t=e.query)||void 0===t?void 0:t.id,i.appliedMerged,{can_refresh:!1,apiKey:e.apiKey}),d=s.useCallback(async()=>{let t=await e.refresh();t&&a({type:"replaceQuery",query:t})},[e.refresh]);return s.useEffect(()=>{a({type:"replaceResult",result:l})},[l]),s.useEffect(()=>{a({type:"replaceRefresh",refresh:d})},[d]),(0,r.jsx)(S.Provider,{value:{editor:n,parameters:i,dispatch:a},children:e.children})},D=e=>{var t;let n=(0,p.v4)(o.x),r=!!n&&JSON.parse(n),a=(0,p.v4)(o.V),i=!!a&&JSON.parse(a),s=(0,p.v4)(o.cp),l=x(s);return{enableCodeMirror:r,autosuggest:i,theme:l,datasets:e.datasets,query:null!==(t=e.query)&&void 0!==t?t:E(e.datasets,e.activeContext,e.prefillCode),visualIndex:N(e.query,e.visual),selection:"",changed:!1}},E=(e,t,n)=>{var r;if(!t)throw Error("No active context provided");return{dataset_id:function(){var t;let n=j().query.d,r=n?Number(n):void 0,a=null===(t=e.datasets.datasets.find(e=>e.id===r&&!(0,I.r)(e.id)))||void 0===t?void 0:t.id;return"number"==typeof a?a:e.datasets.datasets[o.G6].id}(),owner:{type:t.type,id:t.id,name:t.name,handle:t.handle,profile_image_url:null!==(r=t.profile_image_url)&&void 0!==r?r:null},name:o.rg,description:"",query:null!=n?n:"",version:0,matview_id:null,num_favorites_in_period:0,is_favorite:!1,is_private:!1,is_archived:!1,is_temp:!1,visualizations:[],parameters:[]}},N=(e,t)=>{if(!(null==e?void 0:e.visualizations)||!t)return o.GO;let n=e.visualizations.findIndex(e=>e.id===t);return n>=0?n:o.GO},A=i()(e=>{(0,l.Vb)(e.visual.id,e.visual,e.session).then(t=>{var n;(null===(n=t.data)||void 0===n?void 0:n.updateVisualization)||e.onFailure("Unknown error"),e.onSuccess()}).catch(t=>{e.onFailure(t)})},500),z=()=>{let e=(0,y.Xd)(),t=ec(),[n,r]=s.useState(t),a=F(),i=e=>{n&&a({type:"replaceVisual",visual:n}),a({type:"replaceLastVisualUpdatingState",visualUpdatingState:{isLoading:!1,error:e}})};return t=>{a({type:"replaceLastVisualUpdatingState",visualUpdatingState:{isLoading:!0}}),a({type:"replaceVisual",visual:t}),A({visual:t,session:e,onFailure:i,onSuccess:()=>{r(t),a({type:"replaceLastVisualUpdatingState"})}})}},T=()=>(0,d.Sz)(S,e=>{let{editor:t}=e;return(null==t?void 0:t.enableCodeMirror)||!1}),U=()=>(0,d.Sz)(S,e=>{let{editor:t}=e;return(null==t?void 0:t.autosuggest)||!1}),M=()=>{let e=T(),{mode:t}=(0,k.v)(),n=(0,d.Sz)(S,e=>{let{editor:t}=e;return(null==t?void 0:t.theme)||g});return e?t:n},F=()=>(0,d.Sz)(S,e=>{let{dispatch:t}=e;return t}),B=()=>(0,d.Sz)(S,e=>{let{editor:t}=e;return(null==t?void 0:t.datasets.datasets)||{datasets:[]}}),O=()=>(0,d.Sz)(S,e=>{let{editor:t}=e;return t?t.datasets.datasets.datasets.find(e=>e.id===t.query.dataset_id):void 0}),Q=()=>(0,d.Sz)(S,e=>{let{editor:t}=e;return null==t?void 0:t.helpers}),L=()=>(0,d.Sz)(S,e=>{let{editor:t}=e;return(null==t?void 0:t.selection)||""}),R=()=>(0,d.Sz)(S,e=>{let{editor:t}=e;return null==t?void 0:t.result}),Z=()=>(0,d.Sz)(S,e=>{let{editor:t}=e;return null==t?void 0:t.refresh}),H=()=>(0,d.Sz)(S,e=>{let{parameters:t}=e;return t}),$=()=>(0,d.Sz)(S,e=>{let{editor:t}=e;return(null==t?void 0:t.changed)||!1}),V=()=>(0,d.Sz)(S,e=>{let{editor:t}=e;return null==t?void 0:t.query}),G=()=>(0,d.Sz)(S,e=>{let{editor:t}=e,n=null==t?void 0:t.query;if(n&&"id"in n&&"created_at"in n&&"updated_at"in n)return n}),K=()=>(0,d.Sz)(S,e=>{let{editor:t}=e;if((null==t?void 0:t.query)&&"id"in t.query)return t.query.id}),W=()=>(0,d.Sz)(S,e=>{let{editor:t}=e;return null==t?void 0:t.query.is_temp}),J=()=>(0,d.Sz)(S,e=>{let{editor:t}=e;return null==t?void 0:t.query.is_archived}),Y=()=>(0,d.Sz)(S,e=>{let{editor:t}=e;return null==t?void 0:t.query.matview_id}),X=()=>(0,d.Sz)(S,e=>{let{editor:t}=e;return null==t?void 0:t.lastVisualUpdatingState}),ee=()=>(0,d.Sz)(S,e=>{let{editor:t}=e;return(null==t?void 0:t.query.name)||""}),et=()=>(0,d.Sz)(S,e=>{var t;let{editor:n}=e;return(null==n?void 0:null===(t=n.query)||void 0===t?void 0:t.description)||""}),en=()=>(0,d.Sz)(S,e=>{var t;let{editor:n}=e;return null==n?void 0:null===(t=n.query)||void 0===t?void 0:t.owner}),er=()=>(0,d.Sz)(S,e=>{var t,n;let{editor:r}=e;return null!==(n=null==r?void 0:null===(t=r.query)||void 0===t?void 0:t.tags)&&void 0!==n?n:[]}),ea=()=>(0,d.Sz)(S,e=>{let{editor:t}=e;return(null==t?void 0:t.query.query)||""}),ei=()=>(0,d.Sz)(S,e=>{var t;let{editor:n}=e;return null!==(t=null==n?void 0:n.query.version)&&void 0!==t?t:0}),es=()=>!!K(),eo=()=>{let e=en();return(0,C.l9)(e)},el=()=>{let e=en();return(0,C.fw)(e)},ed=()=>(0,d.Sz)(S,e=>{let{editor:t}=e;return(null==t?void 0:t.visualIndex)||o.GO}),eu=()=>(0,d.Sz)(S,e=>{var t;let{editor:n}=e;return null!==(t=null==n?void 0:n.query.visualizations)&&void 0!==t?t:[]}),ec=()=>(0,d.Sz)(S,e=>{var t;let{editor:n}=e;return null==n?void 0:null===(t=n.query.visualizations)||void 0===t?void 0:t[n.visualIndex]})},20426:function(e,t,n){"use strict";n.d(t,{AU:function(){return j},Px:function(){return k},RL:function(){return I},Vb:function(){return C},_y:function(){return b},dm:function(){return w},rI:function(){return S},rq:function(){return g}});var r=n(82729),a=n(84937),i=n(76138),s=n(39137);function o(){let e=(0,r._)(["\n  fragment Visualization on Visualization {\n    id\n    type\n    name\n    description\n    options\n    createdAt\n    query {\n      id\n      name\n      description\n      showWatermark\n      parameters\n      datasetId\n      isTemp\n      isPrivate\n      isArchived\n      tags\n      ownerFields {\n        query\n        version\n      }\n      user {\n        id\n        name\n        profileImageUrl\n      }\n      team {\n        id\n        name\n        handle\n        profileImageUrl\n      }\n    }\n  }\n"]);return o=function(){return e},e}function l(){let e=(0,r._)(["\n  mutation InsertVisual($visual: CreateVisualizationInput!) {\n    createVisualization(input: $visual) {\n      ...Visualization\n    }\n  }\n  ","\n"]);return l=function(){return e},e}function d(){let e=(0,r._)(["\n  mutation CreateQuery($query: CreateQueryInput!) {\n    createQuery(query: $query) {\n      id\n    }\n  }\n"]);return d=function(){return e},e}function u(){let e=(0,r._)(["\n  mutation UpdateQuery($query: UpdateQueryInput!) {\n    updateQuery(input: $query) {\n      id\n    }\n  }\n"]);return u=function(){return e},e}function c(){let e=(0,r._)(["\n  mutation EditVisual($input: UpdateVisualizationInput!) {\n    updateVisualization(input: $input) {\n      id\n      type\n      name\n      description\n      options\n      createdAt\n    }\n  }\n"]);return c=function(){return e},e}function _(){let e=(0,r._)(["\n  mutation ForkQuery($forkTo: ContextOwner!, $queryId: Int!) {\n    forkQuery(forkTo: $forkTo, queryId: $queryId) {\n      id\n      name\n      description\n      showWatermark\n      parameters\n      datasetId\n      isTemp\n      isPrivate\n      isArchived\n      tags\n      createdAt\n      forkCount\n      hasStarred\n      isTrending\n      starCount\n      updatedAt\n      teamId\n      userId\n      ownerFields {\n        id\n        query\n        version\n      }\n      user {\n        id\n        name\n        profileImageUrl\n      } \n      team {\n        id\n        name\n        handle\n        profileImageUrl\n      }\n    }\n  }\n"]);return _=function(){return e},e}function h(){let e=(0,r._)(["\n  mutation ExportCSV(\n    $executionId: String!\n    $queryId: Int!\n    $parameters: [ExportCsvParameterInput!]!\n    $downloadFor: ContextOwner!\n  ) {\n    exportCsv(\n      executionId: $executionId\n      queryId: $queryId\n      parameters: $parameters\n      downloadFor: $downloadFor\n    ) {\n      url\n    }\n  }\n"]);return h=function(){return e},e}function p(){let e=(0,r._)(["\n  mutation DeleteVisualization($id: Int!) {\n    deleteVisualization(id: $id) {\n      ok\n    }\n  }\n"]);return p=function(){return e},e}function m(){let e=(0,r._)(["\n  query ListDatasets ($orderBy: [OrderByInput!]) {\n    datasets(orderBy: $orderBy) {\n      datasets {\n        id\n        name\n        type\n      }\n    }\n  }\n"]);return m=function(){return e},e}function v(){let e=(0,r._)(["\n  mutation RestoreQuery($queryEventId: String!) {\n    restoreQuery(queryEventId: $queryEventId) {\n      id\n    }\n  }\n"]);return v=function(){return e},e}function f(){let e=(0,r._)(["\n  mutation UpsertQueryEventMetadata(\n    $queryEventId: String!\n    $metadata: UpsertQueryEventMetadataInput!\n  ) {\n    upsertQueryEventMetadata(\n      queryEventId: $queryEventId\n      metadata: $metadata\n    ) {\n      queryEventId\n      userId\n      name\n      description\n      createdAt\n      updatedAt\n    }\n  }\n"]);return f=function(){return e},e}function y(){let e=(0,r._)(["\n  query GetQueryEvent($queryEventId: String!) {\n    queryEvent(queryEventId: $queryEventId) {\n      id\n      userId\n      queryVersion\n      from\n      to\n      type\n      createdAt\n      metadata {\n        name\n        description\n      }\n    }\n  }\n"]);return y=function(){return e},e}async function g(e,t){var n;return"id"in e?await b({...e,userId:"user"===e.owner.type?e.owner.id:null,teamId:"team"===e.owner.type?e.owner.id:null,tags:null!==(n=e.tags)&&void 0!==n?n:[],isPrivate:e.is_private,isArchived:e.is_archived,datasetId:e.dataset_id,isTemp:e.is_temp},t):await x(e,t)}async function x(e,t){var n;let r={query:{name:e.name,description:e.description,isTemp:!0,isPrivate:e.is_private,datasetId:e.dataset_id,query:e.query,parameters:e.parameters,userId:"user"===e.owner.type?e.owner.id:null,teamId:"team"===e.owner.type?e.owner.id:null}},s=await i.bj.mutate({mutation:a.Yo9,variables:r,context:{session:t},fetchPolicy:"no-cache"});if(!(null===(n=s.data)||void 0===n?void 0:n.createQuery.id))throw Error("Query creation failed");return s.data.createQuery.id}async function b(e,t){var n,r;let s={query:{id:e.id,name:e.name,description:null!==(r=e.description)&&void 0!==r?r:"",isTemp:e.isTemp,isPrivate:e.isPrivate,isArchived:e.isArchived,datasetId:e.datasetId,query:e.query,parameters:e.parameters,tags:e.tags,version:e.version,userId:e.userId?e.userId:null,teamId:e.teamId?e.teamId:null}},o=await i.bj.mutate({mutation:a.xeC,variables:s,context:{session:t},fetchPolicy:"no-cache"});if(!(null===(n=o.data)||void 0===n?void 0:n.updateQuery.id))throw Error("Query update failed");return o.data.updateQuery.id}let j=e=>{var t;return(null==e?void 0:null===(t=e.extensions)||void 0===t?void 0:t.key)==="query_has_changed"},C=async(e,t,n)=>{var r;return await i.bj.mutate({mutation:D,variables:{input:{id:e,type:t.type,options:t.options,name:t.name,description:null!==(r=t.description)&&void 0!==r?r:null}},context:{session:n},fetchPolicy:"no-cache"})},I=async(e,t,n)=>await i.bj.mutate({mutation:P,variables:{visual:{queryId:e,name:t.name,type:t.type,options:t.options}},context:{session:n},fetchPolicy:"no-cache"}),k=async(e,t)=>await i.bj.mutate({mutation:E,variables:{forkTo:{type:"user",id:t.user.id},queryId:e},context:{session:t},fetchPolicy:"no-cache"}),w=async(e,t)=>await i.bj.mutate({mutation:A,variables:{id:e},context:{session:t},fetchPolicy:"no-cache"}),S=async e=>await i.bj.mutate({mutation:N,variables:{executionId:e.executionId,queryId:e.queryId,parameters:e.parameters,downloadFor:e.downloadFor},context:{session:e.session},fetchPolicy:"no-cache"}),q=(0,s.Z)(o()),P=(0,s.Z)(l(),q);(0,s.Z)(d()),(0,s.Z)(u());let D=(0,s.Z)(c()),E=(0,s.Z)(_()),N=(0,s.Z)(h()),A=(0,s.Z)(p());(0,s.Z)(m()),(0,s.Z)(v()),(0,s.Z)(f()),(0,s.Z)(y())},4377:function(e,t,n){"use strict";n.d(t,{Cg:function(){return d},G6:function(){return m},GO:function(){return p},V:function(){return c},cp:function(){return _},rg:function(){return h},x:function(){return u}});var r=n(18172),a=n(50292),i=n(57557),s=n.n(i),o=n(11163),l=n.n(o);let d=(e,t)=>{switch(t.type){case"replaceQuery":return(0,r.ZP)(e,e=>{e.query=t.query});case"replaceQueryCode":return(0,r.ZP)(e,e=>{e.query.query=t.code,e.changed=!0});case"replaceQueryParameters":return(0,r.ZP)(e,e=>{e.query.parameters=t.parameters,e.changed=!0});case"replaceQueryCodeAndParameters":return(0,r.ZP)(e,e=>{e.query.query=t.code,e.query.parameters=t.parameters,e.changed=!0});case"replaceCodeHelpers":return(0,r.ZP)(e,e=>{e.helpers=t.helpers});case"replaceCodeSelection":return(0,r.ZP)(e,e=>{e.selection=t.code});case"replaceOwner":return(0,r.ZP)(e,e=>{e.query.owner=t.owner});case"replaceResult":return(0,r.ZP)(e,e=>{e.result=t.result});case"replaceRefresh":return(0,r.ZP)(e,e=>{e.refresh=t.refresh});case"selectDataset":return l().push({query:{...s()(l().query,["category","namespace","table","contract","abi","blockchain","blockchains"]),d:t.id}},void 0,{shallow:!0}),(0,r.ZP)(e,e=>{e.query.dataset_id=t.id,e.changed=!0});case"selectVisual":return(0,r.ZP)(e,e=>{e.visualIndex=t.index});case"replaceLastVisualUpdatingState":return(0,r.ZP)(e,e=>{e.lastVisualUpdatingState=t.visualUpdatingState});case"appendVisual":return(0,r.ZP)(e,e=>{e.query.visualizations?e.query.visualizations.push(t.visual):e.query.visualizations=[t.visual],e.visualIndex=e.query.visualizations.length-1});case"replaceVisual":return(0,r.ZP)(e,e=>{e.query.visualizations?e.query.visualizations[e.visualIndex]=t.visual:e.query.visualizations=[t.visual]});case"removeVisual":return(0,r.ZP)(e,n=>{var r,a;n.query.visualizations=null!==(r=n.query.visualizations)&&void 0!==r?r:[];let i=null!==(a=e.query.visualizations)&&void 0!==a?a:[],s=i.findIndex(e=>e===t.visual);n.query.visualizations.splice(s,1),n.visualIndex=p});case"saveQuery":return(0,r.ZP)(e,e=>{e.changed=!1});case"toggleEnableCodeMirror":return(0,r.ZP)(e,t=>{let n=!e.enableCodeMirror;(0,a.EB)(u,JSON.stringify(n)),t.enableCodeMirror=n});case"toggleAutosuggest":return(0,r.ZP)(e,t=>{let n=!e.autosuggest;(0,a.EB)(c,JSON.stringify(n)),t.autosuggest=n});case"selectTheme":return(0,r.ZP)(e,e=>{(0,a.EB)(_,t.theme),e.theme=t.theme})}},u="editor-state-enable-codemirror",c="editor-state-autosuggest",_="editor-state-theme",h="New Query",p=0,m=0},14800:function(e,t,n){"use strict";n.d(t,{y9:function(){return q},sx:function(){return E},DM:function(){return P}});var r=n(85893),a=n(40802),i=n(11163),s=n(67294),o=n(57903),l=n(24643),d=n(57831),u=n(61451),c=n(27444),_=n(85953),h=n(10398),p=n(51818),m=n(47730),v=n(82729),f=n(39137),y=n(84937),g=n(30205);function x(){let e=(0,v._)(["\nmutation TrackFirstVisualizationCreated($userId: Int!) {\n  trackFirstVisualizationCreated(userId: $userId) {\n    dismissedAt\n    querySavedAt\n    userId\n    visualizationCreatedAt\n    visualizationSharedAt\n  }\n}\n"]);return x=function(){return e},e}(0,f.Z)(x());var b=n(24426),j=n(45172),C=n(61575),I=n(42120),k=n(20426),w=n(48197),S=n.n(w);let q=e=>{let t=(0,I.L$)(),n=(0,d.Xd)(),v=(0,I.OW)(),[f,x]=(0,s.useState)("column"),[w,q]=(0,s.useState)(!1),D=(0,i.useRouter)(),[E]=function(e){let t=(0,g.Z)(e),[n,r]=(0,y.WQe)({context:{session:e},variables:{userId:e.user.id}}),a=(null==e?void 0:e.user)!==void 0&&void 0!==t&&null===t.visualizationCreatedAt;return[a?n:()=>{},r]}(n),[N,A]=(0,s.useState)(!1),[z,T]=(0,s.useState)(""),[U,M]=(0,s.useState)(!1),F=(0,b.N)("editor-chart-styler"),B=(0,I._3)(),O=void 0!==B&&B.merged.length>0,Q=async()=>{var t,r,a;if(!v)throw Error("Cannot create visualisation with no queryId");let i=P(f,null===(r=e.result)||void 0===r?void 0:null===(t=r.matrix)||void 0===t?void 0:t.columns),s=await (0,k.RL)(v,i,n),o=(0,C.bK)(null===(a=s.data)||void 0===a?void 0:a.createVisualization);if(void 0===o)throw Error("No visualization returned from server");return E(),j.Z.trackEvent("Visualization Created",{visualization_type:f}),o},L=async()=>{if(void 0!==v){q(!0);try{let e=await Q();t({type:"appendVisual",visual:e}),D.replace({query:{...D.query,slug:[v,e.id]}})}catch(e){(0,o.Bh)({level:"error",title:"Error creating visualization"}),a.Tb(e)}finally{q(!1)}}},R=async()=>{if(void 0!==v){M(!0);try{let e=await Q(),{chartType:r,chartStyle:a}=await (0,l.U)(v,e.id,f,z);e.type=r,e.options=a,e.name=z,await (0,k.Vb)(e.id,e,n),t({type:"appendVisual",visual:e}),D.replace({query:{...D.query,slug:[v,e.id]}}),j.Z.trackEvent("Editor Chart Styler Success",{query_id:v})}catch(e){(0,o.Bh)({level:"error",title:"Error generating visualization"}),a.Tb(e),j.Z.trackEvent("Editor Chart Styler Error",{query_id:v,error:e})}finally{M(!1)}}};return(0,r.jsxs)("div",{className:S().container,children:[(0,r.jsx)("div",{children:"Select visualization type"}),(0,r.jsxs)("div",{className:S().row,children:[(0,r.jsxs)(p.j,{name:"visualization-type",size:"M",type:"contained",value:f,onChange:e=>x(e.target.value),className:S().customSelectBox,children:[(0,r.jsxs)("optgroup",{label:"Chart visualizations",children:[(0,r.jsx)("option",{value:"column",children:"Bar chart"}),(0,r.jsx)("option",{value:"area",children:"Area chart"}),(0,r.jsx)("option",{value:"scatter",children:"Scatter chart"}),(0,r.jsx)("option",{value:"line",children:"Line chart"}),(0,r.jsx)("option",{value:"pie",children:"Pie chart"})]}),(0,r.jsxs)("optgroup",{label:"Other visualizations",children:[(0,r.jsx)("option",{value:"counter",children:"Counter"}),(0,r.jsx)("option",{value:"table",children:"Table"})]})]}),(0,r.jsx)(u.z,{type:"button",size:"M",theme:"primary",disabled:w||U,loading:w,onClick:L,children:"Add visualization"}),F&&(0,r.jsx)(m.u,{label:"Cannot be used with parameters",position:"above-center",hidden:!O,children:(0,r.jsxs)(u.z,{type:"button",size:"M",theme:"primary",disabled:O||w||U,onClick:()=>A(e=>!e),children:[(0,r.jsx)(_.IconSparkle,{}),"Generate with Dune AI"]})})]}),!O&&N&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{children:"Give your chart a title to help Dune AI pick axes"}),(0,r.jsxs)("div",{className:S().row,children:[(0,r.jsx)(h.U,{size:"M",style:"contained",placeholder:"Chart title",value:z,onChange:e=>T(e.target.value)}),(0,r.jsxs)(u.z,{type:"button",size:"M",theme:"primary",disabled:w||U,loading:U,onClick:R,children:[(0,r.jsx)(c.IconMagicWand,{}),"Run"]})]})]})]})},P=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"column":case"area":case"scatter":case"line":case"pie":return A(e,t);case"counter":return N(t);case"table":return D();default:throw Error("unknown visual type: ".concat(e))}},D=()=>({type:"table",name:"Table",options:{}}),E=()=>({type:"table",name:"Query results",options:{}}),N=e=>{let t={type:"counter",name:"Counter",options:{rowNumber:1}};return e[0]&&(t.options.counterColName=e[0].name),t},A=(e,t)=>{var n;let r={type:"chart",name:"Chart",options:{globalSeriesType:e,sortX:!0,reverseX:!1,xAxis:{type:"-"},yAxis:[{type:"linear"}],legend:{enabled:!0},numberFormat:"0,0",numberFormatRightYAxisSeries:"0,0",columnMapping:{},seriesOptions:{},valuesOptions:{}}},a=null!==(n=t.find(e=>"datetime"===e.type))&&void 0!==n?n:t[0],i=a&&t[t.indexOf(a)+1];return a&&(r.options.columnMapping[a.name]="x"),i&&(r.options.columnMapping[i.name]="y"),r}},12069:function(e,t,n){"use strict";n.d(t,{$:function(){return _}});var r=n(82729),a=n(57831),i=n(43720),s=n(39137),o=n(84937),l=n(46367),d=n(36458);function u(){let e=(0,r._)(["\n  query GetTeamUsage($teamId: Int!) {\n    team(id: $teamId) {\n      id\n      memberFields {\n        id\n        privateDashboardsCount\n        privateQueriesCount\n        maxOverageCents\n      }\n      serviceTier {\n        id\n        name\n        baseMonthlyPriceDollarsCents\n        maxPrivateDashboards\n        maxPrivateQueries\n        nanocreditsCostCents\n      }\n    }\n\n    teamBillableUsage(id: $teamId) {\n      creditsIncluded\n      creditsUsed\n      extraCreditsCents\n      maxExtraCreditsCents\n      bytesUsed\n      bytesAllowed\n      alertsUsed\n      maxAlerts\n    }\n  }\n"]);return u=function(){return e},e}let c=i.MAX_VALUE.high,_=e=>{var t,n,r,i,s,u,_,h,p,m,v,f,y,g,x,b,j,C;let I=(0,a.Ke)(),{data:k}=(0,o._ah)({variables:{teamId:e},context:{session:I},fetchPolicy:"cache-and-network"}),w=null==k?void 0:k.team.serviceTier;if(!(0,l.n)(w))return null;let S=null==k?void 0:k.team.memberFields,q=null!==(_=null==k?void 0:k.teamBillableUsage.creditsIncluded)&&void 0!==_?_:null,P=null!==(h=null==k?void 0:k.teamBillableUsage.creditsUsed)&&void 0!==h?h:0,D=(0,l.n)(q)&&(0,l.n)(S)&&(0,l.n)(S.maxOverageCents)&&(0,l.n)(null==w?void 0:w.nanocreditsCostCents)?Math.floor(q+S.maxOverageCents/w.nanocreditsCostCents/1e9):null;return{usage:{maxPrivateQueries:null!==(p=w.maxPrivateQueries)&&void 0!==p?p:c,maxPrivateDashboards:null!==(m=w.maxPrivateDashboards)&&void 0!==m?m:c,maxCredits:q,maxCreditsWithOverage:D,usedCredits:P,extraCreditsCents:null!==(v=null==k?void 0:null===(t=k.teamBillableUsage)||void 0===t?void 0:t.extraCreditsCents)&&void 0!==v?v:0,maxExtraCreditsCents:null!==(f=null==k?void 0:null===(n=k.teamBillableUsage)||void 0===n?void 0:n.maxExtraCreditsCents)&&void 0!==f?f:null,privateDashboardsCount:null!==(y=null==S?void 0:S.privateDashboardsCount)&&void 0!==y?y:0,privateQueriesCount:null!==(g=null==S?void 0:S.privateQueriesCount)&&void 0!==g?g:0,creditsOverageProtectionDisabled:(null==S?void 0:S.maxOverageCents)===null,bytesUsed:null!==(x=null==k?void 0:null===(r=k.teamBillableUsage)||void 0===r?void 0:r.bytesUsed)&&void 0!==x?x:new d.O(0),bytesAllowed:null!==(b=null==k?void 0:null===(i=k.teamBillableUsage)||void 0===i?void 0:i.bytesAllowed)&&void 0!==b?b:null,alertsUsed:null!==(j=null==k?void 0:null===(s=k.teamBillableUsage)||void 0===s?void 0:s.alertsUsed)&&void 0!==j?j:0,maxAlerts:null!==(C=null==k?void 0:null===(u=k.teamBillableUsage)||void 0===u?void 0:u.maxAlerts)&&void 0!==C?C:null}}};(0,s.Z)(u())},24478:function(e,t,n){"use strict";function r(e,t){let n=new Promise(e=>setTimeout(()=>e(void 0),t));return Promise.all([n,e()]).then(e=>e[1])}n.d(t,{X:function(){return r}})},38723:function(e,t,n){"use strict";n.d(t,{N:function(){return v},T:function(){return m}});var r=n(82729),a=n(73445),i=n(57831),s=n(67294),o=n(76138),l=n(84937),d=n(40802),u=n(11163),c=n(39137),_=n(46367);function h(){let e=(0,r._)(["\n  mutation CreateUserCheckoutSession($redirectPath: String!) {\n    createCheckoutSession(redirectPath: $redirectPath) {\n      checkoutSessionId\n    }\n  }\n"]);return h=function(){return e},e}function p(){let e=(0,r._)(["\n  mutation CreateTeamCheckoutSession($teamId: Int!, $redirectPath: String!) {\n    createTeamCheckoutSession(\n      id: $teamId\n      redirectPath: $redirectPath\n    ) {\n      checkoutSessionId\n    }\n  }\n"]);return p=function(){return e},e}function m(e){let{asPath:t}=(0,u.useRouter)(),n=(0,i.kP)();(0,s.useEffect)(()=>{if(!n)return;let r=f.getState(),a="init"===r.status||r.redirectPath!==t;a&&x(n,e,t)},[n,t]);let r=(0,s.useCallback)(()=>{n&&x(n,e,t)},[n,t]);return[y(),r]}function v(){let{asPath:e}=(0,u.useRouter)(),t=(0,i.kP)();(0,s.useEffect)(()=>{if(!t)return;let n=f.getState(),r="init"===n.status||n.redirectPath!==e;r&&g(t,e)},[t,e]);let n=(0,s.useCallback)(()=>{t&&g(t,e)},[t,e]);return[y(),n]}let f=(0,a.Ue)(()=>({status:"init"})),y=f;async function g(e,t){"loading"!==f.getState().status&&(f.setState({status:"loading",redirectPath:t}),o.bj.mutate({mutation:l.SF0,variables:{redirectPath:t},context:{session:e}}).then(e=>{if((0,_.n)(e.data))return e.data.createCheckoutSession.checkoutSessionId;throw Error("CreateUserCheckoutSession returned no data")}).then(e=>{f.setState({status:"success",checkoutSessionId:e})},e=>{f.setState({status:"error"}),d.Tb(e)}))}async function x(e,t,n){"loading"!==f.getState().status&&(f.setState({status:"loading",redirectPath:n}),o.bj.mutate({mutation:l.I6G,variables:{teamId:t,redirectPath:n},context:{session:e}}).then(e=>{if((0,_.n)(e.data))return e.data.createTeamCheckoutSession.checkoutSessionId;throw Error("CreateTeamCheckoutSession returned no data")}).then(e=>{f.setState({status:"success",checkoutSessionId:e})},e=>{f.setState({status:"error"}),d.Tb(e)}))}(0,c.Z)(h()),(0,c.Z)(p())},34201:function(e,t,n){"use strict";n.d(t,{T:function(){return u},r:function(){return d}});var r=n(85893),a=n(67294),i=n(94184),s=n.n(i),o=n(56132),l=n.n(o);let d=e=>{let t={...e,as:"main"};return a.createElement(u,t,e.children)},u=e=>{var t;let n=null!==(t=e.as)&&void 0!==t?t:"div",i=s()(l().page,e.triangle1&&l().triangle1,e.triangle2&&l().triangle2,e.size&&l()[e.size],e.className),o={className:i,id:e.id,style:e.style};return a.createElement(n,o,(0,r.jsx)("div",{className:l().children,children:e.children}))}},93184:function(e,t,n){"use strict";n.d(t,{$:function(){return h},O:function(){return p}});var r=n(85893);n(67294);var a=n(94184),i=n.n(a),s=n(41664),o=n.n(s),l=n(42587),d=n.n(l),u=n(28174),c=n(39561),_=n(1801);let h=e=>{let t=e.limit?e.tags.slice(0,e.limit):e.tags,n=e.color1?"brand-orange":"neutral",a=i()(d().tags,e.className);return 0===t.length?null:(0,r.jsx)("ul",{className:a,children:t.map(e=>(0,r.jsx)("li",{children:(0,r.jsx)(o(),{prefetch:!1,href:"/discover/content/relevant?q=".concat(encodeURIComponent(e.includes(" ")?'tags:"'.concat(e,'"'):"tags:".concat(e))),children:(0,r.jsxs)(_.C,{size:"M",color:n,variant:"filled",children:["#",e]})})},e))})},p=e=>{var t;return(0,r.jsx)(u.Qy,{label:e.label,caption:"Separate tags with commas.",children:(0,r.jsx)(c.oH,{placeholder:"Tag 1, tag2, tag-3",value:null!==(t=e.tags)&&void 0!==t?t:"",onChange:t=>e.onChange(t.target.value)})})}},54173:function(e,t,n){"use strict";n.d(t,{A:function(){return _}});var r=n(85893),a=n(63593),i=n.n(a),s=n(94184),o=n.n(s),l=n(48089),d=n(41664),u=n.n(d),c=n(67294);let _=(0,c.forwardRef)((e,t)=>{let{theme:n,hovered:a,active:s,size:d,className:c,onOpen:_,href:h,as:p,replace:m,scroll:v,shallow:f,passHref:y,prefetch:g,locale:x,...b}=e;return(0,r.jsx)(u(),{href:h,as:p,replace:m,scroll:v,shallow:f,passHref:y,prefetch:g,locale:x,className:o()(i().button,(0,l.e)({theme:n,hovered:a,active:s}),i()["size-".concat(d)],c),ref:t,onClick:_,onAuxClick:_,...b,children:e.children})})},15183:function(e,t,n){"use strict";n.d(t,{h:function(){return l}});var r=n(67294),a=n(94184),i=n.n(a),s=n(39265),o=n.n(s);let l=e=>{var t;let n=null!==(t=e.as)&&void 0!==t?t:"div",a={className:i()(o().group,e.right&&o().right,e.className),"aria-live":e["aria-live"]};return r.createElement(n,a,e.children)}},68357:function(e,t,n){"use strict";n.d(t,{L:function(){return _}});var r=n(85893),a=n(93778),i=n.n(a),s=n(94184),o=n.n(s),l=n(43940),d=n(41664),u=n.n(d),c=n(67294);let _=(0,c.forwardRef)((e,t)=>{let{theme:n,hovered:a,active:s,size:d,insideText:c=!1,className:_,onOpen:h,href:p,as:m,replace:v,scroll:f,shallow:y,passHref:g,prefetch:x,locale:b,...j}=e;return(0,r.jsx)(u(),{href:p,as:m,replace:v,scroll:f,shallow:y,passHref:g,prefetch:x,locale:b,className:o()(i().button,(0,l.e)({theme:n,hovered:a,active:s}),i()["size-".concat(d)],c&&i().insideText,_),ref:t,onClick:h,onAuxClick:h,...j,children:e.children})})},21154:function(e,t,n){"use strict";n.d(t,{V:function(){return u}});var r=n(85893),a=n(93778),i=n.n(a),s=n(94184),o=n.n(s),l=n(43940),d=n(67294);let u=(0,d.forwardRef)((e,t)=>{let{theme:n,size:a,hovered:s,active:d,disabled:u,insideText:c=!1,className:_,children:h,...p}=e;return(0,r.jsx)("button",{disabled:u,className:o()(i().button,(0,l.e)({theme:n,hovered:s,active:d}),i()["size-".concat(a)],c&&i().insideText,_),ref:t,...p,children:h})})},43940:function(e,t,n){"use strict";n.d(t,{e:function(){return o}});var r=n(3406),a=n.n(r),i=n(94184),s=n.n(i);function o(e){return s()(a().button,e.hovered&&"hovered",e.active&&"active",a()["theme-".concat(e.theme)])}},50642:function(e,t,n){"use strict";n.d(t,{l:function(){return d}});var r=n(85893),a=n(36462),i=n.n(a),s=n(94184),o=n.n(s),l=n(67294);let d=(0,l.forwardRef)((e,t)=>{let{size:n,children:a,className:s,...l}=e;return(0,r.jsx)("form",{className:o()(i().form,i()["size-".concat(n)],s),ref:t,...l,children:a})})},54179:function(e,t,n){"use strict";n.d(t,{c:function(){return h}});var r=n(85893),a=n(23797),i=n.n(a),s=n(94184),o=n.n(s),l=n(67294),d=n(22262),u=n(52502),c=n(14921),_=n(58431);function h(e){let{position:t,distancePx:n=4,enabled:a=!0,openOn:s="hover|focus",closeOn:h="",as:m="div",renderInPortal:v=!1,renderToDomWhileClosed:f=!1,forceOpen:y=!1,wrapperClassName:g}=e,x=s.includes("hover"),b=s.includes("focus"),[j,C]=(0,l.useState)(!1),[I,k]=(0,l.useState)(!1),w="hover"===h&&j||"focus"===h&&I,S=y||!w&&(x&&j||b&&I);function q(){C(!1),k(!1)}let P=(0,l.useRef)(null),[D,E]=(0,l.useState)(null),N=(0,u.N)();(0,l.useEffect)(()=>{if(!S)return;function e(e){"Escape"===e.key&&k(!1)}let t={passive:!0};return window.addEventListener("wheel",N,t),window.addEventListener("scroll",N,t),window.addEventListener("resize",N,t),window.addEventListener("keydown",e,{passive:!0,once:!0}),()=>{window.removeEventListener("wheel",N),window.removeEventListener("scroll",N),window.removeEventListener("resize",N),window.removeEventListener("keydown",e)}},[S,k,N]);let A={close:q};(0,l.useEffect)(()=>{if(!D)return;let e=new ResizeObserver(N);return e.observe(D),()=>e.disconnect()},[D]);let z=(0,l.useMemo)(()=>(0,d.b)(t,0,n),[t]);return(0,r.jsxs)(m,{className:g,onFocus:e=>{let t=e.currentTarget;!I&&t.contains(e.target)&&k(!0)},onBlur:e=>{e.currentTarget.contains(e.relatedTarget)||k(!1)},onMouseEnter:e=>{let t=e.currentTarget;!j&&t.contains(e.target)&&C(!0)},onMouseLeave:()=>C(!1),children:[l.cloneElement(e.children,{ref:P,className:o()(e.children.props.className,S?"hovered":""),onKeyDown:e=>{if("Tab"===e.key){q();return}}}),p(e=>S&&a?e:f?(0,r.jsx)(_.Z,{children:e}):null)(()=>p(e=>v?(0,r.jsx)(c.h,{children:e}):e)(()=>{var a;return(0,r.jsx)("div",{ref:E,className:o()(i().popover,i()[t]),style:{...z(null===(a=P.current)||void 0===a?void 0:a.getBoundingClientRect(),null==D?void 0:D.getBoundingClientRect()),"--distance":"".concat(n,"px")},children:e.content(A)})}))]})}let p=e=>t=>e(t())},61857:function(e,t,n){"use strict";n.d(t,{i:function(){return r.i}});var r=n(45886)},53947:function(e,t,n){"use strict";n.d(t,{o:function(){return u}});var r=n(85893),a=n(42400),i=n.n(a),s=n(94184),o=n.n(s),l=n(67294),d=n(96981);let u=(0,l.forwardRef)((e,t)=>{let{label:n,checked:a,hint:s,disabled:u,onChange:c,children:_,className:h,...p}=e,m=(0,l.useId)();return(0,r.jsxs)("div",{children:[n&&(0,r.jsx)("label",{className:i().label,children:n}),(0,r.jsxs)("div",{className:o()(i().checkbox,u&&i().disabled,h),children:[(0,r.jsx)("div",{className:i().checkmark,children:a&&(0,r.jsx)(d.IconCheckmark,{})}),(0,r.jsx)("input",{id:m,type:"checkbox",onChange:c,checked:a,disabled:u,ref:t,...p}),(0,r.jsx)("label",{htmlFor:m,children:_})]}),s&&(0,r.jsx)("div",{className:o()(i().hint,u&&i().disabled),"aria-describedby":m,children:s})]})})},10398:function(e,t,n){"use strict";n.d(t,{U:function(){return c}});var r=n(85893),a=n(24293),i=n.n(a),s=n(94184),o=n.n(s),l=n(67294),d=n(10969),u=n(34668);let c=(0,l.forwardRef)((e,t)=>{var n;let{size:a,style:s,placeholder:c,label:_,value:h,hint:p,disabled:m,error:v,prefix:f,suffix:y,onChange:g,inputType:x="text",maxLength:b,showMaxLength:j=!0,inputContainerClassName:C,outerContainerClassName:I,...k}=e,w=(0,l.useId)(),S=(0,l.useMemo)(()=>null!==(n=e.id)&&void 0!==n?n:w,[e.id]);return(0,r.jsxs)("div",{className:o()(I),children:[(_||b&&j)&&(0,r.jsxs)(u._,{htmlFor:S,children:[_,void 0!==b&&!0===j&&(0,r.jsxs)("div",{className:i().charCounter,children:[h.length,"/",b]})]}),(0,r.jsxs)("div",{className:o()(i().input,i()["size-".concat(a)],i()["style-".concat(s)],m&&i().disabled,v&&i().inputError,C),children:[f&&(0,r.jsx)("span",{className:i().prefix,children:f}),(0,r.jsx)("input",{id:S,placeholder:c,onChange:g,value:h,type:x,disabled:m,maxLength:b,ref:t,...k}),void 0!==y&&(0,r.jsx)("span",{className:i().suffix,children:y})]}),v&&(0,r.jsxs)("div",{className:i().error,role:"alert",children:[(0,r.jsx)(d.Z,{}),v]}),p&&(0,r.jsx)("div",{className:i().hint,"aria-describedby":"value",children:p})]})})},56598:function(e,t,n){"use strict";n.d(t,{D:function(){return u},S:function(){return d}});var r=n(85893),a=n(66195),i=n.n(a),s=n(94184),o=n.n(s),l=n(67294);let d=(0,l.forwardRef)((e,t)=>(0,r.jsx)("fieldset",{className:o()(i().group,e.className),role:"radiogroup",ref:t,children:e.children.map((t,n)=>l.cloneElement(t,{key:n,name:e.name,group:{onChange:e.onChange,value:e.value}}))})),u=(0,l.forwardRef)((e,t)=>{var n;let{hint:a,disabled:s,children:d,value:u,theme:c="secondary",..._}=e,h=(0,l.useId)(),p=(null===(n=e.group)||void 0===n?void 0:n.value)===u;return(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:o()(i().radioButton,i()["theme-".concat(c)],s&&i().disabled),children:[(0,r.jsx)("input",{id:h,type:"radio",onChange:()=>{var t;return null===(t=e.group)||void 0===t?void 0:t.onChange(u)},defaultChecked:p,disabled:s,ref:t,..._}),(0,r.jsx)("label",{htmlFor:h,children:d})]}),a&&(0,r.jsx)("div",{className:o()(i().hint,s&&i().disabled),"aria-describedby":h,children:a})]})})},34668:function(e,t,n){"use strict";n.d(t,{_:function(){return s}});var r=n(85893),a=n(86780),i=n.n(a);let s=e=>{let{...t}=e;return(0,r.jsx)("label",{className:i().label,...t,children:e.children})}},51818:function(e,t,n){"use strict";n.d(t,{j:function(){return u}});var r=n(85893),a=n(16833),i=n.n(a),s=n(94184),o=n.n(s),l=n(67294),d=n(10969);let u=(0,l.forwardRef)((e,t)=>{var n;let{size:a,type:s,placeholder:u,label:c,value:_,hint:h,error:p,prefix:m,suffix:v,onChange:f,disabled:y,children:g,name:x,className:b,...j}=e,C=(0,l.useId)(),I=(0,l.useMemo)(()=>null!==(n=e.id)&&void 0!==n?n:C,[e.id]);return(0,r.jsxs)("div",{children:[c&&(0,r.jsx)("label",{htmlFor:I,className:i().label,children:c}),(0,r.jsxs)("div",{className:o()(i().selectBox,i()["size-".concat(a)],i()["type-".concat(s)],y&&i().disabled,p&&i().selectBoxError,b),children:[m&&(0,r.jsx)("span",{className:i().prefix,children:m}),(0,r.jsxs)("select",{ref:t,name:x,id:I,onChange:f,value:_,disabled:y,...j,children:["string"==typeof u&&(0,r.jsx)("option",{value:"",disabled:!0,children:u}),g]}),void 0!==v&&(0,r.jsx)("span",{className:i().suffix,children:v})]}),p&&(0,r.jsxs)("div",{className:i().error,role:"alert",children:[(0,r.jsx)(d.Z,{}),p]}),h&&(0,r.jsx)("div",{className:i().hint,"aria-describedby":I,children:h})]})})},21647:function(e,t,n){"use strict";n.d(t,{n:function(){return o}});var r=n(85893),a=n(1009),i=n.n(a),s=n(54179);function o(e){let{"aria-label":t,content:n,...a}=e;return(0,r.jsx)(s.c,{...a,content:e=>(0,r.jsx)("div",{className:i().tooltip,"aria-label":t,children:n(e)})})}},30205:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var r=n(82729),a=n(84937);function i(){let e=(0,r._)(["\n  query GetCreatorOnboardingChecklist($userId: Int!) {\n    creatorOnboardingChecklist(userId: $userId) {\n      userId\n      querySavedAt\n      visualizationCreatedAt\n      visualizationSharedAt\n      dismissedAt\n    }\n  }\n"]);return i=function(){return e},e}function s(e){let{data:t}=(0,a.RuK)({skip:(null==e?void 0:e.user)===void 0,context:{session:e},variables:{userId:e.user.id}}),n=null==t?void 0:t.creatorOnboardingChecklist;if(void 0!==n&&null===n.dismissedAt)return n}(0,n(39137).Z)(i())},96752:function(e,t,n){"use strict";n.d(t,{xA:function(){return w},fs:function(){return S},xL:function(){return f},_5:function(){return y},AK:function(){return p},C8:function(){return v},Ch:function(){return m},_C:function(){return q},Xh:function(){return P},cp:function(){return k},r3:function(){return I}});var r=n(91813),a=n(76138),i=n(6826);let s=function(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return null!==(e=t.page)&&void 0!==e?e:1},o=function(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return null!==(e=t.page_size)&&void 0!==e?e:20};var l=n(91155),d=n(61575),u=n(83787),c=n(73874),_=n(46367),h=n(84937);let p=async(e,t,n,i)=>{var s;let o=await a.bj.query({query:h.O27,variables:{filters:{slug:{equals:t},handle:{equals:e}}},context:{session:n,apiKey:i},fetchPolicy:"network-only"});if(!(0,_.n)(null==o?void 0:o.data.dashboards.edges[0]))throw new r.d("dashboard not found: ".concat(t));return(0,l.f)(j(null==o?void 0:null===(s=o.data.dashboards.edges[0])||void 0===s?void 0:s.node))},m=async(e,t,n)=>{var i;let s=await a.bj.query({query:h.soQ,variables:{id:e},context:{session:t,apiKey:n},fetchPolicy:"network-only"});if(!(null===(i=s.data)||void 0===i?void 0:i.query))throw new r.d("query not found: ".concat(e));return I(s.data.query)},v=async(e,t)=>{let n=await a.bj.query({query:h.nMI,variables:{filters:{isArchived:{equals:!1},isTemp:{equals:!1},...(0,_.n)(e.q)?{name:{contains:e.q}}:{}},orderBy:[{key:"updatedAt",direction:h.eQH.Desc}],pagination:{first:50}},context:{session:t},fetchPolicy:"network-only"});return x(n.data.queries.edges,e)},f=async(e,t)=>{(0,i.h)(t,"fetchAuthoredDashboards called without a session");let n=await a.bj.query({query:h.Sar,variables:{filters:{isEditable:{equals:!0},isArchived:{equals:!1},...(0,_.n)(e.q)?{name:{contains:e.q}}:{}},orderBy:[{key:"updatedAt",direction:h.eQH.Desc}],pagination:{first:50}},context:{session:t},fetchPolicy:"network-only"});return g(n.data)},y=async(e,t,n)=>{var r,s,o;(0,i.h)(t,"fetchAuthoredQueries called without a session");let l=await a.bj.query({query:h.nMI,variables:{filters:{OR:[{userId:{equals:null!==(s=null==t?void 0:null===(r=t.user)||void 0===r?void 0:r.id)&&void 0!==s?s:-1}},{teamId:{in:n}}],isArchived:{equals:!!e.archived},isTemp:{equals:!1},...(0,_.n)(e.q)?{name:{contains:e.q}}:{}},orderBy:[{key:"updatedAt",direction:h.eQH.Desc}],pagination:{first:null!==(o=e.page_size)&&void 0!==o?o:50}},context:{session:t},fetchPolicy:"network-only"});return x(l.data.queries.edges,e)},g=e=>({results:e.dashboards.edges.map(e=>{let{node:t}=e;return b(t)})}),x=(e,t)=>{var n;return{count:null!==(n=e.length)&&void 0!==n?n:0,page_size:o(t),page:s(t),results:e.map(e=>C(e.node))}},b=e=>({id:e.id,name:e.name,slug:e.slug,is_private:e.isPrivate,owner:k(e),visualization_widgets:(0,d.bK)(e.visualizationWidgets||[])}),j=e=>{var t;return{id:e.id,name:e.name,slug:e.slug,created_at:e.createdAt,owner:k(e),forked_dashboard:function(){var t,n;if(!(0,_.n)(e.forkedDashboard))return null;let{team:r,user:a,name:i,slug:s}=e.forkedDashboard;return{owner_handle:null!==(n=null!==(t=null==r?void 0:r.handle)&&void 0!==t?t:null==a?void 0:a.name)&&void 0!==n?n:"",dashboard_name:i,dashboard_slug:s}}(),tags:null!==(t=e.tags)&&void 0!==t?t:[],num_favorites_in_period:e.starCount,is_favorite:e.hasStarred,is_private:e.isPrivate,is_archived:!!e.isArchived,text_widgets:(0,d.bK)(e.textWidgets||[]),visualization_widgets:(0,d.bK)(e.visualizationWidgets||[]),param_widgets:(0,d.bK)(e.paramWidgets||[]),repo_link:e.repoLink,isTrending:e.isTrending}},C=e=>{let t=(0,_.n)(e.visualizations)?e.visualizations:[],n=(0,c.n7)(t);return{id:e.id,name:e.name||"",owner:k(e),is_private:e.isPrivate,visualizations:n}},I=e=>{var t,n,r;let a=(0,_.n)(e.visualizations)?e.visualizations:[],i=(0,c.n7)(a),s=(0,u.bp)(null!==(t=e.parameters)&&void 0!==t?t:[]);return{id:e.id,dataset_id:e.dataset_id,name:e.name||"",description:e.description||"",query:e.ownerFields.query,version:e.ownerFields.version,matview_id:null!==(n=e.matview_id)&&void 0!==n?n:null,created_at:e.created_at,updated_at:e.updated_at,owner:k(e),tags:null!==(r=e.tags)&&void 0!==r?r:[],num_favorites_in_period:e.starCount,is_favorite:e.is_favorite,is_private:e.is_private,is_archived:!!e.is_archived,is_temp:!!e.is_temp,visualizations:i,parameters:s,forked_query:function(){var t;if(!e.forked_query)return null;let{team:n,user:r,name:a,id:i}=e.forked_query;return{owner_handle:n?n.handle:null!==(t=null==r?void 0:r.name)&&void 0!==t?t:"",query_id:i,query_name:a}}()}};function k(e){var t,n;if(e.team)return{type:"team",id:e.team.id,name:e.team.name,handle:e.team.handle,profile_image_url:null!==(t=e.team.profile_image_url)&&void 0!==t?t:null};if(e.user)return{type:"user",id:e.user.id,name:e.user.name,handle:e.user.name,profile_image_url:null!==(n=e.user.profile_image_url)&&void 0!==n?n:null};throw Error("data has neither team nor user. __typename={".concat(e.__typename,"}"))}let w=e=>{switch(e){case"queries":return"terminal";case"dashboards":return"dashboard";case"people":return"people"}},S=e=>P(e)?"queries":"dashboards",q=e=>void 0!==e&&"slug"in e,P=e=>void 0!==e&&!("slug"in e)},91813:function(e,t,n){"use strict";n.d(t,{d:function(){return r}});class r extends Error{}},79478:function(e,t,n){"use strict";n.d(t,{Di:function(){return c},t6:function(){return d},tZ:function(){return u}});var r=n(96752),a=n(67294),i=n(40656),s=n(62427),o=n(57831);let l=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{session:r,sessionLoading:l}=a.useContext(o.B3),{csrf:d}=a.useContext(s.m),u=a.useRef(r);return u.current=r,(0,i.ZP)([...e,d,l,u],()=>{if(d&&!l)return t(d,u.current)},{refreshWhenHidden:!1,revalidateOnFocus:!1,revalidateOnReconnect:!1,shouldRetryOnError:!1,...n})},d=(e,t)=>l(["useEntryQuery",e,t],async(n,a)=>{if("number"==typeof e)return(0,r.Ch)(e,a,t)}),u=(e,t,n)=>l(["useFullDashboard",e,t,n],async(a,i)=>{if("string"==typeof e&&"string"==typeof t)return(0,r.AK)(e,t,i,n)}),c=(e,t,n,a)=>l([e,n,JSON.stringify(t)],async(i,s)=>{if("authored"===n)switch(e){case"queries":return(0,r._5)(t,s,a);case"dashboards":return(0,r.xL)(t,s)}switch(e){case"queries":return(0,r.C8)(t,s);case"dashboards":throw Error("Not implemented")}})},51550:function(e,t,n){"use strict";n.d(t,{z:function(){return a}});var r=n(77230);class a{get(e){var t;return null===(t=this.map.get(e))||void 0===t?void 0:t.value}set(e,t){let n=this.sizeCalculation(t,e);if(!(n>this.maxSize)){for(;this.totalSize+n>this.maxSize;){let e=this.map.oldest;this.map.delete(e.key),this.totalSize-=e.value.size}this.map.set(e,{value:t,size:n}),this.totalSize+=n}}clear(){this.map.clear(),this.totalSize=0}clone(){return new a({limit:this.map.limit,maxSize:this.maxSize,sizeCalculation:this.sizeCalculation,entries:this.map,startSize:this.totalSize})}*keys(){for(let[e,t]of this.map)yield e}constructor(e){var t;this.map=new r.LRUMap(e.limit,e.entries),this.totalSize=null!==(t=e.startSize)&&void 0!==t?t:0,this.maxSize=e.maxSize,this.sizeCalculation=e.sizeCalculation}}},31792:function(e,t,n){"use strict";n.d(t,{_L:function(){return n8},vU:function(){return n7},D_:function(){return function e(t){return t instanceof nJ.cA?e(t.networkError):!!(t instanceof n8||t instanceof DOMException&&"AbortError"===t.name)}},Q6:function(){return rn},oX:function(){return rt},gc:function(){return n5}});var r,a,i,s,o,l,d,u,c,_,h,p,m,v,f,y,g,x,b,j,C,I,k,w,S,q,P,D,E,N,A,z,T,U,M,F,B,O,Q,L,R,Z,H,$,V,G,K,W,J,Y,X,ee,et,en,er,ea,ei,es,eo,el,ed,eu,ec,e_,eh,ep,em,ev,ef,ey,eg,ex,eb,ej,eC,eI,ek,ew,eS,eq,eP,eD,eE,eN,eA,ez,eT,eU,eM,eF,eB,eO,eQ,eL,eR,eZ,eH,e$,eV,eG,eK,eW,eJ,eY,eX,e0,e1,e2,e3,e6,e4,e9,e8,e7,e5,te,tt,tn,tr,ta,ti,ts,to,tl,td,tu,tc,t_,th,tp,tm,tv,tf,ty,tg,tx,tb,tj,tC,tI,tk,tw,tS,tq,tP,tD,tE,tN,tA,tz,tT,tU,tM,tF,tB,tO,tQ,tL,tR,tZ,tH,t$,tV,tG,tK,tW,tJ,tY,tX,t0,t1,t2,t3,t6,t4,t9,t8,t7,t5,ne,nt,nn,nr,na,ni,ns,no,nl,nd,nu,nc,n_,nh,np,nm,nv,nf,ny,ng,nx,nb,nj,nC,nI,nk,nw,nS,nq,nP,nD,nE,nN,nA,nz,nT,nU,nM,nF,nB,nO,nQ,nL,nR,nZ,nH,n$,nV,nG,nK,nW=n(82729),nJ=n(30990),nY=n(80133),nX=n(76138);function n0(){let e=(0,nW._)(["\n  query GetExecution(\n    $execution_id: String!\n    $query_id: Int!\n    $parameters: [Parameter!]!\n  ) {\n    get_execution(\n      execution_id: $execution_id\n      query_id: $query_id\n      parameters: $parameters\n    ) {\n      execution_queued {\n        execution_id\n        execution_user_id\n        position\n        execution_type\n        created_at\n      }\n      execution_running {\n        execution_id\n        execution_user_id\n        execution_type\n        started_at\n        created_at\n      }\n      execution_succeeded {\n        execution_id\n        runtime_seconds\n        generated_at\n        columns\n        data\n        max_result_size_reached_bytes\n        request_max_result_size_bytes\n      }\n      execution_failed {\n        execution_id\n        type\n        message\n        metadata {\n          line\n          column\n          hint\n        }\n        runtime_seconds\n        generated_at\n      }\n    }\n  }\n"]);return n0=function(){return e},e}function n1(){let e=(0,nW._)(["\n  query Example {\n    dashboards {\n      id\n    }\n  }\n"]);return n1=function(){return e},e}(r=eX||(eX={})).Asc="ASC",r.Desc="DESC",(a=e0||(e0={})).Failed="failed",a.Finished="finished",a.Finishing="finishing",a.Running="running",a.Starting="starting",(e1||(e1={})).ApiKeysPkey="api_keys_pkey",(i=e2||(e2={})).Active="active",i.CreatedAt="created_at",i.DashboardId="dashboard_id",i.Id="id",i.QueryId="query_id",i.TeamId="team_id",i.UserId="user_id",(e3||(e3={})).Active="active",(e6||(e6={})).Active="active",(s=e4||(e4={})).Active="active",s.CreatedAt="created_at",s.DashboardId="dashboard_id",s.Id="id",s.QueryId="query_id",s.TeamId="team_id",s.UserId="user_id",(o=e9||(e9={})).ArrakisSchemasDatasetIdFullNameColumnNameKey="arrakis_schemas_dataset_id_full_name_column_name_key",o.ArrakisSchemasPkey="arrakis_schemas_pkey",(l=e8||(e8={})).AbiName="abi_name",l.AbiType="abi_type",l.AbstractionTier="abstraction_tier",l.AbstractionType="abstraction_type",l.Blockchains="blockchains",l.Category="category",l.ColumnName="column_name",l.ContractName="contract_name",l.Contributors="contributors",l.CreatedAt="created_at",l.DataType="data_type",l.DatasetId="dataset_id",l.FullName="full_name",l.Id="id",l.Namespace="namespace",l.SearchVector="search_vector",l.TableName="table_name",(d=e7||(e7={})).AbiName="abi_name",d.AbiType="abi_type",d.AbstractionTier="abstraction_tier",d.AbstractionType="abstraction_type",d.Blockchains="blockchains",d.Category="category",d.ColumnName="column_name",d.ContractName="contract_name",d.Contributors="contributors",d.CreatedAt="created_at",d.DataType="data_type",d.DatasetId="dataset_id",d.FullName="full_name",d.Id="id",d.Namespace="namespace",d.SearchVector="search_vector",d.TableName="table_name",(e5||(e5={})).ContractSubmissionsPkey="contract_submissions_pkey",(u=te||(te={})).Abi="abi",u.Address="address",u.Blockchain="blockchain",u.CognitoUserId="cognito_user_id",u.Comment="comment",u.ContractName="contract_name",u.CreatedAt="created_at",u.DeletedAt="deleted_at",u.HasMultipleInstances="has_multiple_instances",u.Id="id",u.IsCreatedByFactory="is_created_by_factory",u.IsManualAbi="is_manual_abi",u.IsProxy="is_proxy",u.ProjectName="project_name",u.ResubmissionReason="resubmission_reason",u.Status="status",u.UpdatedAt="updated_at",(c=tt||(tt={})).HasMultipleInstances="has_multiple_instances",c.IsCreatedByFactory="is_created_by_factory",c.IsManualAbi="is_manual_abi",c.IsProxy="is_proxy",(_=tn||(tn={})).HasMultipleInstances="has_multiple_instances",_.IsCreatedByFactory="is_created_by_factory",_.IsManualAbi="is_manual_abi",_.IsProxy="is_proxy",(h=tr||(tr={})).Abi="abi",h.Address="address",h.Blockchain="blockchain",h.CognitoUserId="cognito_user_id",h.Comment="comment",h.ContractName="contract_name",h.CreatedAt="created_at",h.DeletedAt="deleted_at",h.HasMultipleInstances="has_multiple_instances",h.Id="id",h.IsCreatedByFactory="is_created_by_factory",h.IsManualAbi="is_manual_abi",h.IsProxy="is_proxy",h.ProjectName="project_name",h.ResubmissionReason="resubmission_reason",h.Status="status",h.UpdatedAt="updated_at",(p=ta||(ta={})).Asc="ASC",p.Desc="DESC",(m=ti||(ti={})).DashboardId="dashboard_id",m.FavoriteCount="favorite_count",(v=ts||(ts={})).DashboardId="dashboard_id",v.FavoriteCount="favorite_count",(f=to||(to={})).DashboardId="dashboard_id",f.FavoriteCount="favorite_count",(y=tl||(tl={})).DashboardId="dashboard_id",y.FavoriteCount="favorite_count",(td||(td={})).DashboardTrendingScoresPkey="dashboard_trending_scores_pkey",(g=tu||(tu={})).DashboardId="dashboard_id",g.Score_1h="score_1h",g.Score_4h="score_4h",g.Score_24h="score_24h",g.UpdatedAt="updated_at",(x=tc||(tc={})).DashboardId="dashboard_id",x.Score_1h="score_1h",x.Score_4h="score_4h",x.Score_24h="score_24h",x.UpdatedAt="updated_at",(b=t_||(t_={})).DashboardsPkey="dashboards_pkey",b.DashboardsUniqueTeamSlugIdx="dashboards_unique_team_slug_idx",b.DashboardsUniqueUserSlugIdx="dashboards_unique_user_slug_idx",(j=th||(th={})).CreatedAt="created_at",j.FolderId="folder_id",j.ForkOfId="fork_of_id",j.Id="id",j.IsArchived="is_archived",j.IsPrivate="is_private",j.Name="name",j.Parameters="parameters",j.RedirectFrom="redirect_from",j.RepoLink="repo_link",j.Slug="slug",j.Tags="tags",j.TeamId="team_id",j.UpdatedAt="updated_at",j.UserId="user_id",(C=tp||(tp={})).IsArchived="is_archived",C.IsPrivate="is_private",(I=tm||(tm={})).IsArchived="is_archived",I.IsPrivate="is_private",(k=tv||(tv={})).CreatedAt="created_at",k.FolderId="folder_id",k.ForkOfId="fork_of_id",k.Id="id",k.IsArchived="is_archived",k.IsPrivate="is_private",k.Name="name",k.Parameters="parameters",k.RedirectFrom="redirect_from",k.RepoLink="repo_link",k.Slug="slug",k.Tags="tags",k.TeamId="team_id",k.UpdatedAt="updated_at",k.UserId="user_id",(w=tf||(tf={})).DataSourcesPkey="data_sources_pkey",w.DatasetsUniqueName="datasets_unique_name",(S=ty||(ty={})).CreatedAt="created_at",S.Id="id",S.Name="name",S.Type="type",(q=tg||(tg={})).CreatedAt="created_at",q.Id="id",q.Name="name",q.Type="type",(P=tx||(tx={})).FavoriteDashboardsPkey="favorite_dashboards_pkey",P.FavouritedDashbaordsUniqueUserDashboardIdIx="favourited_dashbaords_unique_user_dashboard_id_ix",(D=tb||(tb={})).CreatedAt="created_at",D.DashboardId="dashboard_id",D.Id="id",D.UpdatedAt="updated_at",D.UserId="user_id",(E=tj||(tj={})).CreatedAt="created_at",E.DashboardId="dashboard_id",E.Id="id",E.UpdatedAt="updated_at",E.UserId="user_id",(N=tC||(tC={})).FavoriteQueriesPkey="favorite_queries_pkey",N.FavoriteQueriesUniqueUserDashboardIdIx="favorite_queries_unique_user_dashboard_id_ix",(A=tI||(tI={})).CreatedAt="created_at",A.Id="id",A.QueryId="query_id",A.UpdatedAt="updated_at",A.UserId="user_id",(z=tk||(tk={})).CreatedAt="created_at",z.Id="id",z.QueryId="query_id",z.UpdatedAt="updated_at",z.UserId="user_id",(T=tw||(tw={})).FoldersPkey="folders_pkey",T.TeamIdPathIx="team_id_path_ix",T.UserIdPathIx="user_id_path_ix",(U=tS||(tS={})).Color="color",U.CreatedAt="created_at",U.Description="description",U.Icon="icon",U.Id="id",U.Name="name",U.Path="path",U.TeamId="team_id",U.UpdatedAt="updated_at",U.UserId="user_id",(M=tq||(tq={})).Color="color",M.CreatedAt="created_at",M.Description="description",M.Icon="icon",M.Id="id",M.Path="path",M.TeamId="team_id",M.UpdatedAt="updated_at",M.UserId="user_id",(F=tP||(tP={})).Data="data",F.JobId="job_id",F.ResultId="result_id",(B=tD||(tD={})).Entity="entity",B.Handle="handle",B.Id="id",(tE||(tE={})).InviteMembersKeysPkey="invite_members_keys_pkey",(O=tN||(tN={})).AuthorId="author_id",O.CreatedAt="created_at",O.DisabledAt="disabled_at",O.Id="id",O.TeamId="team_id",(Q=tA||(tA={})).AuthorId="author_id",Q.CreatedAt="created_at",Q.DisabledAt="disabled_at",Q.Id="id",Q.TeamId="team_id",(L=tz||(tz={})).MembershipsPkey="memberships_pkey",L.MembershipsUniqueEmailTeamIdIx="memberships_unique_email_team_id_ix",L.MembershipsUniqueUserIdTeamIdIx="memberships_unique_user_id_team_id_ix",(R=tT||(tT={})).CreatedAt="created_at",R.Email="email",R.Id="id",R.Role="role",R.Status="status",R.TeamId="team_id",R.UpdatedAt="updated_at",R.UserId="user_id",(Z=tU||(tU={})).CreatedAt="created_at",Z.Email="email",Z.Id="id",Z.Role="role",Z.Status="status",Z.TeamId="team_id",Z.UpdatedAt="updated_at",Z.UserId="user_id",(H=tM||(tM={})).CreatedAt="created_at",H.Email="email",H.Id="id",H.Role="role",H.Status="status",H.TeamId="team_id",H.UpdatedAt="updated_at",H.UserId="user_id",(tF||(tF={})).OnboardingQuestionsPkey="onboarding_questions_pkey",($=tB||(tB={})).AchieveWithDune="achieve_with_dune",$.BlockchainExperience="blockchain_experience",$.BringsToDune="brings_to_dune",$.CreatedAt="created_at",$.DataTeamSize="data_team_size",$.OrganizationSize="organization_size",$.RoleWithDune="role_with_dune",$.SqlExperience="sql_experience",$.UserId="user_id",$.Version="version",(V=tO||(tO={})).AchieveWithDune="achieve_with_dune",V.BlockchainExperience="blockchain_experience",V.BringsToDune="brings_to_dune",V.CreatedAt="created_at",V.DataTeamSize="data_team_size",V.OrganizationSize="organization_size",V.RoleWithDune="role_with_dune",V.SqlExperience="sql_experience",V.UserId="user_id",V.Version="version",(tQ||(tQ={})).OperationCostsPkey="operation_costs_pkey",(G=tL||(tL={})).CreatedAt="created_at",G.Data="data",G.Key="key",G.UpdatedAt="updated_at",(K=tR||(tR={})).CreatedAt="created_at",K.Data="data",K.Key="key",K.UpdatedAt="updated_at",(W=tZ||(tZ={})).Asc="asc",W.AscNullsFirst="asc_nulls_first",W.AscNullsLast="asc_nulls_last",W.Desc="desc",W.DescNullsFirst="desc_nulls_first",W.DescNullsLast="desc_nulls_last",(tH||(tH={})).ParamWidgetsPkey="param_widgets_pkey",(J=t$||(t$={})).CreatedAt="created_at",J.DashboardId="dashboard_id",J.Id="id",J.Key="key",J.Options="options",J.QueryId="query_id",J.UpdatedAt="updated_at",J.VisualizationWidgetId="visualization_widget_id",(Y=tV||(tV={})).CreatedAt="created_at",Y.DashboardId="dashboard_id",Y.Id="id",Y.Key="key",Y.Options="options",Y.QueryId="query_id",Y.UpdatedAt="updated_at",Y.VisualizationWidgetId="visualization_widget_id",(tG||(tG={})).PendingTeamSubscriptionUpdatesPkey="pending_team_subscription_updates_pkey",(X=tK||(tK={})).BasePlanId="base_plan_id",X.CreatedAt="created_at",X.Metadata="metadata",X.OrbSubscriptionAnchorDay="orb_subscription_anchor_day",X.OrbSubscriptionId="orb_subscription_id",X.ServiceTierId="service_tier_id",X.SoftDeadline="soft_deadline",X.TeamId="team_id",X.UpdateDate="update_date",X.UpdateType="update_type",(ee=tW||(tW={})).BasePlanId="base_plan_id",ee.CreatedAt="created_at",ee.Metadata="metadata",ee.OrbSubscriptionAnchorDay="orb_subscription_anchor_day",ee.OrbSubscriptionId="orb_subscription_id",ee.ServiceTierId="service_tier_id",ee.SoftDeadline="soft_deadline",ee.TeamId="team_id",ee.UpdateDate="update_date",ee.UpdateType="update_type",(tJ||(tJ={})).PendingUserSubscriptionUpdatesPkey="pending_user_subscription_updates_pkey",(et=tY||(tY={})).BasePlanId="base_plan_id",et.CreatedAt="created_at",et.Metadata="metadata",et.OrbSubscriptionAnchorDay="orb_subscription_anchor_day",et.OrbSubscriptionId="orb_subscription_id",et.ServiceTier="service_tier",et.SoftDeadline="soft_deadline",et.UpdateDate="update_date",et.UpdateType="update_type",et.UserId="user_id",(en=tX||(tX={})).BasePlanId="base_plan_id",en.CreatedAt="created_at",en.Metadata="metadata",en.OrbSubscriptionAnchorDay="orb_subscription_anchor_day",en.OrbSubscriptionId="orb_subscription_id",en.ServiceTier="service_tier",en.SoftDeadline="soft_deadline",en.UpdateDate="update_date",en.UpdateType="update_type",en.UserId="user_id",(er=t0||(t0={})).Popularity="popularity",er.Tag="tag",(ea=t1||(t1={})).Popularity="popularity",ea.Tag="tag",(t2||(t2={})).UserId="user_id",(t3||(t3={})).QueriesPkey="queries_pkey",(ei=t6||(t6={})).CreatedAt="created_at",ei.DatasetId="dataset_id",ei.Description="description",ei.FolderId="folder_id",ei.ForkOfId="fork_of_id",ei.Id="id",ei.IsArchived="is_archived",ei.IsPrivate="is_private",ei.IsTemp="is_temp",ei.MatviewId="matview_id",ei.Name="name",ei.Parameters="parameters",ei.Query="query",ei.Schedule="schedule",ei.SearchVector="search_vector",ei.Tags="tags",ei.TeamId="team_id",ei.UpdatedAt="updated_at",ei.UserId="user_id",ei.Version="version",(es=t4||(t4={})).IsArchived="is_archived",es.IsPrivate="is_private",es.IsTemp="is_temp",(eo=t9||(t9={})).IsArchived="is_archived",eo.IsPrivate="is_private",eo.IsTemp="is_temp",(el=t8||(t8={})).CreatedAt="created_at",el.DatasetId="dataset_id",el.Description="description",el.FolderId="folder_id",el.ForkOfId="fork_of_id",el.Id="id",el.IsArchived="is_archived",el.IsPrivate="is_private",el.IsTemp="is_temp",el.MatviewId="matview_id",el.Name="name",el.Parameters="parameters",el.Query="query",el.Schedule="schedule",el.SearchVector="search_vector",el.Tags="tags",el.TeamId="team_id",el.UpdatedAt="updated_at",el.UserId="user_id",el.Version="version",(ed=t7||(t7={})).DatasetId="dataset_id",ed.Description="description",ed.IsPrivate="is_private",ed.Name="name",ed.Parameters="parameters",ed.QueryId="query_id",ed.ShowWatermark="show_watermark",ed.TeamId="team_id",ed.UserId="user_id",(t5||(t5={})).QueryEventMetadataPkey="query_event_metadata_pkey",(eu=ne||(ne={})).CreatedAt="created_at",eu.Description="description",eu.Name="name",eu.QueryEventId="query_event_id",eu.UpdatedAt="updated_at",eu.UserId="user_id",(ec=nt||(nt={})).CreatedAt="created_at",ec.Description="description",ec.Name="name",ec.QueryEventId="query_event_id",ec.UpdatedAt="updated_at",ec.UserId="user_id",(nn||(nn={})).QueryEventTypesPkey="query_event_types_pkey",(e_=nr||(nr={})).OwnershipChanged="ownership_changed",e_.QueryArchived="query_archived",e_.QueryCreated="query_created",e_.QueryForked="query_forked",e_.QueryPublished="query_published",e_.QueryRestored="query_restored",e_.QuerySaved="query_saved",e_.QueryUnarchived="query_unarchived",e_.QueryUnpublished="query_unpublished",(eh=na||(na={})).Description="description",eh.Value="value",(ep=ni||(ni={})).Description="description",ep.Value="value",(ns||(ns={})).QueryEventsPkey="query_events_pkey",(em=no||(no={})).CreatedAt="created_at",em.DuneServiceName="dune_service_name",em.From="from",em.Id="id",em.QueryId="query_id",em.QueryVersion="query_version",em.TeamId="team_id",em.To="to",em.Type="type",em.UserId="user_id",(ev=nl||(nl={})).CreatedAt="created_at",ev.DuneServiceName="dune_service_name",ev.From="from",ev.Id="id",ev.QueryId="query_id",ev.QueryVersion="query_version",ev.TeamId="team_id",ev.To="to",ev.Type="type",ev.UserId="user_id",(ef=nd||(nd={})).FavoriteCount="favorite_count",ef.QueryId="query_id",(ey=nu||(nu={})).FavoriteCount="favorite_count",ey.QueryId="query_id",(eg=nc||(nc={})).FavoriteCount="favorite_count",eg.QueryId="query_id",(ex=n_||(n_={})).FavoriteCount="favorite_count",ex.QueryId="query_id",(eb=nh||(nh={})).CreatedAt="created_at",eb.Email="email",eb.EnableProBadge="enable_pro_badge",eb.EnableServiceTierBadge="enable_service_tier_badge",eb.Id="id",eb.IsPro="is_pro",eb.MaxDatapointsPerRequest="max_datapoints_per_request",eb.MaxExecutionsOverageCostCents="max_executions_overage_cost_cents",eb.MaxOverageCents="max_overage_cents",eb.NumParallelQueries="num_parallel_queries",eb.Permissions="permissions",eb.QueryPriority="query_priority",eb.ServiceTierId="service_tier_id",eb.ShowMembers="show_members",eb.StripeCustomerId="stripe_customer_id",eb.UpdatedAt="updated_at",(ej=np||(np={})).Id="id",ej.IsPro="is_pro",ej.ServiceTierId="service_tier_id",(eC=nm||(nm={})).Id="id",eC.Sum="sum",(eI=nv||(nv={})).TeamServiceTiersNameKey="team_service_tiers_name_key",eI.TeamServiceTiersPkey="team_service_tiers_pkey",(ek=nf||(nf={})).AllowPrivateQueriesAsViews="allow_private_queries_as_views",ek.ApiCallsPerMinute="api_calls_per_minute",ek.BaseAnnuallyPriceDollarsCents="base_annually_price_dollars_cents",ek.BaseMonthlyPriceDollarsCents="base_monthly_price_dollars_cents",ek.CanHideMembers="can_hide_members",ek.CanUseCrudEndpoints="can_use_crud_endpoints",ek.CanUseDashboardQueriesEndpoints="can_use_dashboard_queries_endpoints",ek.CanUseMatviews="can_use_matviews",ek.CanUseStaticDataUploads="can_use_static_data_uploads",ek.CatalogStorageQuotaBytes="catalog_storage_quota_bytes",ek.CreatedAt="created_at",ek.CsvDownloadsPerMonth="csv_downloads_per_month",ek.CustomizableProfile="customizable_profile",ek.Description="description",ek.Id="id",ek.IncludedDatapoints="included_datapoints",ek.IncludedNanocredits="included_nanocredits",ek.IncludedQueryExecutions="included_query_executions",ek.InternalTierName="internal_tier_name",ek.IsPublic="is_public",ek.MaxAlertQueries="max_alert_queries",ek.MaxDashboardSchedules="max_dashboard_schedules",ek.MaxFolders="max_folders",ek.MaxPrivateDashboards="max_private_dashboards",ek.MaxPrivateQueries="max_private_queries",ek.MaxQueryEventRetentionDays="max_query_event_retention_days",ek.MaxQuerySchedules="max_query_schedules",ek.Name="name",ek.NanocreditsCostCents="nanocredits_cost_cents",ek.OperationCostsKey="operation_costs_key",ek.OrbBasePlanId="orb_base_plan_id",ek.Performance="performance",ek.QueryExecOverageDollarsCents="query_exec_overage_dollars_cents",ek.QueryTimeoutSec="query_timeout_sec",ek.ReleaseVersion="release_version",ek.RemoveWatermark="remove_watermark",ek.UpdatedAt="updated_at",(ew=ny||(ny={})).AllowPrivateQueriesAsViews="allow_private_queries_as_views",ew.ApiCallsPerMinute="api_calls_per_minute",ew.BaseAnnuallyPriceDollarsCents="base_annually_price_dollars_cents",ew.BaseMonthlyPriceDollarsCents="base_monthly_price_dollars_cents",ew.CanHideMembers="can_hide_members",ew.CanUseCrudEndpoints="can_use_crud_endpoints",ew.CanUseDashboardQueriesEndpoints="can_use_dashboard_queries_endpoints",ew.CanUseMatviews="can_use_matviews",ew.CanUseStaticDataUploads="can_use_static_data_uploads",ew.CatalogStorageQuotaBytes="catalog_storage_quota_bytes",ew.CreatedAt="created_at",ew.CsvDownloadsPerMonth="csv_downloads_per_month",ew.CustomizableProfile="customizable_profile",ew.Description="description",ew.Id="id",ew.IncludedDatapoints="included_datapoints",ew.IncludedNanocredits="included_nanocredits",ew.IncludedQueryExecutions="included_query_executions",ew.InternalTierName="internal_tier_name",ew.IsPublic="is_public",ew.MaxAlertQueries="max_alert_queries",ew.MaxDashboardSchedules="max_dashboard_schedules",ew.MaxFolders="max_folders",ew.MaxPrivateDashboards="max_private_dashboards",ew.MaxPrivateQueries="max_private_queries",ew.MaxQueryEventRetentionDays="max_query_event_retention_days",ew.MaxQuerySchedules="max_query_schedules",ew.Name="name",ew.NanocreditsCostCents="nanocredits_cost_cents",ew.OperationCostsKey="operation_costs_key",ew.OrbBasePlanId="orb_base_plan_id",ew.Performance="performance",ew.QueryExecOverageDollarsCents="query_exec_overage_dollars_cents",ew.QueryTimeoutSec="query_timeout_sec",ew.ReleaseVersion="release_version",ew.RemoveWatermark="remove_watermark",ew.UpdatedAt="updated_at",(eS=ng||(ng={})).TeamsHandleKey="teams_handle_key",eS.TeamsOrbCustomerIdIx="teams_orb_customer_id_ix",eS.TeamsPkey="teams_pkey",eS.TeamsStripeCustomerIdIx="teams_stripe_customer_id_ix",(eq=nx||(nx={})).Bio="bio",eq.BrandColor="brand_color",eq.CreatedAt="created_at",eq.CsvDownloadQuotaExceededUntil="csv_download_quota_exceeded_until",eq.DiscordUrl="discord_url",eq.Email="email",eq.EnableProBadge="enable_pro_badge",eq.EnableServiceTierBadge="enable_service_tier_badge",eq.ExecutionQuotaExceededUntil="execution_quota_exceeded_until",eq.Handle="handle",eq.Id="id",eq.IsPro="is_pro",eq.LongDescription="long_description",eq.MaxDatapointsPerRequest="max_datapoints_per_request",eq.MaxExecutionsOverageCostCents="max_executions_overage_cost_cents",eq.MaxOverageCents="max_overage_cents",eq.Name="name",eq.NumParallelQueries="num_parallel_queries",eq.OrbCustomerId="orb_customer_id",eq.OrbSubscriptionAnchorDay="orb_subscription_anchor_day",eq.OrbSubscriptionId="orb_subscription_id",eq.Permissions="permissions",eq.ProfileImageUrl="profile_image_url",eq.ProfileTitle="profile_title",eq.QueryPriority="query_priority",eq.QueryTimeoutSeconds="query_timeout_seconds",eq.ServiceTierId="service_tier_id",eq.ShowMembers="show_members",eq.StripeCustomerId="stripe_customer_id",eq.Tags="tags",eq.TelegramHandle="telegram_handle",eq.TwitterHandle="twitter_handle",eq.UpdatedAt="updated_at",eq.Url="url",(eP=nb||(nb={})).EnableProBadge="enable_pro_badge",eP.EnableServiceTierBadge="enable_service_tier_badge",eP.IsPro="is_pro",eP.ShowMembers="show_members",(eD=nj||(nj={})).EnableProBadge="enable_pro_badge",eD.EnableServiceTierBadge="enable_service_tier_badge",eD.IsPro="is_pro",eD.ShowMembers="show_members",(eE=nC||(nC={})).Bio="bio",eE.BrandColor="brand_color",eE.CreatedAt="created_at",eE.CsvDownloadQuotaExceededUntil="csv_download_quota_exceeded_until",eE.DiscordUrl="discord_url",eE.Email="email",eE.EnableProBadge="enable_pro_badge",eE.EnableServiceTierBadge="enable_service_tier_badge",eE.ExecutionQuotaExceededUntil="execution_quota_exceeded_until",eE.Handle="handle",eE.Id="id",eE.IsPro="is_pro",eE.LongDescription="long_description",eE.MaxDatapointsPerRequest="max_datapoints_per_request",eE.MaxExecutionsOverageCostCents="max_executions_overage_cost_cents",eE.MaxOverageCents="max_overage_cents",eE.Name="name",eE.NumParallelQueries="num_parallel_queries",eE.OrbCustomerId="orb_customer_id",eE.OrbSubscriptionAnchorDay="orb_subscription_anchor_day",eE.OrbSubscriptionId="orb_subscription_id",eE.Permissions="permissions",eE.ProfileImageUrl="profile_image_url",eE.ProfileTitle="profile_title",eE.QueryPriority="query_priority",eE.QueryTimeoutSeconds="query_timeout_seconds",eE.ServiceTierId="service_tier_id",eE.ShowMembers="show_members",eE.StripeCustomerId="stripe_customer_id",eE.Tags="tags",eE.TelegramHandle="telegram_handle",eE.TwitterHandle="twitter_handle",eE.UpdatedAt="updated_at",eE.Url="url",(nI||(nI={})).TextWidgetsPkey="text_widgets_pkey",(eN=nk||(nk={})).CreatedAt="created_at",eN.DashboardId="dashboard_id",eN.Id="id",eN.Options="options",eN.Text="text",eN.UpdatedAt="updated_at",(eA=nw||(nw={})).CreatedAt="created_at",eA.DashboardId="dashboard_id",eA.Id="id",eA.Options="options",eA.Text="text",eA.UpdatedAt="updated_at",(nS||(nS={})).UserNoncePkey="user_nonce_pkey",(ez=nq||(nq={})).EthereumAddress="ethereum_address",ez.Nonce="nonce",(eT=nP||(nP={})).EthereumAddress="ethereum_address",eT.Nonce="nonce",(eU=nD||(nD={})).CognitoId="cognito_id",eU.CreatedAt="created_at",eU.CsvDownloadQuotaExceededUntil="csv_download_quota_exceeded_until",eU.DisabledAt="disabled_at",eU.Email="email",eU.EnableServiceTierBadge="enable_service_tier_badge",eU.EthereumAddressIsPublic="ethereum_address_is_public",eU.ExecutionQuotaExceededUntil="execution_quota_exceeded_until",eU.FromServiceTier="from_service_tier",eU.IsPro="is_pro",eU.MaxDatapointsPerRequest="max_datapoints_per_request",eU.MaxExecutionsOverageCostCents="max_executions_overage_cost_cents",eU.MaxOverageCents="max_overage_cents",eU.NumParallelQueries="num_parallel_queries",eU.OnboardingQsSkippedUntil="onboarding_qs_skipped_until",eU.OrbCustomerId="orb_customer_id",eU.OrbSubscriptionId="orb_subscription_id",eU.Permissions="permissions",eU.QueryPriority="query_priority",eU.ServiceTier="service_tier",eU.StripeCustomerId="stripe_customer_id",eU.UpdatedAt="updated_at",(eM=nE||(nE={})).EthereumAddress="ethereum_address",eM.Id="id",eM.ServiceTierName="service_tier_name",(eF=nN||(nN={})).Id="id",eF.Sum="sum",(eB=nA||(nA={})).UserServiceTiersNameKey="user_service_tiers_name_key",eB.UserServiceTiersPkey="user_service_tiers_pkey",(eO=nz||(nz={})).AllowPrivateQueriesAsViews="allow_private_queries_as_views",eO.ApiCallsPerMinute="api_calls_per_minute",eO.BaseMonthlyPriceDollarsCents="base_monthly_price_dollars_cents",eO.CanUseCrudEndpoints="can_use_crud_endpoints",eO.CanUseDashboardQueriesEndpoints="can_use_dashboard_queries_endpoints",eO.CanUseMatviews="can_use_matviews",eO.CanUseStaticDataUploads="can_use_static_data_uploads",eO.CatalogStorageQuotaBytes="catalog_storage_quota_bytes",eO.CreatedAt="created_at",eO.CsvDownloadsPerMonth="csv_downloads_per_month",eO.Description="description",eO.Id="id",eO.IncludedNanocredits="included_nanocredits",eO.IncludedQueryExecutions="included_query_executions",eO.InternalTierName="internal_tier_name",eO.IsPublic="is_public",eO.MaxAlertQueries="max_alert_queries",eO.MaxDashboardSchedules="max_dashboard_schedules",eO.MaxFolders="max_folders",eO.MaxPrivateDashboards="max_private_dashboards",eO.MaxPrivateQueries="max_private_queries",eO.MaxQueryEventRetentionDays="max_query_event_retention_days",eO.MaxQuerySchedules="max_query_schedules",eO.Name="name",eO.NanocreditsCostCents="nanocredits_cost_cents",eO.OperationCostsKey="operation_costs_key",eO.OrbBasePlanId="orb_base_plan_id",eO.Performance="performance",eO.QueryExecOverageDollarsCents="query_exec_overage_dollars_cents",eO.QueryTimeoutSec="query_timeout_sec",eO.ReleaseVersion="release_version",eO.RemoveWatermark="remove_watermark",eO.UpdatedAt="updated_at",(eQ=nT||(nT={})).AllowPrivateQueriesAsViews="allow_private_queries_as_views",eQ.ApiCallsPerMinute="api_calls_per_minute",eQ.BaseMonthlyPriceDollarsCents="base_monthly_price_dollars_cents",eQ.CanUseCrudEndpoints="can_use_crud_endpoints",eQ.CanUseDashboardQueriesEndpoints="can_use_dashboard_queries_endpoints",eQ.CanUseMatviews="can_use_matviews",eQ.CanUseStaticDataUploads="can_use_static_data_uploads",eQ.CatalogStorageQuotaBytes="catalog_storage_quota_bytes",eQ.CreatedAt="created_at",eQ.CsvDownloadsPerMonth="csv_downloads_per_month",eQ.Description="description",eQ.Id="id",eQ.IncludedNanocredits="included_nanocredits",eQ.IncludedQueryExecutions="included_query_executions",eQ.InternalTierName="internal_tier_name",eQ.IsPublic="is_public",eQ.MaxAlertQueries="max_alert_queries",eQ.MaxDashboardSchedules="max_dashboard_schedules",eQ.MaxFolders="max_folders",eQ.MaxPrivateDashboards="max_private_dashboards",eQ.MaxPrivateQueries="max_private_queries",eQ.MaxQueryEventRetentionDays="max_query_event_retention_days",eQ.MaxQuerySchedules="max_query_schedules",eQ.Name="name",eQ.NanocreditsCostCents="nanocredits_cost_cents",eQ.OperationCostsKey="operation_costs_key",eQ.OrbBasePlanId="orb_base_plan_id",eQ.Performance="performance",eQ.QueryExecOverageDollarsCents="query_exec_overage_dollars_cents",eQ.QueryTimeoutSec="query_timeout_sec",eQ.ReleaseVersion="release_version",eQ.RemoveWatermark="remove_watermark",eQ.UpdatedAt="updated_at",(eL=nU||(nU={})).UserNameIdx="user_name_idx",eL.UsersCognitoIdKey="users_cognito_id_key",eL.UsersEthereumAddressUnique="users_ethereum_address_unique",eL.UsersOrbCustomerIdIx="users_orb_customer_id_ix",eL.UsersPkey="users_pkey",eL.UsersStripeCustomerIdIx="users_stripe_customer_id_ix",eL.UsersUniqueEmail="users_unique_email",eL.UsersUniqueName="users_unique_name",(eR=nM||(nM={})).Bio="bio",eR.CognitoId="cognito_id",eR.CreatedAt="created_at",eR.CsvDownloadQuotaExceededUntil="csv_download_quota_exceeded_until",eR.DisabledAt="disabled_at",eR.DiscordUsername="discord_username",eR.Email="email",eR.EnableProBadge="enable_pro_badge",eR.EnableServiceTierBadge="enable_service_tier_badge",eR.EthereumAddress="ethereum_address",eR.EthereumAddressIsPublic="ethereum_address_is_public",eR.ExecutionQuotaExceededUntil="execution_quota_exceeded_until",eR.FromServiceTier="from_service_tier",eR.Handle="handle",eR.Id="id",eR.IsAvailableForGigs="is_available_for_gigs",eR.IsPro="is_pro",eR.MaxDatapointsPerRequest="max_datapoints_per_request",eR.MaxExecutionsOverageCostCents="max_executions_overage_cost_cents",eR.MaxOverageCents="max_overage_cents",eR.Name="name",eR.NumParallelQueries="num_parallel_queries",eR.OnboardingQsSkippedUntil="onboarding_qs_skipped_until",eR.OrbCustomerId="orb_customer_id",eR.OrbSubscriptionAnchorDay="orb_subscription_anchor_day",eR.OrbSubscriptionId="orb_subscription_id",eR.Permissions="permissions",eR.ProfileImageUrl="profile_image_url",eR.QueryPriority="query_priority",eR.QueryTimeoutSeconds="query_timeout_seconds",eR.ServiceTier="service_tier",eR.StripeCustomerId="stripe_customer_id",eR.TelegramHandle="telegram_handle",eR.TwitterHandle="twitter_handle",eR.UpdatedAt="updated_at",(eZ=nF||(nF={})).EnableProBadge="enable_pro_badge",eZ.EnableServiceTierBadge="enable_service_tier_badge",eZ.EthereumAddressIsPublic="ethereum_address_is_public",eZ.IsAvailableForGigs="is_available_for_gigs",eZ.IsPro="is_pro",(eH=nB||(nB={})).EnableProBadge="enable_pro_badge",eH.EnableServiceTierBadge="enable_service_tier_badge",eH.EthereumAddressIsPublic="ethereum_address_is_public",eH.IsAvailableForGigs="is_available_for_gigs",eH.IsPro="is_pro",(e$=nO||(nO={})).Bio="bio",e$.CognitoId="cognito_id",e$.CreatedAt="created_at",e$.CsvDownloadQuotaExceededUntil="csv_download_quota_exceeded_until",e$.DisabledAt="disabled_at",e$.DiscordUsername="discord_username",e$.Email="email",e$.EnableProBadge="enable_pro_badge",e$.EnableServiceTierBadge="enable_service_tier_badge",e$.EthereumAddress="ethereum_address",e$.EthereumAddressIsPublic="ethereum_address_is_public",e$.ExecutionQuotaExceededUntil="execution_quota_exceeded_until",e$.FromServiceTier="from_service_tier",e$.Id="id",e$.IsAvailableForGigs="is_available_for_gigs",e$.IsPro="is_pro",e$.MaxDatapointsPerRequest="max_datapoints_per_request",e$.MaxExecutionsOverageCostCents="max_executions_overage_cost_cents",e$.MaxOverageCents="max_overage_cents",e$.Name="name",e$.NumParallelQueries="num_parallel_queries",e$.OnboardingQsSkippedUntil="onboarding_qs_skipped_until",e$.OrbCustomerId="orb_customer_id",e$.OrbSubscriptionAnchorDay="orb_subscription_anchor_day",e$.OrbSubscriptionId="orb_subscription_id",e$.Permissions="permissions",e$.ProfileImageUrl="profile_image_url",e$.QueryPriority="query_priority",e$.QueryTimeoutSeconds="query_timeout_seconds",e$.ServiceTier="service_tier",e$.StripeCustomerId="stripe_customer_id",e$.TelegramHandle="telegram_handle",e$.TwitterHandle="twitter_handle",e$.UpdatedAt="updated_at",(nQ||(nQ={})).VisualizationWidgetsPkey="visualization_widgets_pkey",(eV=nL||(nL={})).CreatedAt="created_at",eV.DashboardId="dashboard_id",eV.Id="id",eV.Options="options",eV.UpdatedAt="updated_at",eV.VisualizationId="visualization_id",(eG=nR||(nR={})).CreatedAt="created_at",eG.DashboardId="dashboard_id",eG.Id="id",eG.Options="options",eG.UpdatedAt="updated_at",eG.VisualizationId="visualization_id",(nZ||(nZ={})).VisualizationsPkey="visualizations_pkey",(eK=nH||(nH={})).CreatedAt="created_at",eK.Description="description",eK.Id="id",eK.Name="name",eK.Options="options",eK.QueryId="query_id",eK.Type="type",eK.UpdatedAt="updated_at",(eW=n$||(n$={})).CreatedAt="created_at",eW.Description="description",eW.Id="id",eW.Name="name",eW.Options="options",eW.QueryId="query_id",eW.Type="type",eW.UpdatedAt="updated_at",(nV||(nV={})).NlqPromptsPkey="nlq_prompts_pkey",(eJ=nG||(nG={})).Answer="answer",eJ.CreatedAt="created_at",eJ.Id="id",eJ.QueryId="query_id",eJ.QueryVersion="query_version",eJ.Question="question",eJ.Reaction="reaction",eJ.UpdatedAt="updated_at",eJ.UserId="user_id",(eY=nK||(nK={})).Answer="answer",eY.CreatedAt="created_at",eY.Id="id",eY.QueryId="query_id",eY.QueryVersion="query_version",eY.Question="question",eY.Reaction="reaction",eY.UpdatedAt="updated_at",eY.UserId="user_id";let n2=(0,nY.Ps)(n0());(0,nY.Ps)(n1());var n3=n(51550),n6=n(32182),n4=n(83966);function n9(){let e=(0,nW._)(["\n  query GetExecution(\n    $execution_id: String!\n    $query_id: Int!\n    $parameters: [Parameter!]!\n  ) {\n    get_execution(\n      execution_id: $execution_id\n      query_id: $query_id\n      parameters: $parameters\n    ) {\n      execution_queued {\n        execution_id\n        execution_user_id\n        position\n        execution_type\n        created_at\n      }\n      execution_running {\n        execution_id\n        execution_user_id\n        execution_type\n        started_at\n        created_at\n      }\n      execution_succeeded {\n        execution_id\n        runtime_seconds\n        generated_at\n        columns\n        data\n        max_result_size_reached_bytes\n        request_max_result_size_bytes\n      }\n      execution_failed {\n        execution_id\n        type\n        message\n        metadata {\n          line\n          column\n          hint\n        }\n        runtime_seconds\n        generated_at\n      }\n    }\n  }\n"]);return n9=function(){return e},e}class n8 extends Error{constructor(e="The operation was canceled"){super(e)}}let n7=new n3.z({limit:100,maxSize:536870912,sizeCalculation:(e,t)=>(0,n6.Q)(e)+(0,n6.Q)(t)});async function*n5(e,t,n,r){let a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1e3,i=n7.get(e);if(void 0!==i){yield i;return}try{let i=await (0,n4.S)(re(e,t,n),r);for(yield i;rt(i);){if(r.aborted)return;await (0,n4.S)(function(e){return new Promise(t=>{setTimeout(t,e)})}(a),r),i=await (0,n4.S)(re(e,t,n),r),yield i}n7.set(e,i)}catch(e){if(r.aborted)return;throw e}}async function re(e,t,n){let{data:r}=await nX.no.query({query:n2,variables:{execution_id:e,query_id:t,parameters:n},fetchPolicy:"no-cache"});return function(e){var t,n,r,a;let{get_execution:i}=e,s=null!==(t=null==i?void 0:i.execution_queued)&&void 0!==t?t:null,o=null!==(n=null==i?void 0:i.execution_running)&&void 0!==n?n:null,l=null!==(r=null==i?void 0:i.execution_succeeded)&&void 0!==r?r:null,d=null!==(a=null==i?void 0:i.execution_failed)&&void 0!==a?a:null;if(null!==s)return{__typename:"ExecutionQueued",...s};if(null!==o)return{__typename:"ExecutionRunning",...o};if(null!==l)return{__typename:"ExecutionSucceeded",...l};if(null!==d)return{__typename:"ExecutionFailed",...d};throw new n8}(r)}function rt(e){return"ExecutionQueued"===e.__typename||"ExecutionRunning"===e.__typename}function rn(e){return"ExecutionSucceeded"===e.__typename||"ExecutionFailed"===e.__typename}(0,nY.Ps)(n9())},32182:function(e,t,n){"use strict";n.d(t,{Q:function(){return a}});let r={undefined:e=>0,boolean:e=>4,number:e=>8,string:e=>2*e.length,function:e=>0,symbol:e=>0,bigint:e=>0,object:e=>null===e?0:Object.keys(e).reduce((t,n)=>a(n)+a(e[n])+t,0)};function a(e){return r[typeof e](e)}},23502:function(e,t,n){"use strict";n.d(t,{X:function(){return r},k:function(){return a}});let r=e=>{var t;return a(null!==(t=null==e?void 0:e.join(", "))&&void 0!==t?t:"").join(", ")},a=e=>e.trim().split(",").map(e=>e.trim().replace(/[ ]+/g," ")).filter(Boolean)},50876:function(e,t,n){"use strict";n.d(t,{OG:function(){return d},wI:function(){return u},zQ:function(){return c}});var r=n(82729),a=n(57831);n(76138);var i=n(39137),s=n(84937);function o(){let e=(0,r._)(["\n  query FindSessionTeamPrivateInfoById($teamId: Int!) {\n    team(id: $teamId) {\n      memberFields {\n        stripeCustomerId\n      }\n    }\n  }\n"]);return o=function(){return e},e}function l(){let e=(0,r._)(["\n  query FindTeamRole($user_id: Int!, $team_id: Int!) {\n    memberships(\n      filters: { userId: { equals: $user_id }, teamId: { equals: $team_id } }\n      pagination: { first: 1 }\n    ) {\n      edges {\n        node {\n          id\n          role\n          status\n        }\n      }\n    }\n  }\n"]);return l=function(){return e},e}function d(e){var t,n,r,i,o;let l=(0,a.kP)(),d=(0,s.ryi)({skip:!(null==l?void 0:l.user)||(null==e?void 0:e.type)!=="team",context:{session:l},variables:{user_id:null!==(i=null==l?void 0:null===(t=l.user)||void 0===t?void 0:t.id)&&void 0!==i?i:-1,team_id:null!==(o=null==e?void 0:e.id)&&void 0!==o?o:-1}});if(!e)return{role:void 0,loading:d.loading};let u=null===(r=d.data)||void 0===r?void 0:null===(n=r.memberships.edges[0])||void 0===n?void 0:n.node;return(null==u?void 0:u.status)==="invite_accepted"?{role:u.role,loading:d.loading}:{role:void 0,loading:d.loading}}function u(e){let{role:t,loading:n}=d(e),r=!!(!n&&t&&(null==e?void 0:e.type)==="team"&&["admin","editor"].includes(t));return r}(0,i.Z)(o()),(0,i.Z)(l());let c=e=>!(e.length<1)&&!(e.length>=42)&&!!/^[a-zA-Z0-9_]+$/.test(e)},73874:function(e,t,n){"use strict";n.d(t,{oU:function(){return v},sj:function(){return m},VJ:function(){return f},Vx:function(){return j},XR:function(){return w},fl:function(){return I},QS:function(){return S},dL:function(){return k},Ms:function(){return C},n7:function(){return x},RQ:function(){return y},Ln:function(){return g}});var r=n(48403),a=n.n(r),i=n(18446),s=n.n(i),o=n(76138),l=n(14800),d=n(82729),u=n(39137);function c(){let e=(0,d._)(["\n  query FindVisual($id: Int!) {\n    visualization(id: $id) {\n      id\n      type\n      name\n      description\n      options\n      createdAt\n      query {\n        id\n        name\n        description\n        showWatermark\n        parameters\n        datasetId\n        user {\n          id\n          name\n          profileImageUrl\n        }\n        team {\n          id\n          name\n          handle\n          profileImageUrl\n        }\n      }\n    }\n  }\n"]);return c=function(){return e},e}let _=(0,u.Z)(c());var h=n(61575),p=n(46367);let m=async(e,t,n)=>{var r,a,i,s,l,d,u,c,m;let f=await o.bj.query({query:_,variables:{id:e},context:{session:t,apiKey:n},fetchPolicy:"no-cache"});if(!f.data.visualization)throw new v(e);return(0,h.bK)({...f.data.visualization,type:f.data.visualization.type,created_at:f.data.visualization.createdAt,query_details:{query_id:f.data.visualization.query.id,name:f.data.visualization.query.name,description:null!==(l=f.data.visualization.query.description)&&void 0!==l?l:void 0,show_watermark:f.data.visualization.query.showWatermark,parameters:f.data.visualization.query.parameters,dataset_id:f.data.visualization.query.datasetId,user:(0,p.n)(f.data.visualization.query.user)?{id:f.data.visualization.query.user.id,name:f.data.visualization.query.user.name,profile_image_url:f.data.visualization.query.user.profileImageUrl}:void 0,team:{id:null!==(d=null===(r=f.data.visualization.query.team)||void 0===r?void 0:r.id)&&void 0!==d?d:0,name:null!==(u=null===(a=f.data.visualization.query.team)||void 0===a?void 0:a.name)&&void 0!==u?u:"",handle:null!==(c=null===(i=f.data.visualization.query.team)||void 0===i?void 0:i.handle)&&void 0!==c?c:"",profile_image_url:null!==(m=null===(s=f.data.visualization.query.team)||void 0===s?void 0:s.profileImageUrl)&&void 0!==m?m:void 0}}})};class v extends Error{constructor(e){super("visual not found: ".concat(e))}}let f=e=>b(e)?"Query results":C(e)?"Text":S(e)?"Param":e.name&&e.name.toLowerCase()!==e.type?e.name:w(e)&&"column"===e.options.globalSeriesType?"Bar chart":w(e)?a()("".concat(e.options.globalSeriesType," chart")):a()(e.type),y=e=>{switch(e.type){case"text":return"text";case"param":return"param";case"table":return"bullet-list";case"counter":return"star";case"chart":return g(e.options.globalSeriesType)}},g=e=>{switch(e){case"column":return"bar-chart";case"area":return"area-chart";case"scatter":return"scatter-chart";case"line":return"line-chart";case"pie":return"pie-chart"}},x=e=>[...e].sort((e,t)=>b(e)?-1:b(t)?1:e.created_at&&t.created_at?e.created_at.localeCompare(t.created_at):0),b=e=>k(e)&&s()(e.name,(0,l.sx)().name),j=e=>void 0!==e&&!C(e)&&!S(e),C=e=>void 0!==e&&"text"===e.type,I=e=>void 0!==e&&"counter"===e.type,k=e=>void 0!==e&&"table"===e.type,w=e=>void 0!==e&&"chart"===e.type,S=e=>void 0!==e&&"param"===e.type},43740:function(e,t,n){"use strict";n.d(t,{T:function(){return l}});var r=n(67294),a=n(25247),i=n(40802),s=n(57831),o=n(10777);let l=e=>{var t;let n=(0,s.kP)(),[l,u]=(0,r.useState)(!1);return(0,r.useEffect)(()=>{u(!0)},[]),(0,o.a)({queryKey:["fetch-amplitude-flags",null==n?void 0:null===(t=n.user)||void 0===t?void 0:t.id],queryFn:()=>a.Z.fetchVariants().catch(e=>i.Tb(e)),refetchInterval:5*d}),{loading:!l,enabled:"on"===a.Z.getVariant(e).value}},d=6e4},24426:function(e,t,n){"use strict";n.d(t,{N:function(){return a}});var r=n(43740);let a=e=>{let{loading:t,enabled:n}=(0,r.T)(e);return!t&&n}},48821:function(e,t,n){"use strict";n.d(t,{Z:function(){return l}});var r=n(11163);function a(e,t){return{query:Object.fromEntries(Object.entries({...e.query,...t}).filter(e=>{let[,t]=e;return void 0!==t}))}}var i=n(18446),s=n.n(i);let o=e=>e;function l(e,t){let{onChangeTransform:n=d}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=(0,r.useRouter)(),l=e(i.query);return[l,function(e){!function(e,t){let{onChangeTransform:n=o}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a(e,t);s()(e.query,r.query)||e.push(a(e,n(t)),void 0,{shallow:!0})}(i,t(e),{onChangeTransform:n})},function(e){return a(i,n(t(e)))}]}let d=e=>e},84077:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(48821);function a(e,t,n){return(0,r.Z)(function(n){let r=n[e];return"string"==typeof r?r:t},function(n){return n===t?{[e]:void 0}:{[e]:n}},n)}},7659:function(e,t,n){"use strict";n.d(t,{b:function(){return a}});var r=n(67294);function a(e,t,n){let{delayMs:a,skipInitialCallback:i=!0}=e,s=(0,r.useRef)({hasBeenCalled:!1}),o=(0,r.useCallback)(()=>t(),n);(0,r.useEffect)(()=>{if(i&&!s.current.hasBeenCalled){s.current.hasBeenCalled=!0;return}let e=setTimeout(o,a);return()=>clearTimeout(e)},[a,o,i])}},24357:function(e,t,n){"use strict";n.d(t,{c:function(){return i}});var r=n(7659),a=n(67294);function i(e,t){let{delayMs:n}=e,[i,s]=(0,a.useState)(t);return(0,r.b)({delayMs:n},()=>s(t),[t]),i}},46509:function(e,t,n){"use strict";n.d(t,{v:function(){return s}});var r=n(18446),a=n.n(r),i=n(67294);function s(e,t){let n=(0,i.useRef)();return void 0!==n.current&&a()(t,n.current.key)||(n.current={key:t,value:e()}),n.current.value}},71909:function(e,t,n){"use strict";n.d(t,{J:function(){return a},T:function(){return i}});var r=n(11163);function a(){let e=(0,r.useRouter)(),{asPath:t}=e;if(t.startsWith("/auth/")){let{next:t}=e.query;return"string"==typeof t?i(t):"/auth/login"}return i(t)}function i(e){return e.length>0?"/auth/login?next=".concat(encodeURIComponent(e)):"/auth/login"}},57322:function(e,t,n){"use strict";n.d(t,{Y:function(){return a}});var r=n(11163);function a(){let e=(0,r.useRouter)(),{asPath:t}=e;if(t.startsWith("/auth/")){let{next:t}=e.query;return"string"==typeof t?i(t):"/auth/register"}return i(t)}function i(e){return e.length>0?"/auth/register?next=".concat(encodeURIComponent(e)):"/auth/register"}},34728:function(e,t,n){"use strict";n.d(t,{N:function(){return c}});var r=n(82729),a=n(70794),i=n(57831),s=n(84937),o=n(39137),l=n(61575);function d(){let e=(0,r._)(["\n  query GetUserStorage {\n    billableUsage {\n      bytes_used: bytesUsed\n      bytes_allowed: bytesAllowed\n    }\n  }\n"]);return d=function(){return e},e}function u(){let e=(0,r._)(["\n  query GetTeamStorageUsage($teamId: Int!) {\n    billableUsage: teamBillableUsage(id: $teamId) {\n      bytes_used: bytesUsed\n      bytes_allowed: bytesAllowed\n    }\n  }\n"]);return u=function(){return e},e}let c=e=>{var t,n,r;let o=(0,i.kP)(),{data:d,loading:u}=(0,s.QEH)({skip:!(null==o?void 0:o.user)||(null==e?void 0:e.type)!=="user",context:{session:o},fetchPolicy:"cache-first"}),{data:c,loading:_}=(0,s.AJK)({skip:!(null==o?void 0:o.user)||(null==e?void 0:e.type)!=="team",context:{session:o},variables:{teamId:null!==(n=null==e?void 0:e.id)&&void 0!==n?n:-1},fetchPolicy:"cache-first"}),{bytes_allowed:h=(0,a.Z)(0),bytes_used:p=(0,a.Z)(0)}=null!==(r=null===(t=null!=d?d:c)||void 0===t?void 0:t.billableUsage)&&void 0!==r?r:{};return{isLoading:u||_,isStorageLimitReached:(0,l.$K)(h)&&(0,l.$K)(p)&&p.gt(h),bytesAllowed:null==h?void 0:h.toNumber(),bytesUsed:null==p?void 0:p.toNumber()}};(0,o.Z)(d()),(0,o.Z)(u())},36568:function(e,t,n){"use strict";n.r(t),n.d(t,{NotFoundPage:function(){return l}});var r=n(85893),a=n(36889),i=n(80403),s=n(34201),o=n(31821);let l=()=>(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(o.yG,{title:"404 Page Not Found",robots:"noindex"}),(0,r.jsx)(i.h,{}),(0,r.jsx)(s.r,{size:"md",children:(0,r.jsx)(a.M,{children:"404 Page Not Found or Private"})})]});t.default=l},83966:function(e,t,n){"use strict";n.d(t,{S:function(){return a}});var r=n(31792);function a(e,t){return Promise.race([e,new Promise((e,n)=>{t.addEventListener("abort",()=>{n(new r._L)})})])}},83267:function(e,t,n){"use strict";function r(e){let t=e.split("_"),[n,r]=t,a=Number(r);if(2!==t.length)throw Error("Could not parse external_customer_id=".concat(e,", invalid format:")+" Should match /^(user|team)_d+$/ (e.g. user_69420).");if(!Number.isInteger(a))throw Error("Could not parse external_customer_id=".concat(e,", invalid id=").concat(r,":")+" Should be an integer");switch(n){case"user":case"team":return{type:n,id:a};default:throw Error("Could not parse external_customer_id=".concat(e,", invalid type=").concat(n,":")+' Should be "user" or "team"')}}n.d(t,{Qc:function(){return r}})},31269:function(e,t,n){"use strict";n.d(t,{GI:function(){return l},Tw:function(){return r},Yd:function(){return o},ff:function(){return i},qP:function(){return s},uw:function(){return a}});let r=(e,t,n)=>n.indexOf(e)===t,a=e=>(t,n,r)=>r.findIndex(e(t))===n,i=e=>t=>!e(t);function s(e){return Object.entries(e)}function o(e){return Object.keys(e)}function l(e){if(!Array.isArray(e))return!1;for(let t of e)if("string"!=typeof t)return!1;return!0}},6826:function(e,t,n){"use strict";n.d(t,{h:function(){return r}});let r=(e,t)=>{if(!e)throw Error(t)}},84899:function(e,t,n){"use strict";n.d(t,{r:function(){return r}});let r=e=>{let t="11".split(",").map(e=>Number(e.trim()));return!t.includes(e)}},39612:function(e,t,n){"use strict";n.d(t,{EV:function(){return x},EZ:function(){return y},NE:function(){return m},NL:function(){return j},Y:function(){return b},ZC:function(){return p},kE:function(){return f},mD:function(){return C},p6:function(){return v},uQ:function(){return g}});var r=n(32475),a=n.n(r),i=n(55754),s=n(51196),o=n.n(s),l=n(63148),d=n.n(l),u=n(47951),c=n(13120),_=n.n(c),h=n(40802);let p=e=>_()(0,1e3*e),m=e=>{let t=Math.floor(e/60),n=a()(String(t),2,"0"),r=a()(String(e-60*t),2,"0");return"".concat(n,":").concat(r)},v=(e,t,n)=>{let r=Math.abs(d()(b(n),b(t)));return r>180?(0,i.Z)(b(e),"LLL yyyy"):r>1?(0,i.Z)(b(e),"LLL do"):(0,i.Z)(b(e),"HH:mm")},f=e=>(0,i.Z)(b(e),"LLL yyyy"),y=e=>(0,i.Z)(b(e),"yyyy-MM-dd HH:mm"),g=e=>(0,i.Z)(b(e),"MMMM d, yyyy"),x=e=>(0,i.Z)(b(e),"MMMM do, yyyy — h:mm a"),b=e=>(0,u.Z)(j(e),"UTC"),j=e=>{let t=o()(e);if(I(e)){if(k(e)){let n=o()(e.replace(q,"Z"));isNaN(n.valueOf())?h.Tb(Error('Failed to correctly change timezone form UTC to Z for date "'.concat(e,'"'))):t=n}}else{let n=o()(e+"Z");isNaN(n.valueOf())?h.Tb(Error('Failed to correctly add timezone to date "'.concat(e,'"'))):t=n}return isNaN(t.valueOf())&&h.Tb(Error('Invalid ISO date: "'.concat(e,'"'))),t},C=e=>{if(!w.test(e))return!1;let t=!isNaN(o()(e.replace(q,"Z")));return!!t||(h.Tb(Error('isolikeRegexp interpreted "'.concat(e,'" as a date, but it cannot be parsed.'))),!1)},I=e=>S.test(e),k=e=>q.test(e),w=/^\d{4}-[01]\d-[0-3]\d([T ][0-2]\d:[0-5]\d(:[0-5]\d(\.\d+)?)?)?([+-][0-2]\d:[0-5]\d|Z| UTC)?$/,S=/([+-][0-2]\d:[0-5]\d|Z| UTC)$/,q=/ UTC$/},47701:function(e,t,n){"use strict";n.d(t,{V:function(){return s},j:function(){return i}});var r=n(91036),a=n.n(r);let i=e=>a()(e,o),s=e=>l.some(t=>t.test(e)),o={allowedTags:["a","b","i"],allowedSchemes:["https"],allowedAttributes:{a:["href","target"]},exclusiveFilter:e=>"a"===e.tag&&s(e.attribs.href)},l=[RegExp("^https://([a-z0-9]+[.])*flipsidecrypto.com")]},79723:function(e,t,n){"use strict";n.d(t,{a:function(){return _}});var r=n(9980),a=n.n(r),i=n(62817),s=n.n(i),o=n(68486),l=n(51577),d=n(47701),u=n(14253),c=n.n(u);let _=function(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1];return t?p.render(e):h.render(e)},h=a()({typographer:!1,linkify:!0,html:!1}),p=a()({typographer:!1,linkify:!1,html:!1}).use(s(),{replaceLink:(e,t,n)=>("a"===n.tag&&(0,d.V)(e)&&(l.k.debug("removed disallowed link:",e),n.attrs=[]),e)}).use(o.Z,{permalink:o.Z.permalink.linkInsideHeader({symbol:"\uD83D\uDD17",placement:"after",class:c().markdownAnchor}),slugify:function(e){return e.toLowerCase().replace(/\s+/g,"-").replace(/[^\w-]+/g,"").replace(/--+/g,"-").replace(/^-|-$/g,"")}})},46166:function(e,t,n){"use strict";n.d(t,{C_:function(){return l},UM:function(){return c},WJ:function(){return u},Yh:function(){return o},oR:function(){return _},wR:function(){return h},wY:function(){return s},xT:function(){return d}});var r=n(10475),a=n(96752),i=n(61575);let s=e=>(0,a._C)(e)?o(e.owner.handle,e.slug):d(e.id),o=(e,t,n)=>m(e,t,n),l=(e,t,n)=>p(e,t,n),d=(e,t)=>m("queries",e,t),u=(e,t,n)=>p("queries",e,t,n),c=(e,t,n)=>m("embeds",e,t,n),_=(e,t,n)=>p("embeds",e,t,n),h=e=>{if(!e.toLowerCase().includes("javascript")&&e.startsWith("/"))return e},p=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,r.tQ)()+m(...t)},m=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return"/"+t.filter(i.C_).join("/")}},49273:function(e,t,n){"use strict";n.d(t,{DG:function(){return l},Gy:function(){return d},dD:function(){return o},tk:function(){return s}});var r=n(80129),a=n.n(r);let i=(e,t)=>e[t]instanceof Array?e[t].filter(Boolean):"string"==typeof e[t]?[e[t]].filter(Boolean):[],s=(e,t)=>i(e,t)[0],o=e=>a().parse(e.replace(/^\?/,"")),l=()=>window.location.search,d=()=>o(l())},13426:function(e,t,n){"use strict";n.d(t,{Cu:function(){return d},GD:function(){return o},k_:function(){return u},w:function(){return l}});var r=n(31304),a=n.n(r),i=n(94909),s=n.n(i);let o=e=>a()(s()(e),{lower:!0,remove:/[_*+~.()'"!:@]/g}),l=e=>{let t=RegExp("^([a-z0-9]+-)*[a-z0-9]+$");return t.test(e)},d=e=>a()(s()(e),{replacement:"_",lower:!0,remove:/[*+~.()'"!:@]/g}),u=e=>{let t=RegExp("^([a-z0-9]+[_])*[a-z0-9]+$");return t.test(e)}},94682:function(e,t,n){"use strict";n.d(t,{FU:function(){return l},YX:function(){return s},k5:function(){return o},uf:function(){return i}});var r=n(92077),a=n.n(r);let i=(e,t)=>{if(1e-6>Math.abs(e)||!t)return String(e);try{return a()(e).format(t)}catch(t){return String(e)}},s=(e,t)=>{let n=parseInt(e,10);return Number.isNaN(n)?t:n},o=(e,t,n)=>{let r=s(e,t);return Math.max(t,Math.min(n,r))},l=e=>"string"==typeof e&&e.endsWith("%")&&Number.isFinite(parseFloat(e))},93836:function(e,t,n){"use strict";n.d(t,{F2:function(){return d},Jj:function(){return _},ZX:function(){return h},nW:function(){return c},vQ:function(){return u}});var r=n(67294),a=n(83787),i=n(49273),s=n(34968),o=n(51577),l=n(11163);let d=e=>{let t=(0,l.useRouter)(),[n,d]=r.useState(()=>(0,s.MY)(e,(0,i.DG)())),[u,c]=r.useState(()=>(0,s.MY)(e,(0,i.DG)())),[_,h]=r.useState(()=>(0,a.Y2)(e,n)),[p,m]=r.useState([]);r.useEffect(()=>{h((0,a.Y2)(e,n))},[e,n]);let v=r.useMemo(()=>(0,a.Y2)(e,u),[e,u]),f=r.useCallback(()=>{let e=(0,s.lW)(n),r={...t.query};u.forEach(e=>{r[(0,s.QY)(e)]&&delete r[s.QY(e)]}),t.push({query:{...r,...e}},void 0,{shallow:!0}).catch(o.k.warn),c(n)},[n,t]),y=r.useCallback(e=>d((0,a.$Y)(n,e)),[e,n]);return r.useMemo(()=>({defaults:e,applied:u,appliedMerged:v,merged:_,overrides:n,removed:p,onApply:f,onOverride:y,setRemoved:m}),[e,u,_,n,f,y])},u=e=>{let[t,n]=r.useMemo(()=>(0,a.Ks)(e),[e]),i=d(t);return r.useMemo(()=>({state:i,mapping:n}),[i,n])},c=(e,t)=>r.useMemo(()=>"number"==typeof t&&e.mapping[t]?_(t,e):[],[e,t]);function _(e,t){var n,r;return null!==(r=null===(n=t.mapping[e])||void 0===n?void 0:n.map(e=>(0,a.lO)(t.state.appliedMerged,e)))&&void 0!==r?r:[]}function h(e,t){var n,r;return null!==(r=null===(n=t.mapping[e])||void 0===n?void 0:n.map(e=>(0,a.lO)(t.state.merged,e)))&&void 0!==r?r:[]}},83787:function(e,t,n){"use strict";n.d(t,{$Y:function(){return k},Ds:function(){return y},Fh:function(){return q},KC:function(){return E},Ks:function(){return I},PM:function(){return D},Y2:function(){return j},bp:function(){return b},in:function(){return P},kZ:function(){return w},lO:function(){return S},p8:function(){return g},qV:function(){return x},yi:function(){return f}});var r=n(85564),a=n.n(r),i=n(18172),s=n(44908),o=n.n(s),l=n(45578),d=n.n(l),u=n(61575),c=n(73874),_=n(57557),h=n.n(_),p=n(2568),m=n.n(p);let v="unnamed_parameter",f=(e,t)=>{let n=null!=t?t:v;for(let t=2;e.find(e=>e.key===n);t++)n="".concat(v,"_").concat(t);let r={type:"text",key:n,value:"default value"};return{parameter:r,parameters:b([...e,r])}},y=e=>"{{".concat(e.key,"}}"),g=e=>{let t=e.split(/\n+/).map(e=>e.trim()).filter(Boolean);return o()(t)},x=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return o()(e).map(e=>e.trim()).filter(Boolean).join("\n")},b=e=>[...e].sort((e,t)=>e.key.localeCompare(t.key)),j=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];let r=a()(t).reverse(),i=d()(r,q);return b(i)},C=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];let r=[];t.forEach(e=>{e.parameters.forEach(t=>r.push({...t,query_id:e.query_id,default_value:t.value,default_values:t.values}))});let i=a()(r),s=d()(i,q);return b(s)},I=e=>{var t;if(!(null==e?void 0:null===(t=e.visualization_widgets)||void 0===t?void 0:t.length))return[[],{}];let n=e.visualization_widgets.map(e=>e.visualization).filter(c.Vx).map(e=>e.query_details).filter(u.C_),r=C(...n),a={};return n.forEach(e=>{var t;a[e.query_id]=(null!==(t=e.parameters)&&void 0!==t?t:[]).map(e=>q({...e,default_value:e.value,default_values:e.values}))}),[r,a]},k=(e,t)=>(0,i.ZP)(e,n=>{let r=w(e,t);-1===r?n.push(t):""===t.value?n.splice(r,1):n[r]=t}),w=(e,t)=>e.findIndex(e=>q(e)===q(t)),S=(e,t)=>e.find(e=>q(e)===t),q=e=>{var t;return JSON.stringify({type:e.type,key:e.key,value:e.default_value,values:e.default_values,isFreeformAllowed:e.isFreeformAllowed,enumOptions:"enum"===e.type?null===(t=e.enumOptions)||void 0===t?void 0:t.slice().sort():void 0})};function P(e){var t;return void 0!==e.value&&e.value===e.default_value||void 0!==e.values&&e.values.join("\n")===(null===(t=e.default_values)||void 0===t?void 0:t.join("\n"))}function D(e){return e.map(e=>h()(e,["description","query_id","default_value","default_values"]))}function E(e){return m()(D(b(e)).map(e=>JSON.stringify(e)).join("-"))}},34968:function(e,t,n){"use strict";n.d(t,{MY:function(){return _},QY:function(){return u},lW:function(){return c}});var r,a=n(49273),i=n(31269);n(80129);var s=n(2568),o=n.n(s),l=n(17204),d=n.n(l);let u=e=>"".concat(e.key,"_").concat(e.type[0]).concat(h("".concat(e.type[0]).concat(e.query_id).concat(e.default_value).concat(null!==(r=e.default_values)&&void 0!==r?r:"").concat(e.isFreeformAllowed?"'freeform'":"")));function c(e){return d()(e.map(e=>{let t=u(e);if(e.isMultiselect){var n,r;return(null===(n=e.values)||void 0===n?void 0:n.join("\n"))!==(null===(r=e.default_values)||void 0===r?void 0:r.join("\n"))?[t,e.values]:[t,[]]}return e.value!==e.default_value?[t,e.value]:[t,void 0]}))}let _=(e,t)=>{let n=(0,a.dD)(t),r=[];return e.forEach(e=>{var t,a,s;let o=h("".concat(e.type[0]).concat(e.query_id).concat(e.default_value).concat(null!==(t=e.default_values)&&void 0!==t?t:"").concat(e.isFreeformAllowed?"'freeform'":"")),l="".concat(e.key,"_").concat(e.type[0]).concat(o);function d(t){var n;return!0===e.isFreeformAllowed||!!e.enumFromResults||(null===(n=e.enumOptions)||void 0===n?void 0:n.includes(t))}if(e.isMultiselect){let t=(function(){let e=n[l];return"string"==typeof e?[e]:(0,i.GI)(e)?e:[]})().filter(d);t.length>0&&t.join("\n")!==(null===(s=e.default_values)||void 0===s?void 0:s.join("\n"))&&r.push({...e,values:t})}else{let t=null!==(a=n[l])&&void 0!==a?a:n[e.key];"string"==typeof t&&""!==t&&t!==e.default_value&&("enum"!==e.type||d(t))&&("number"!==e.type||Number.isFinite(parseFloat(t)))&&r.push({...e,value:t})}}),r},h=e=>o()(e).slice(0,5)},44914:function(e,t,n){"use strict";n.d(t,{Kz:function(){return l},fw:function(){return s},l9:function(){return o}});var r=n(57831),a=n(50876),i=n(67294);function s(e){return d(["admin"],e)}function o(e){return d(["admin","editor"],e)}function l(e){return d(["admin","editor","view"],e)}function d(e,t){let n=i.useRef(),s=(0,r.kP)(),{role:o,loading:l}=(0,a.OG)(t);if(!t)return!1;switch(t.type){case"user":var d;return n.current=(null==s?void 0:null===(d=s.user)||void 0===d?void 0:d.id)===t.id,n.current;case"team":if(l&&n.current)return n.current;return n.current=e.includes(null!=o?o:"viewer"),n.current}}},75546:function(e,t,n){"use strict";n.d(t,{b:function(){return v},q:function(){return f}});var r=n(82729),a=n(18446),i=n.n(a),s=n(67294),o=n(57831),l=n(76138),d=n(31792),u=n(46509),c=n(96008),_=n(83787),h=n(39137),p=n(84937);function m(){let e=(0,r._)(["\n  query GetResult(\n    $query_id: Int!\n    $parameters: [ExecutionParameterInput!]!\n    $can_refresh: Boolean!\n  ) {\n    resultSetForQuery(\n      queryId: $query_id\n      parameters: $parameters\n      canRefresh: $can_refresh\n    ) {\n      job_id: pendingExecutionId\n      result_id: completedExecutionId\n      error_id: failedExecutionId\n    }\n  }\n"]);return m=function(){return e},e}function v(e,t,n){let{can_refresh:r,apiKey:a,skip:c}=n,{sessionLoading:h,session:m}=(0,s.useContext)(o.B3),[v,f]=(0,s.useState)(!0),[x,b]=(0,s.useState)(),[j,C]=(0,s.useState)(),[I,k]=(0,s.useState)(),[w,S]=(0,s.useState)(),q=function(){let e=(0,s.useRef)(null);(0,s.useEffect)(()=>()=>{null!==e.current&&e.current.abort()},[]);let t=(0,s.useCallback)(()=>(null!==e.current&&e.current.abort(),e.current=new AbortController,e.current),[]);return t}(),P=(0,u.v)(()=>(0,_.PM)(null!=t?t:[]),t),D=(0,s.useRef)(),E=(0,s.useCallback)(async(t,n)=>{var i,s;if(void 0===e||c)return;let o=null!==(s=null==I?void 0:null===(i=I.job)||void 0===i?void 0:i.done)&&void 0!==s&&s;o&&((null==I?void 0:I.error)!==void 0?C(I):b(I)),k(void 0),f(!0);let l=q();try{void 0!==t?await y(null!=n?n:e,P,t,l.signal,k):await g(e,P,m,a,r,l.signal,b,C,k)}catch(e){if(!(e instanceof Error))throw e;if(e instanceof d._L){k(void 0);return}S(/Unexpected end of JSON input/.test(e.message)?Error("Failed to read response from server. This can happen if the result set is too large.",{cause:e}):e)}finally{f(!1)}},[e,P,m,a,r,I,q,b,C,k,S,c]);(0,s.useEffect)(()=>{if(void 0===a&&h||c)return;let t={queryId:e,normalizedParameters:P,can_refresh:r,apiKey:a};i()(t,D.current)||(C(void 0),b(void 0),E(),D.current=t)},[e,P,r,a,h,E,c]),(0,s.useEffect)(()=>{var t;let n;if(void 0===e||c)return;let a=(t=e=>{var t,n;let r=null!==(n=null===(t=e.resultSetForQuery)||void 0===t?void 0:t.job_id)&&void 0!==n?n:null;null!==r&&E(r)},n=!0,l.bj.watchQuery({query:p.VrE,variables:{query_id:e,parameters:P,can_refresh:r}}).subscribe({next:e=>{let{data:r}=e;if(n){n=!1;return}t(r)}}));return()=>{a.unsubscribe()}},[e,P,r,E,c]);let N=(0,s.useMemo)(()=>{var e,t,n,r;let a=null!==(t=null==I?void 0:null===(e=I.job)||void 0===e?void 0:e.done)&&void 0!==t&&t;return{loading:v,error:a?null==I?void 0:I.error:null==j?void 0:j.error,matrix:null!==(n=null==I?void 0:I.matrix)&&void 0!==n?n:null==x?void 0:x.matrix,meta:null!==(r=null==I?void 0:I.meta)&&void 0!==r?r:null==x?void 0:x.meta,job:null==I?void 0:I.job,fetchError:w,refresh:E}},[v,x,j,I,w,E]);return N}function f(e){let{queryId:t,parameters:n,can_refresh:r,apiKey:a,session:i}=e,s=(0,_.PM)(null!=n?n:[]);return{queryDoc:p.VrE,context:{session:i,apiKey:a},variables:{query_id:null!=t?t:0,parameters:s,can_refresh:r}}}async function y(e,t,n,r,a){let i=(0,d.gc)(n,e,t,r);for await(let t of i)r.aborted||a({job:function(e,t){var n,r,a;if((0,d.Q6)(t))return{done:!0};switch(t.__typename){case"ExecutionQueued":return{id:t.execution_id,query_id:e,category:t.execution_type,user_id:null!==(n=t.execution_user_id)&&void 0!==n?n:void 0,created_at:t.created_at,is_running:!1,queue_position:t.position,done:!1};case"ExecutionRunning":return{id:t.execution_id,query_id:e,category:t.execution_type,user_id:null!==(r=t.execution_user_id)&&void 0!==r?r:void 0,created_at:t.created_at,is_running:!0,done:!1,progress_percentage:null!==(a=t.progress_percentage)&&void 0!==a?a:void 0}}}(e,t),meta:function(e,t){var n,r;if("ExecutionSucceeded"===t.__typename)return{query_id:e,job_id:t.execution_id,result_id:t.execution_id,runtime:t.runtime_seconds,generated_at:t.generated_at,max_result_size_reached_bytes:null!==(n=t.max_result_size_reached_bytes)&&void 0!==n?n:void 0,request_max_result_size_bytes:null!==(r=t.request_max_result_size_bytes)&&void 0!==r?r:void 0}}(e,t),matrix:function(e){if("ExecutionSucceeded"!==e.__typename)return;let{data:t=null,columns:n=null}=e;if(null===t)return;let r=(0,c.f0)(t);return null!==n&&(0,c.$Q)(r,n),{rows:t,columns:r}}(t),error:function(e){if("ExecutionFailed"!==e.__typename)return;let t=void 0!==e.metadata&&null!==e.metadata?{line:e.metadata.line,position:e.metadata.column,hint:e.metadata.hint}:void 0;return{id:e.execution_id,job_id:e.execution_id,message:e.message,type:e.type,generated_at:e.generated_at,metadata:t,runtime:e.runtime_seconds}}(t)})}async function g(e,t,n,r,a,i,s,o,l){let{job_id:d=null,result_id:u=null,error_id:c=null}=await x(e,t,n,r,a),_=[];null!==u&&_.push(y(e,t,u,i,s)),null!==c&&_.push(y(e,t,c,i,o)),null!==d&&_.push(y(e,t,d,i,l)),await Promise.all(_)}async function x(e,t,n,r,a){var i;let{data:s}=await l.bj.query({query:p.VrE,variables:{query_id:e,parameters:t,can_refresh:a},context:{session:n,apiKey:r},fetchPolicy:"no-cache"}),o=null!==(i=s.resultSetForQuery)&&void 0!==i?i:null;if(null===o)throw Error("Response from 'get_result_v4' was empty");return o}(0,h.Z)(m())},96008:function(e,t,n){"use strict";n.d(t,{$Q:function(){return l},am:function(){return u},dJ:function(){return o},f0:function(){return s},iM:function(){return d},iQ:function(){return _},wC:function(){return c}});var r=n(61575),a=n(39612),i=n(94682);let s=e=>{var t;return Object.keys(null!==(t=e[0])&&void 0!==t?t:{}).map(t=>{let n="float";for(let r=0;r<e.length;r++)if(null!==e[r][t]){n=o(d(e[r][t]));break}return{name:t,type:n}})},o=e=>{if(!(0,r.C_)(e))return"float";if(Array.isArray(e)||"object"==typeof e)return"string";if("number"==typeof e)return"float";if("boolean"==typeof e)return"string";if((0,i.FU)(e))return"float";if((0,a.mD)(e))return"datetime";else return"string"},l=(e,t)=>{if(t.length!==e.length)return e;let n=e.every(e=>t.includes(e.name));return n?e.sort((e,n)=>t.indexOf(e.name)-t.indexOf(n.name)):e},d=e=>{if(null===e)return null;if(Array.isArray(e))return e.map(e=>d(e)).join(", ");if("object"==typeof e)return JSON.stringify(e);if("boolean"==typeof e)return String(e);if("string"==typeof e){let t=e.length>0?Number(e):NaN,n=!Number.isInteger(t)||Number.isSafeInteger(t),r=Number(e).toString(10)===parseFloat(e).toString(10)&&(0!==t||e.match(/^([0-9]|e|\+|-|\.)+$/));if(Number.isFinite(t)&&n&&r)return t}return e},u=e=>{if(!e||Array.isArray(e))return 0;let t=e&&d(e);if("number"==typeof t)return t;let n=parseFloat(_(t));return Number.isFinite(n)?n:0},c=e=>{if(!e||Array.isArray(e))return 0;let t=d(e);if(!t)return 0;let n="number"==typeof t?new Date(t).getTime():(0,a.NL)(t).getTime();return Number.isFinite(n)?n:0},_=e=>{if(!e)return"";let t=d(e);return t?String(t):""}},78570:function(e,t,n){"use strict";n.d(t,{fH:function(){return s},qp:function(){return d}});var r=n(31269),a=n(35004);let i=["title","tags","author","decription","code","created_before","created_after","updated_before","updated_after"],s=e=>i.some(t=>e.includes("".concat(t,":"))),o=e=>{let t=(0,a.parse)(e,{keywords:i.slice(),alwaysArray:!0,offsets:!1});return i.map(e=>[e,"string"==typeof t?"":e in t?"code"===e?t[e].join(""):t[e].join(" "):""])},l=e=>e.split(" ").filter((0,r.ff)(s)).join(" "),d=e=>({raw_string:e,term:l(e),advanced:Object.fromEntries(o(e))})},91155:function(e,t,n){"use strict";n.d(t,{f:function(){return i},z:function(){return a}});var r=n(79723);let a=()=>({position:{sizeX:3,sizeY:8}}),i=e=>{if((null==e?void 0:e.text_widgets)||(null==e?void 0:e.param_widgets)){var t,n;return{...e,text_widgets:null===(t=e.text_widgets)||void 0===t?void 0:t.map(s),param_widgets:null===(n=e.param_widgets)||void 0===n?void 0:n.map(o)}}return e},s=e=>e.text?{...e,visualization:{...e.visualization,type:"text",html:(0,r.a)(e.text)}}:e,o=e=>e.key?{...e,visualization:{...e.visualization,type:"param",key:e.key}}:e},903:function(e){e.exports={field:"DataUploadForm_field__EZ6Sr",buttonGroup:"DataUploadForm_buttonGroup__k_StN",dataUploadProcessing:"DataUploadForm_dataUploadProcessing__f7utX",form:"DataUploadForm_form__PoGDE",privateToggle:"DataUploadForm_privateToggle__CgfkZ",privateDatasetTooltip:"DataUploadForm_privateDatasetTooltip__ki_tt",upgradeLink:"DataUploadForm_upgradeLink__WhSue"}},92754:function(e){e.exports={inputContainer:"InputFile_inputContainer__jIWu4",iconContainer:"InputFile_iconContainer__JCyav",tableDataContainer:"InputFile_tableDataContainer__tVWKY",tableIconContainer:"InputFile_tableIconContainer__x8k_Y",tableDescriptionContainer:"InputFile_tableDescriptionContainer__2jzl5",descriptionItem:"InputFile_descriptionItem__vtWKC",percentage:"InputFile_percentage___vm6N",inputDescriptionContainer:"InputFile_inputDescriptionContainer__otEH3",inputFile:"InputFile_inputFile___zxrV",progressWrapper:"InputFile_progressWrapper__NfcAs",progressBar:"InputFile_progressBar__P8ybl",progressBarFill:"InputFile_progressBarFill__vYb6u",errorContainer:"InputFile_errorContainer__3G4Ua",error:"InputFile_error__T_EAJ",disabledContainer:"InputFile_disabledContainer__n7Luk",upgradeNotification:"InputFile_upgradeNotification__F_c6L"}},10463:function(e){e.exports={headerMarketing:"Header_headerMarketing__HTCF0",headerApp:"Header_headerApp__XXwol",headerDesktop:"Header_headerDesktop__4MycL",headerMobile:"Header_headerMobile__FXVPf",skip:"Header_skip__uz_Zu"}},94106:function(e){e.exports={header:"HeaderDesktop_header__zyJNJ",group:"HeaderDesktop_group__cN1SE",spacedGroup:"HeaderDesktop_spacedGroup__Q0jGo",leftHalf:"HeaderDesktop_leftHalf__CEOSd",rightHalf:"HeaderDesktop_rightHalf__G_bNV",logoLink:"HeaderDesktop_logoLink__p8zPx",search:"HeaderDesktop_search__fBbw5",iconButton:"HeaderDesktop_iconButton__XYLQn",slash:"HeaderDesktop_slash__FaB7O",pageLink:"HeaderDesktop_pageLink__L3SKZ",headerLink:"HeaderDesktop_headerLink__txGSd",headerButton:"HeaderDesktop_headerButton__RpwhB",filled:"HeaderDesktop_filled__NowQ_"}},16384:function(e){e.exports={header:"HeaderMarketing_header__q_dZR",layout:"HeaderMarketing_layout__Q7VFn",leftSide:"HeaderMarketing_leftSide__jAK_n",rightSide:"HeaderMarketing_rightSide__q80qZ",buttonWrapper:"HeaderMarketing_buttonWrapper__Og_1R"}},73:function(e){e.exports={button:"HeaderButton_button__5AP9z"}},46151:function(e){e.exports={menu:"HamburgerMenu_menu__AT9gu",section:"HamburgerMenu_section__5cjRI",activeItem:"HamburgerMenu_activeItem__1j9SC",moreItems:"HamburgerMenu_moreItems__LeZ4l",createItems:"HamburgerMenu_createItems__1wDhn",discoverItems:"HamburgerMenu_discoverItems__Mw1pE"}},41646:function(e){e.exports={header:"HeaderMobile_header__VA09v",logoLink:"HeaderMobile_logoLink__qkJGw",spacedGroup:"HeaderMobile_spacedGroup__GrgmM",openSearch:"HeaderMobile_openSearch__TOVqJ",searchField:"HeaderMobile_searchField__ywy_y",mobileSearch:"HeaderMobile_mobileSearch__QreUr"}},87304:function(e){e.exports={screenshot:"HeaderScreenshot_screenshot__kAW9v",dune:"HeaderScreenshot_dune__gLu_7"}},77628:function(e){e.exports={banner:"Banner_banner__esLDm","color--success":"Banner_color--success__a_8u4","color--warning":"Banner_color--warning__TadFx","color--error":"Banner_color--error__SG4Vi","color--info":"Banner_color--info__5k2ia","color--neutral":"Banner_color--neutral__JEAvI","color--brand-orange":"Banner_color--brand-orange__r_vCo","color--brand-blue":"Banner_color--brand-blue__nsUus",ctas:"Banner_ctas__Z7L_z",copy:"Banner_copy__X90Fz",dismiss:"Banner_dismiss__mtKSW"}},34878:function(e){e.exports={teamPositioner:"InviteMemberDialog_teamPositioner__k2ux1",content:"InviteMemberDialog_content__fo964",roles:"InviteMemberDialog_roles__fv1dV"}},35707:function(e){e.exports={menu:"OnboardingQuestions_menu__UY4Uz",content:"OnboardingQuestions_content__lCUpG",questions:"OnboardingQuestions_questions__wgXI3",title:"OnboardingQuestions_title__Zx6IL",question:"OnboardingQuestions_question__ScXjD",actions:"OnboardingQuestions_actions__NIjhW",error:"OnboardingQuestions_error__L_wbZ"}},43691:function(e){e.exports={upgradeLink:"PrivacyTooltip_upgradeLink__GHZG_",tooltip:"PrivacyTooltip_tooltip__LjQkE"}},11132:function(e){e.exports={usageTracker:"UsageTracker_usageTracker__wSpkH",usage:"UsageTracker_usage__qGH_d",usageItem:"UsageTracker_usageItem__t0K2V",iconButton:"UsageTracker_iconButton__kzKau"}},95946:function(e){e.exports={checkFilled:"CopyToClipboardButton_checkFilled__ECpAh"}},98920:function(e){e.exports={greenCheckbox:"CheckList_greenCheckbox___tcJc",checkbox:"CheckList_checkbox__iiy_4",strikethrough:"CheckList_strikethrough__ZD7Lg",title:"CheckList_title__Sg5_Y",link:"CheckList_link__ngeYp",menu:"CheckList_menu__wNNjd",menuTitle:"CheckList_menuTitle__kq1A6",lastHint:"CheckList_lastHint__8IxTd",overlay:"CheckList_overlay__ejVjt",highlightedElement:"CheckList_highlightedElement__VclHP"}},94869:function(e){e.exports={gettingStartedButton:"GetStartedButton_gettingStartedButton__g5B66",mobile:"GetStartedButton_mobile__HWm_M",active:"GetStartedButton_active__heOrV",jiggling:"GetStartedButton_jiggling__gpJxk",jiggle:"GetStartedButton_jiggle__QDj_2"}},73916:function(e){e.exports={wrapper:"GlobalSearch_wrapper__ck2z6",results:"GlobalSearch_results__ClohA",shortcutHint:"GlobalSearch_shortcutHint__ASymR",mobile:"GlobalSearch_mobile__lt_h8"}},42383:function(e){e.exports={menu:"SearchMenuPanel_menu__grpel",active:"SearchMenuPanel_active__jKtDN",categoryHeader:"SearchMenuPanel_categoryHeader__yM44E",categoryDivider:"SearchMenuPanel_categoryDivider__G1xuI",visible:"SearchMenuPanel_visible__MVtck",iconLeft:"SearchMenuPanel_iconLeft__fJRCb",alignedStart:"SearchMenuPanel_alignedStart__ZdpGP",itemLabel:"SearchMenuPanel_itemLabel__Njr6T",orange:"SearchMenuPanel_orange__nJYkK",itemCreatedBy:"SearchMenuPanel_itemCreatedBy__4fN3o"}},26352:function(e){e.exports={progressPie:"ProgressPie_progressPie__XMYLu"}},33995:function(e){e.exports={progressPie:"ProgressPieFilled_progressPie__XtYMn"}},52743:function(e){e.exports={overlay:"dialog_overlay__Z6qRN",content:"dialog_content__8b6ar",xs:"dialog_xs__aG05r",sm:"dialog_sm__PeW_c",md:"dialog_md__3cZUe",lg:"dialog_lg__hvKP2"}},54994:function(e){e.exports={fields:"fields_fields__ykFaS",horizontal:"fields_horizontal__eGHv6",xs:"fields_xs___tRyS",sm:"fields_sm__UNtEP",error:"fields_error__RryPE",field:"fields_field__Nd_Ws",legal:"fields_legal__Urez8","label-gap-xs":"fields_label-gap-xs__59w1J","label-gap-lg":"fields_label-gap-lg__Cj9Lg",label:"fields_label__BEp4F",expandable:"fields_expandable__k1BdD",caption:"fields_caption__r2CIL",buttons:"fields_buttons__hfVya","left-buttons":"fields_left-buttons__yHeS7",help:"fields_help__Scr5M",footer:"fields_footer__Jatnr"}},88067:function(e){e.exports={checkbox:"input_checkbox__Ev_f6",input:"input_input__onPvL",combobox:"input_combobox__8Mu9e",textarea:"input_textarea__6NOyC",select:"input_select__uDiMv",xs:"input_xs__oWyRO",sm:"input_sm__GtEi_","border-none":"input_border-none__xOSvQ",lg:"input_lg__s4e9_",disabled:"input_disabled__8GKRk",icon:"input_icon__BuKzf",action:"input_action__GZG7v"}},75320:function(e){e.exports={positionUnset:"loading_positionUnset__i2uS6",loading:"loading_loading__3OEMo"}},10767:function(e){e.exports={main:"dashboard_main__PJWfw",dashboardName:"dashboard_dashboardName__64f5d",archiveButton:"dashboard_archiveButton__TC4SA",linkPreview:"dashboard_linkPreview__Lh6zf",private:"dashboard_private__cEvtI",alignMiddle:"dashboard_alignMiddle__lDEdy",subHeaderToolbar:"dashboard_subHeaderToolbar__MLcFE"}},48197:function(e){e.exports={container:"visuals-new_container__mshC8",row:"visuals-new_row__ZAjSA",customSelectBox:"visuals-new_customSelectBox__E94sG"}},56132:function(e){e.exports={page:"page_page__qLKXL",triangle1:"page_triangle1__AL_0K",triangle2:"page_triangle2__MJU3s",children:"page_children__N2_95",sm:"page_sm__eMLgj",md:"page_md__KbozV",lg:"page_lg__PlMuF"}},42587:function(e){e.exports={tags:"tags_tags__sCoL7"}},39265:function(e){e.exports={group:"ButtonGroup_group__oihLa",right:"ButtonGroup_right__4EqRg"}},93778:function(e){e.exports={button:"ButtonTextOnly_button__ERzJC","size-S":"ButtonTextOnly_size-S__7xctk","size-M":"ButtonTextOnly_size-M___GY3Z","size-L":"ButtonTextOnly_size-L__gStHY",insideText:"ButtonTextOnly_insideText__AC8H1"}},3406:function(e){e.exports={button:"buttonTextOnlyThemes_button__GZWlU",disabled:"buttonTextOnlyThemes_disabled__2N1wN","theme-primary":"buttonTextOnlyThemes_theme-primary__RbiUo","theme-secondary":"buttonTextOnlyThemes_theme-secondary__rCwdA","theme-tertiary":"buttonTextOnlyThemes_theme-tertiary__wMENk","theme-danger":"buttonTextOnlyThemes_theme-danger__HiXcf"}},2297:function(e){e.exports={duneLogo:"Confetti_duneLogo__Me_22",confetti:"Confetti_confetti__Cn3Xb"}},36462:function(e){e.exports={form:"Form_form__Y2KKr","size-S":"Form_size-S__gauX1","size-M":"Form_size-M__cPiYv","size-L":"Form_size-L__9RP7m"}},23797:function(e){e.exports={popover:"HoverPopover_popover__WIi3v",appear:"HoverPopover_appear__a5cbx","right-of-center":"HoverPopover_right-of-center__B25Gv","right-align-top":"HoverPopover_right-align-top__7vGP_","right-align-bottom":"HoverPopover_right-align-bottom__UrHlm","left-of-center":"HoverPopover_left-of-center__gGNIK","left-align-top":"HoverPopover_left-align-top__POM7J","left-align-bottom":"HoverPopover_left-align-bottom__rN9tH","below-center":"HoverPopover_below-center__GFt_q","below-align-left":"HoverPopover_below-align-left__Q7vbx","below-align-right":"HoverPopover_below-align-right__sMrqJ","above-center":"HoverPopover_above-center__HN5V8","above-align-left":"HoverPopover_above-align-left__dHNDO","above-align-right":"HoverPopover_above-align-right__qB5Ff"}},42400:function(e){e.exports={checkbox:"InputCheckbox_checkbox__RanFp",disabled:"InputCheckbox_disabled__FQGJT",checkmark:"InputCheckbox_checkmark__Q4LTN",label:"InputCheckbox_label__OYNnr",hint:"InputCheckbox_hint__d0nON"}},24293:function(e){e.exports={input:"InputField_input__Etz4F","style-outlined":"InputField_style-outlined__iBTGA",disabled:"InputField_disabled__eHnKR",charCounter:"InputField_charCounter__fD_P1",hint:"InputField_hint__mvDtg",prefix:"InputField_prefix__U1kKv",suffix:"InputField_suffix__QubA6","style-contained":"InputField_style-contained__XxTr8",error:"InputField_error__7XGFD",inputError:"InputField_inputError__5UylV","size-S":"InputField_size-S__lC3AZ","size-M":"InputField_size-M__nSFF5","size-L":"InputField_size-L__gzZ_d"}},66195:function(e){e.exports={group:"InputRadioButton_group__QRYoE",radioButton:"InputRadioButton_radioButton__Y8ZdO",disabled:"InputRadioButton_disabled__Ub4WW","theme-secondary":"InputRadioButton_theme-secondary__SXMv_","theme-green":"InputRadioButton_theme-green__ygc04",hint:"InputRadioButton_hint__0Y_a0"}},86780:function(e){e.exports={label:"Label_label__gnLZ0"}},16833:function(e){e.exports={selectBox:"SelectBox_selectBox___boGO","type-outlined":"SelectBox_type-outlined__LTOU3",disabled:"SelectBox_disabled__mH64K",label:"SelectBox_label__2rgFS",hint:"SelectBox_hint__wv6wB",prefix:"SelectBox_prefix__DYBVK",suffix:"SelectBox_suffix__Oakim","type-contained":"SelectBox_type-contained__uMwTc",error:"SelectBox_error__FTw6v",selectBoxError:"SelectBox_selectBoxError__CDUJn","size-S":"SelectBox_size-S__vQ0OE","size-M":"SelectBox_size-M__A2M_x","size-L":"SelectBox_size-L__a7Bdp"}},14253:function(e){e.exports={markdownAnchor:"markdown_markdownAnchor__haisV"}},37281:function(){},75347:function(){},36648:function(){},31777:function(){}}]);
//# sourceMappingURL=9694-77314a588ea4c45b.js.map